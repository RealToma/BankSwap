{"version":3,"sources":["views/Predictions/components/ChartDisclaimer.tsx","views/Predictions/components/CollectWinningsPopup.tsx","views/Predictions/components/Container.tsx","views/Predictions/components/RiskDisclaimer.tsx","views/Predictions/context/SwiperProvider.tsx","hooks/useScript.ts","components/TradingView.tsx","views/Predictions/components/History/Header.tsx","views/Predictions/components/TradingView.tsx","views/Predictions/components/Notification/Notification.tsx","views/Predictions/components/Notification/ErrorNotification.tsx","views/Predictions/components/Notification/PauseNotification.tsx","views/Predictions/components/History/helpers.ts","views/Predictions/components/CollectRoundWinningsModal.tsx","views/Predictions/components/CollectWinningsButton.tsx","views/Predictions/components/ReclaimPositionButton.tsx","views/Predictions/helpers.ts","views/Predictions/components/PositionTag.tsx","views/Predictions/components/RoundResult/styles.tsx","views/Predictions/components/RoundResult/RoundResult.tsx","views/Predictions/components/RoundResult/RoundResultHistory.tsx","views/Predictions/hooks/useIsRefundable.ts","views/Predictions/components/History/BetResult.tsx","views/Predictions/components/History/BetDetails.tsx","views/Predictions/components/History/HistoricalBet.tsx","views/Predictions/components/v1/helpers.ts","views/Predictions/components/v1/NothingToClaimModal.tsx","views/Predictions/components/v1/V1ClaimCheck.tsx","views/Predictions/components/History/RoundsTab.tsx","views/Predictions/components/History/PnlTab/PnlChartStyles.tsx","views/Predictions/components/History/PnlTab/PnlChart.tsx","views/Predictions/components/History/PnlTab/SummaryRow.tsx","views/Predictions/components/History/PnlTab/PnlTab.tsx","views/Predictions/History.tsx","views/Predictions/RoundMultiplierArrows.tsx","views/Predictions/components/RoundCard/EnteredTag.tsx","views/Predictions/components/RoundCard/MultiplierArrow.tsx","views/Predictions/components/RoundCard/CardHeader.tsx","views/Predictions/components/RoundCard/CollectWinningsOverlay.tsx","views/Predictions/components/RoundCard/CanceledRoundCard.tsx","views/Predictions/components/RoundCard/CalculatingCard.tsx","views/Predictions/components/RoundCard/ExpiredRoundCard.tsx","components/RoundProgress.tsx","views/Predictions/components/RoundCard/LiveRoundCard.tsx","views/Predictions/components/CardFlip.tsx","views/Predictions/hooks/useSwiper.ts","views/Predictions/components/FlexRow.tsx","views/Predictions/components/RoundCard/SetPositionCard.tsx","views/Predictions/components/RoundCard/OpenRoundCard.tsx","views/Predictions/hooks/useCountdown.ts","views/Predictions/components/RoundCard/SoonRoundCard.tsx","views/Predictions/components/RoundCard/index.tsx","views/Predictions/components/Label.tsx","views/Predictions/components/PrevNextNav.tsx","views/Predictions/components/HistoryButton.tsx","views/Predictions/components/Menu.tsx","views/Predictions/hooks/useOnNextRound.ts","views/Predictions/hooks/useOnViewChange.ts","views/Predictions/Positions.tsx","views/Predictions/types.ts","views/Predictions/Desktop.tsx","views/Predictions/hooks/useGetLatestOraclePrice.ts","views/Predictions/hooks/usePollOraclePrice.ts","views/Predictions/hooks/usePollPredictions.ts","views/Predictions/components/MobileMenu.tsx","views/Predictions/Chart.tsx","views/Predictions/Mobile.tsx","views/Predictions/index.tsx","state/predictions/hooks.ts"],"names":["Ul","styled","ul","theme","colors","textSubtle","ChartDisclaimer","onDismiss","useUserPredictionChartDisclaimerShow","showDisclaimer","setShowDisclaimer","t","useTranslation","minWidth","p","maxWidth","justifyContent","mb","src","width","height","as","size","fontSize","color","href","external","onClick","htmlFor","style","display","cursor","marginBottom","alignItems","flex","id","scale","checked","onChange","ml","bounceInKeyframe","keyframes","bounceOutKeyframe","bounceInAnimation","css","bounceOutAnimation","Wrapper","div","mediaQueries","md","Popup","secondary","CollectWinningsPopup","useState","isOpen","setIsOpen","ref","useRef","timer","account","useWeb3React","predictionStatus","useGetPredictionsStatus","isHistoryPaneOpen","useIsHistoryPaneOpen","dispatch","useAppDispatch","useEffect","isCancelled","current","setInterval","a","getBetHistory","user","toLowerCase","claimed","bets","winnerBets","filter","bet","position","round","length","clearInterval","CSSTransition","in","unmountOnExit","nodeRef","timeout","classNames","mr","setHistoryPaneState","variant","Container","gradients","violetAlt","GradientModalHeader","ModalHeader","bubblegum","RiskDisclaimer","onSuccess","acknowledgeRisk","setAcknowledgeRisk","acknowledgeBeta","setAcknowledgeBeta","title","maxHeight","overflowY","disabled","SwiperContext","createContext","undefined","SwiperProvider","children","swiper","setSwiper","Provider","value","destroySwiper","destroy","useScript","status","setStatus","script","document","querySelector","getAttribute","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","type","addEventListener","setStateFromEvent","removeEventListener","tradingViewListener","Promise","resolve","Object","defineProperty","window","configurable","set","this","tv","initializeTradingView","TradingViewObj","localeCode","opts","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","e","widget","container_id","autosize","symbol","interval","isDark","locale","toolbar_bg","enable_publishing","allow_symbol_change","hide_side_toolbar","enabled_features","HistoryTabs","TradingViewLabel","props","px","TradingView","currentLanguage","useTheme","widgetRef","isMobile","useMatchBreakpoints","code","then","overflow","className","CardWrapper","BunnyDecoration","Notification","alt","ErrorNotification","PauseNotification","formatUsd","usd","formatNumber","formatBnb","bnb","toLocaleString","minimumFractionDigits","maximumFractionDigits","getMultiplier","total","amount","getPayout","rewardRate","bullAmount","bearAmount","totalAmount","multiplier","BetPosition","BULL","getNetPayout","payout","Modal","ModalContainer","CollectRoundWinningsModal","isPendingTx","setIsPendingTx","useToast","toastSuccess","toastError","callWithGasPrice","useCallWithGasPrice","predictionsContract","usePredictionsContract","bnbBusdPrice","useBNBBusdPrice","isLoadingHistory","useGetIsFetchingHistory","history","useGetHistory","reduce","accum","betPayout","REWARD_RATE","epochs","epoch","calculateClaimableRounds","totalBnb","multiplyPriceByAmount","fetchNodeHistory","handleClick","tx","wait","receipt","markAsCollected","Toast","txHash","transactionHash","console","error","logError","data","message","mt","mx","textAlign","toFixed","rounds","join","isLoading","endIcon","spin","CollectWinningsButton","hasClaimed","useModal","onPresentCollectWinningsModal","ReclaimPositionButton","handleReclaim","MIN_PRICE_USD_DISPLAYED","BigNumber","from","MIN_PRICE_BNB_DISPLAYED","formatPriceDifference","price","minPriceDisplayed","unitPrefix","decimals","sign","isNegative","abs","lt","signedPriceToFormat","mul","formatBigNumberToFixed","formatUsdv2","formatBnbv2","padTime","num","toString","padStart","formatRoundTime","secondsBetweenBlocks","getTimePeriods","hours","minutes","seconds","minutesSeconds","getHasRoundFailed","buffer","closeTimestampMs","closeTimestamp","now","Date","oracleCalled","getMultiplierV2","ethers","FixedNumber","eq","rewardAmountFixed","multiplierAmountFixed","divUnsafe","getPriceDifference","lockPrice","sub","getRoundPosition","closePrice","HOUSE","gt","BEAR","StyledTag","Flex","bg","Tag","startIcon","icon","borderRadius","py","textTransform","PositionTag","betPosition","isUpPosition","useTooltip","bold","placement","targetRef","tooltip","tooltipVisible","fontWeight","getPrizePoolAmount","Row","PrizePoolRow","PayoutRow","positionLabel","formattedMultiplier","lineHeight","LockPriceRow","Background","Box","isNext","isLive","hasEntered","success","failure","textDisabled","cardBorder","StyledRoundResultBox","card","background","RoundResultBox","RoundPrice","priceDifference","getTextColor","my","getPrizePoolAmountHistory","PrizePoolHistoryRow","LockPriceHistoryRow","RoundResult","hasFailed","isPositionUp","failed","useIsRefundable","isRefundable","setIsRefundable","getPredictionsContract","refundable","ledger","fetchRefundableStatus","StyledBetResult","Divider","hr","BetResult","result","canClaim","useGetIsClaimable","fee","isWinner","Result","WIN","totalPayout","returned","getHeaderColor","LOSE","CANCELED","handleSuccess","fetchLedgerData","getHeaderText","getHeaderIcon","claimedHash","getBscScanLink","getResultColor","StyledBetDetails","dropdown","BetDetails","bullMultiplier","bearMultiplier","LIVE","RoundResultHistory","lockBlock","closeBlock","StyledBet","attrs","YourResult","HistoricalBet","currentEpoch","useGetCurrentEpoch","roundResult","getRoundResult","resultTextColor","getRoundColor","resultTextPrefix","isOpenRound","isLiveRound","PredictionStatus","role","Filter","label","StyledHeader","ButtonMenuContainer","Header","activeTab","setActiveTab","historyFilter","useGetHistoryFilter","isFetchingHistory","handleChange","newFilter","setHistoryFilter","switchTab","tabIndex","HistoryFilter","ALL","activeIndex","onItemClick","ROUNDS","COLLECTED","UNCOLLECTED","getV1History","skip","where","request","GRAPH_API_PREDICTION_V1","gql","response","getAllV1History","reject","getHistoryChunk","betHistory","flatten","values","isFetching","setIsFetching","setHistory","fetchAllHistory","header","rows","hash","totalBets","anchor","blob","Blob","URL","createObjectURL","target","download","click","removeChild","StyledClaimCheck","ClaimCheck","NothingToClaimModal","onPresentNothingToClaimModal","Loading","RoundsTab","hasBetHistory","hasHistoryLoaded","useGetHasHistoryLoaded","currentHistoryPage","useGetCurrentHistoryPage","V1ClaimCheck","orderBy","map","page","DrawAnimation","OffsetAnimation","offset","SVG","svg","DefaultSlice","circle","LostSlice","WonSlice","Info","CIRCUMFERENCE","PnlChart","lost","won","percentageWon","paintLost","paintWon","viewBox","r","cx","cy","small","summaryTypeColors","entered","summaryTypeSigns","SummaryRow","summary","roundsInPercents","typeTranslationKey","charAt","toUpperCase","slice","displayAmount","amountInUsd","flexDirection","toLocaleLowerCase","backgroundDisabled","initialPnlSummary","bestRound","PnlTab","getPnlSummary","netResultAmount","netResultIsPositive","avgPositionEntered","avgBnbWonPerRound","avgBnbWonIsPositive","hasBestRound","netResultInUsd","avgBnbWonInUsd","betRoundInUsd","avgPositionEnteredInUsd","pb","pl","roundId","StyledHistory","BetWrapper","SpinnerWrapper","History","results","getFilteredBets","activeTabComponent","PNL","ConnectWalletButton","RoundMultiplierDownArrow","isActive","fill","d","x","y","filterUnits","colorInterpolationFilters","floodOpacity","mode","in2","stdDeviation","operator","k2","k3","RoundMultiplierUpArrow","EnteredTag","whiteSpace","outline","ArrowWrapper","Content","EnteredTagWrapper","fallback","isDisabled","isHouse","MultiplierArrow","betAmount","upColor","downColor","textColor","multiplierText","getEnteredTag","bottom","right","top","left","HEADER_HEIGHT","getBorderBackground","gradientStopPoint","cardHeader","warning","getTextColorByStatus","StyledCardHeader","getBackgroundColor","Round","CardHeader","isBottom","CollectWinningsOverlay","CanceledRoundCard","borderBackground","CalculatingCard","hasEnteredUp","hasEnteredDown","StyledExpiredRoundCard","Card","ExpiredRoundCard","hasClaimedUp","hasClaimedDown","bufferSeconds","useGetBufferSeconds","hasRoundFailed","RoundProgress","lockTimestamp","startMs","endMs","rawProgress","progress","primaryStep","LiveRoundCard","useGetLastOraclePrice","isBull","priceColor","priceAsNumber","parseFloat","useCountUp","start","end","duration","countUp","update","updateRef","minHeight","Front","Back","Inner","isFlipped","StyledCardFlip","CardFlip","Error","getComponents","front","back","useSwiper","swiperContext","useContext","FlexRow","dust","parseUnits","percentShortcuts","getValueAsEthersBn","valueAsFloat","Number","isNaN","SetPositionCard","togglePosition","onBack","setValue","isTxPending","setIsTxPending","errorMessage","setErrorMessage","percent","setPercent","bnbBalance","useGetBnbBalance","balance","minBetAmount","useGetMinBetAmount","maxBalance","useMemo","balanceDisplay","formatBigNumber","valueAsBn","showFieldWarning","handlePercentChange","sliderPercent","maxValueAsFn","hundredAsFn","sliderPercentAsFn","balancePercentage","mulUnsafe","formatFixedNumber","minBetAmountBalance","lte","key","getButtonProps","handleEnterPosition","betMethod","inputAmount","token","onMouseOver","keyboard","disable","mousewheel","detachEvents","onMouseOut","enable","attachEvents","onUserInput","input","inputAsBn","inputAsFn","percentageAsFloat","toUnsafeFloat","isWarning","inputProps","name","min","max","onValueChanged","valueLabel","step","percentShortcut","OpenRoundCard","isSettingPosition","state","setState","isBufferPhase","ROUND_BUFFER","positionDisplay","canEnterPosition","handleBack","prevState","handleSetPosition","newPosition","getNow","Math","floor","useCountdown","timestamp","secondsRemaining","setSecondsRemaining","isPaused","setIsPaused","isWindowVisible","useIsWindowVisible","pause","useCallback","unpause","setTimeout","prevSecondsRemaining","clearTimeout","SoonRoundCard","intervalSeconds","useGetIntervalSeconds","startTimestamp","countdown","RoundCard","useGetBetByEpoch","formattedBullMultiplier","isZero","formattedBearMultiplier","Token","lg","Title","Text","ClosingTitle","sm","Price","Interval","Label","shadows","level1","dir","radii","PricePairLabel","TimerLabel","unit","currentRoundLockTimestamp","useGetCurrentRoundLockTimestamp","pr","StyledPrevNextNav","default","Icon","PrevNextNav","useGetSortedRounds","slidePrev","currentEpochIndex","findIndex","slideTo","slideNext","HistoryButton","SetCol","HelpButtonWrapper","TimerLabelWrapper","LeaderboardButtonWrapper","ButtonWrapper","Menu","rel","Link","to","order","useOnNextRound","previousEpoch","usePreviousValue","useOnViewChange","liveSwiperIndex","view","prevView","usePrevious","SwiperCore","use","Keyboard","Mousewheel","PageView","StyledSwiper","Positions","previousRound","find","swiperIndex","indexOf","initialSlide","onSwiper","spaceBetween","slidesPerView","freeMode","freeModeSticky","centeredSlides","freeModeMomentumRatio","freeModeMomentumVelocityRatio","resizeObserver","ExpandChartButton","Button","text","SplitWrapper","ChartPane","HistoryPane","StyledDesktop","PositionPane","Gutter","Desktop","splitWrapperRef","chartRef","gutterRef","isChartPaneOpen","useIsChartPaneOpen","handleDrag","debounce","getBoundingClientRect","setChartPaneState","split","Split","dragInterval","snapOffset","onDrag","rowGutters","track","element","newChartPaneState","transition","gridTemplateRows","delay","ERROR","PAUSED","useGetLatestOraclePrice","setPrice","useLastUpdated","lastUpdated","refresh","setLastUpdated","contract","getChainlinkOracleContract","latestAnswer","fetchPrice","usePollOraclePrice","setLastOraclePrice","toJSON","usePollPredictions","earliestEpoch","useGetEarliestEpoch","INITIAL","liveCurrentAndRecent","fetchRounds","fetchMarketData","epochRange","range","fetchClaimableStatuses","POLL_TIME_IN_SECONDS","ButtonNav","TabNav","StyledMobileMenu","MobileMenu","isHistoryOpen","isChartOpen","getActiveIndex","index","MenuWrapper","ChartWrapper","Chart","StyledMobile","xl","View","isVisible","Mobile","HISTORY","CHART","POSITIONS","getView","Predictions","isDesktop","useUserPredictionAcceptedRisk","hasAcceptedRisk","setHasAcceptedRisk","initialBlock","useInitialBlock","onPresentRiskDisclaimer","onPresentChartDisclaimer","onPresentRiskDisclaimerRef","onPresentChartDisclaimerRef","initializePredictions","PageLoader","Page","useGetRounds","useSelector","predictions","keys","parseBigNumberObj","roundData","ledgers","claimableStatuses","earliestRound","minBy","lastOraclePrice","currentRound","useGetCurrentRound","useGetLeaderboardLoadingState","leaderboard","loadingState","useGetLeaderboardResults","useGetLeaderboardFilters","filters","useGetLeaderboardSkip","useGetLeaderboardHasMoreResults","hasMoreResults","useGetOrFetchLeaderboardAddressResult","addressResult","addressResults","useGetAddressResult","address","isAddress","fetchAddressResult","useGetSelectedAddress","selectedAddress"],"mappings":"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","file":"static/js/35.49d9356e.chunk.js","sourcesContent":["import React from 'react'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  Text,\r\n  Button,\r\n  InjectedModalProps,\r\n  LinkExternal,\r\n  Flex,\r\n  Image,\r\n  Heading,\r\n  Checkbox,\r\n  Box,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useUserPredictionChartDisclaimerShow } from 'state/user/hooks'\r\n\r\nconst Ul = styled.ul`\r\n  color: ${({ theme }) => theme.colors.textSubtle};\r\n  list-style-position: outside;\r\n  margin-left: 16px;\r\n\r\n  & > li {\r\n    font-size: 14px;\r\n    line-height: 1.5;\r\n  }\r\n`\r\n\r\nconst ChartDisclaimer: React.FC<InjectedModalProps> = ({ onDismiss }) => {\r\n  const [showDisclaimer, setShowDisclaimer] = useUserPredictionChartDisclaimerShow()\r\n  const { t } = useTranslation()\r\n\r\n  const handleConfirm = () => {\r\n    onDismiss()\r\n  }\r\n\r\n  return (\r\n    <ModalContainer minWidth=\"320px\">\r\n      <ModalBody p=\"24px\" maxWidth=\"400px\">\r\n        <Flex justifyContent=\"center\" mb=\"32px\">\r\n          <Image src=\"/images/chartwarning.svg\" width={190} height={118} />\r\n        </Flex>\r\n        <Heading as=\"h3\" size=\"sm\">\r\n          {t('Warning')}:\r\n        </Heading>\r\n        <Heading as=\"h4\" size=\"sm\" mb=\"24px\">\r\n          {t('Prices shown on cards and charts are different')}:\r\n        </Heading>\r\n        <Text as=\"p\" fontSize=\"14px\" color=\"textSubtle\">\r\n          {t('The price you see come from difference places')}:\r\n        </Text>\r\n        <Ul>\r\n          <li>{t('Prices on cards come from Chainlinks verifiable price oracle.')}</li>\r\n          <li>{t(\"Prices on charts come from Binance.com. Chart's are provided for your reference only.\")}</li>\r\n        </Ul>\r\n        <Text as=\"p\" mb=\"16px\" fontSize=\"14px\" color=\"textSubtle\">\r\n          {t(\"Only the price from Chainlink (shown on the cards) determines the round's result.\")}\r\n        </Text>\r\n        <LinkExternal\r\n          href=\"https://docs.pancakeswap.finance/products/prediction/prediction-faq#what-are-you-using-for-your-price-feed\"\r\n          external\r\n          mb=\"24px\"\r\n        >\r\n          {t('Learn More')}\r\n        </LinkExternal>\r\n        <Box>\r\n          <Button width=\"100%\" onClick={handleConfirm} mb=\"16px\">\r\n            {t('I understand')}\r\n          </Button>\r\n        </Box>\r\n        <label htmlFor=\"checkbox\" style={{ display: 'block', cursor: 'pointer', marginBottom: '24px' }}>\r\n          <Flex alignItems=\"center\">\r\n            <div style={{ flex: 'none' }}>\r\n              <Checkbox\r\n                id=\"checkbox\"\r\n                scale=\"sm\"\r\n                checked={!showDisclaimer}\r\n                onChange={() => setShowDisclaimer(!showDisclaimer)}\r\n              />\r\n            </div>\r\n            <Text ml=\"8px\">{t(\"Don't show this again\")}</Text>\r\n          </Flex>\r\n        </label>\r\n      </ModalBody>\r\n    </ModalContainer>\r\n  )\r\n}\r\n\r\nexport default ChartDisclaimer\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled, { css, keyframes } from 'styled-components'\r\nimport { Button, CloseIcon, IconButton, TrophyGoldIcon } from '@pancakeswap/uikit'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBetHistory } from 'state/predictions/helpers'\r\nimport { useGetPredictionsStatus, useIsHistoryPaneOpen } from 'state/predictions/hooks'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\n\r\n/**\r\n * @see https://github.com/animate-css/animate.css/tree/main/source\r\n */\r\nconst bounceInKeyframe = keyframes`\r\n  from,\r\n  60%,\r\n  75%,\r\n  90%,\r\n  to {\r\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\r\n  }\r\n\r\n  from {\r\n    opacity: 0;\r\n    transform: translate3d(0, 3000px, 0) scaleY(5);\r\n  }\r\n\r\n  60% {\r\n    opacity: 1;\r\n    transform: translate3d(0, -20px, 0) scaleY(0.9);\r\n  }\r\n\r\n  75% {\r\n    transform: translate3d(0, 10px, 0) scaleY(0.95);\r\n  }\r\n\r\n  90% {\r\n    transform: translate3d(0, -5px, 0) scaleY(0.985);\r\n  }\r\n\r\n  to {\r\n    transform: translate3d(0, 0, 0);\r\n  }\r\n`\r\n\r\nconst bounceOutKeyframe = keyframes`\r\n  20% {\r\n    transform: translate3d(0, 10px, 0) scaleY(0.985);\r\n  }\r\n\r\n  40%,\r\n  45% {\r\n    opacity: 1;\r\n    transform: translate3d(0, -20px, 0) scaleY(0.9);\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n    transform: translate3d(0, 2000px, 0) scaleY(3);\r\n  }\r\n`\r\n\r\nconst bounceInAnimation = css`\r\n  animation: ${bounceInKeyframe} 1s;\r\n`\r\n\r\nconst bounceOutAnimation = css`\r\n  animation: ${bounceOutKeyframe} 1s;\r\n`\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  bottom: 72px;\r\n  color: #ffffff;\r\n  display: flex;\r\n  justify-content: center;\r\n  left: 0;\r\n  padding-left: 16px;\r\n  padding-right: 16px;\r\n  position: absolute;\r\n  width: 100%;\r\n  z-index: 50;\r\n\r\n  &.popup-enter-active {\r\n    ${bounceInAnimation}\r\n  }\r\n\r\n  &.popup-enter-done {\r\n    bottom: 72px;\r\n  }\r\n\r\n  &.popup-exit-done {\r\n    bottom: -2000px;\r\n  }\r\n\r\n  &.popup-exit-active {\r\n    ${bounceOutAnimation}\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    bottom: 16px;\r\n    justify-content: flex-end;\r\n\r\n    &.popup-enter-done {\r\n      bottom: 16px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Popup = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.colors.secondary};\r\n  border-radius: 32px;\r\n  color: #ffffff;\r\n  display: flex;\r\n  max-width: 320px;\r\n  padding: 16px 8px;\r\n`\r\n\r\nconst CollectWinningsPopup = () => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { t } = useTranslation()\r\n  const ref = useRef(null)\r\n  const timer = useRef(null)\r\n  const { account } = useWeb3React()\r\n  const predictionStatus = useGetPredictionsStatus()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  const handleClick = () => {\r\n    setIsOpen(false)\r\n    clearInterval(timer.current)\r\n  }\r\n\r\n  // Check user's history for unclaimed winners\r\n  useEffect(() => {\r\n    let isCancelled = false\r\n    if (account) {\r\n      timer.current = setInterval(async () => {\r\n        const bets = await getBetHistory({ user: account.toLowerCase(), claimed: false })\r\n\r\n        if (!isCancelled) {\r\n          // Filter out bets that were not winners\r\n          const winnerBets = bets.filter((bet) => {\r\n            return bet.position === bet.round.position\r\n          })\r\n\r\n          if (!isHistoryPaneOpen) {\r\n            setIsOpen(winnerBets.length > 0)\r\n          }\r\n        }\r\n      }, 30000)\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(timer.current)\r\n      isCancelled = true\r\n    }\r\n  }, [account, timer, predictionStatus, setIsOpen, isHistoryPaneOpen])\r\n\r\n  // Any time the history pane is open make sure the popup closes\r\n  useEffect(() => {\r\n    if (isHistoryPaneOpen) {\r\n      setIsOpen(false)\r\n    }\r\n  }, [isHistoryPaneOpen, setIsOpen])\r\n\r\n  return (\r\n    <CSSTransition in={isOpen} unmountOnExit nodeRef={ref} timeout={1000} classNames=\"popup\">\r\n      <Wrapper ref={ref}>\r\n        <Popup>\r\n          <TrophyGoldIcon width=\"64px\" style={{ flex: 'none' }} mr=\"8px\" />\r\n          <Button style={{ flex: 1 }} onClick={handleOpenHistory}>\r\n            {t('Collect Winnings')}\r\n          </Button>\r\n          <IconButton variant=\"text\" onClick={handleClick}>\r\n            <CloseIcon color=\"primary\" width=\"24px\" />\r\n          </IconButton>\r\n        </Popup>\r\n      </Wrapper>\r\n    </CSSTransition>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsPopup\r\n","import styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  background: ${({ theme }) => theme.colors.gradients.violetAlt};\r\n  height: calc(100vh - 100px);\r\n  overflow: hidden;\r\n  position: relative;\r\n`\r\n\r\nexport default Container\r\n","import React, { useState } from 'react'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  Text,\r\n  Button,\r\n  Flex,\r\n  InjectedModalProps,\r\n  Checkbox,\r\n  ModalHeader,\r\n  ModalTitle,\r\n  Heading,\r\n  Box,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\n\r\ninterface RiskDisclaimerProps extends InjectedModalProps {\r\n  onSuccess: () => void\r\n}\r\n\r\nconst GradientModalHeader = styled(ModalHeader)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n  padding-bottom: 24px;\r\n  padding-top: 24px;\r\n`\r\n\r\nconst RiskDisclaimer: React.FC<RiskDisclaimerProps> = ({ onSuccess, onDismiss }) => {\r\n  const [acknowledgeRisk, setAcknowledgeRisk] = useState(false)\r\n  const [acknowledgeBeta, setAcknowledgeBeta] = useState(false)\r\n  const { t } = useTranslation()\r\n\r\n  const handleSetAcknowledgeRisk = () => {\r\n    setAcknowledgeRisk(!acknowledgeRisk)\r\n  }\r\n\r\n  const handleSetAcknowledgeBeta = () => {\r\n    setAcknowledgeBeta(!acknowledgeBeta)\r\n  }\r\n\r\n  const handleConfirm = () => {\r\n    onSuccess()\r\n    onDismiss()\r\n  }\r\n\r\n  return (\r\n    <ModalContainer title={t('Welcome!')} minWidth=\"320px\" id=\"predictions-risk-disclaimer\">\r\n      <GradientModalHeader>\r\n        <ModalTitle>\r\n          <Heading scale=\"lg\">{t('Welcome!')}</Heading>\r\n        </ModalTitle>\r\n      </GradientModalHeader>\r\n      <ModalBody p=\"24px\" maxWidth=\"400px\">\r\n        <Box maxHeight=\"300px\" overflowY=\"auto\">\r\n          <Heading as=\"h3\" mb=\"24px\">\r\n            {t('This Product is in beta.')}\r\n          </Heading>\r\n\r\n          <Text as=\"p\" color=\"textSubtle\" mb=\"24px\">\r\n            {t('Once you enter a position, you cannot cancel or adjust it.')}\r\n          </Text>\r\n\r\n          <label\r\n            htmlFor=\"responsibility-checkbox\"\r\n            style={{ display: 'block', cursor: 'pointer', marginBottom: '24px' }}\r\n          >\r\n            <Flex alignItems=\"center\">\r\n              <div style={{ flex: 'none' }}>\r\n                <Checkbox\r\n                  id=\"responsibility-checkbox\"\r\n                  scale=\"sm\"\r\n                  checked={acknowledgeRisk}\r\n                  onChange={handleSetAcknowledgeRisk}\r\n                />\r\n              </div>\r\n              <Text ml=\"8px\">\r\n                {t(\r\n                  'I understand that I am using this product at my own risk. Any losses incurred due to my actions are my own responsibility.',\r\n                )}\r\n              </Text>\r\n            </Flex>\r\n          </label>\r\n          <label htmlFor=\"beta-checkbox\" style={{ display: 'block', cursor: 'pointer', marginBottom: '24px' }}>\r\n            <Flex alignItems=\"center\">\r\n              <div style={{ flex: 'none' }}>\r\n                <Checkbox id=\"beta-checkbox\" scale=\"sm\" checked={acknowledgeBeta} onChange={handleSetAcknowledgeBeta} />\r\n              </div>\r\n              <Text ml=\"8px\">\r\n                {t('I understand that this product is still in beta. I am participating at my own risk')}\r\n              </Text>\r\n            </Flex>\r\n          </label>\r\n        </Box>\r\n        <Button\r\n          id=\"prediction-disclaimer-continue\"\r\n          width=\"100%\"\r\n          onClick={handleConfirm}\r\n          disabled={!acknowledgeRisk || !acknowledgeBeta}\r\n        >\r\n          {t('Continue')}\r\n        </Button>\r\n      </ModalBody>\r\n    </ModalContainer>\r\n  )\r\n}\r\n\r\nexport default RiskDisclaimer\r\n","import React, { createContext, Dispatch, useState } from 'react'\r\nimport SwiperCore from 'swiper'\r\n\r\ninterface Context {\r\n  swiper: SwiperCore\r\n  setSwiper: Dispatch<React.SetStateAction<SwiperCore>>\r\n  destroySwiper: () => void\r\n}\r\n\r\nexport const SwiperContext = createContext<Context>(undefined)\r\n\r\nconst SwiperProvider = ({ children }) => {\r\n  const [swiper, setSwiper] = useState<SwiperCore>(null)\r\n\r\n  const destroySwiper = () => {\r\n    if (swiper) {\r\n      swiper.destroy()\r\n      setSwiper(null)\r\n    }\r\n  }\r\n\r\n  return <SwiperContext.Provider value={{ swiper, setSwiper, destroySwiper }}>{children}</SwiperContext.Provider>\r\n}\r\n\r\nexport default SwiperProvider\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport type Status = 'idle' | 'loading' | 'ready' | 'error'\r\nexport type ScriptElt = HTMLScriptElement | null\r\n\r\nfunction useScript(src: string): Status {\r\n  const [status, setStatus] = useState<Status>(src ? 'loading' : 'idle')\r\n\r\n  useEffect(\r\n    () => {\r\n      if (!src) {\r\n        setStatus('idle')\r\n        return\r\n      }\r\n\r\n      // Fetch existing script element by src\r\n      // It may have been added by another instance of this hook\r\n      let script: ScriptElt = document.querySelector(`script[src=\"${src}\"]`)\r\n\r\n      if (!script) {\r\n        // Create script\r\n        script = document.createElement('script')\r\n        script.src = src\r\n        script.async = true\r\n        script.setAttribute('data-status', 'loading')\r\n        // Add script to document body\r\n        document.body.appendChild(script)\r\n\r\n        // Store status in attribute on script\r\n        // This can be read by other instances of this hook\r\n        const setAttributeFromEvent = (event: Event) => {\r\n          script?.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error')\r\n        }\r\n\r\n        script.addEventListener('load', setAttributeFromEvent)\r\n        script.addEventListener('error', setAttributeFromEvent)\r\n      } else {\r\n        // Grab existing script status from attribute and set to state.\r\n        setStatus(script.getAttribute('data-status') as Status)\r\n      }\r\n\r\n      // Script event handler to update status in state\r\n      // Note: Even if the script already exists we still need to add\r\n      // event handlers to update the state for *this* hook instance.\r\n      const setStateFromEvent = (event: Event) => {\r\n        setStatus(event.type === 'load' ? 'ready' : 'error')\r\n      }\r\n\r\n      // Add event listeners\r\n      script.addEventListener('load', setStateFromEvent)\r\n      script.addEventListener('error', setStateFromEvent)\r\n\r\n      // Remove event listeners on cleanup\r\n      // eslint-disable-next-line consistent-return\r\n      return () => {\r\n        if (script) {\r\n          script.removeEventListener('load', setStateFromEvent)\r\n          script.removeEventListener('error', setStateFromEvent)\r\n        }\r\n      }\r\n    },\r\n    [src], // Only re-run effect if script src changes\r\n  )\r\n\r\n  return status\r\n}\r\n\r\nexport default useScript\r\n","import { Box, Flex, FlexProps, Link, Text, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useScript from 'hooks/useScript'\r\nimport React, { useEffect, useRef } from 'react'\r\nimport { DefaultTheme, useTheme } from 'styled-components'\r\n\r\n/**\r\n * When the script tag is injected the TradingView object is not immediately\r\n * available on the window. So we listen for when it gets set\r\n */\r\nconst tradingViewListener = async () =>\r\n  new Promise<void>((resolve) =>\r\n    Object.defineProperty(window, 'TradingView', {\r\n      configurable: true,\r\n      set(value) {\r\n        this.tv = value\r\n        resolve(value)\r\n      },\r\n    }),\r\n  )\r\n\r\nconst initializeTradingView = (TradingViewObj: any, theme: DefaultTheme, localeCode: string, opts: any) => {\r\n  let timezone = 'Etc/UTC'\r\n  try {\r\n    timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\r\n  } catch (e) {\r\n    // noop\r\n  }\r\n  /* eslint-disable new-cap */\r\n  /* eslint-disable no-new */\r\n  // @ts-ignore\r\n  return new TradingViewObj.widget({\r\n    // Advanced Chart Widget uses the legacy embedding scheme,\r\n    // an id property should be specified in the settings object\r\n    id: opts.container_id,\r\n    autosize: true,\r\n    height: '100%',\r\n    symbol: 'BINANCE:BNBUSDT',\r\n    interval: '5',\r\n    timezone,\r\n    theme: theme.isDark ? 'dark' : 'light',\r\n    style: '1',\r\n    locale: localeCode,\r\n    toolbar_bg: '#f1f3f6',\r\n    enable_publishing: false,\r\n    allow_symbol_change: true,\r\n    hide_side_toolbar: false,\r\n    enabled_features: ['header_fullscreen_button'],\r\n    ...opts,\r\n  })\r\n}\r\n\r\ninterface TradingViewProps {\r\n  id: string\r\n  symbol: string\r\n}\r\n\r\nconst TradingView = ({ id, symbol }: TradingViewProps) => {\r\n  const { currentLanguage } = useTranslation()\r\n  const theme = useTheme()\r\n  const widgetRef = useRef<any>()\r\n  const { isMobile } = useMatchBreakpoints()\r\n\r\n  useScript('https://s3.tradingview.com/tv.js')\r\n\r\n  useEffect(() => {\r\n    const opts: any = {\r\n      container_id: id,\r\n      symbol,\r\n    }\r\n\r\n    if (isMobile) {\r\n      opts.hide_side_toolbar = true\r\n    }\r\n\r\n    // @ts-ignore\r\n    if (window.tv) {\r\n      // @ts-ignore\r\n      widgetRef.current = initializeTradingView(window.tv, theme, currentLanguage.code, opts)\r\n    } else {\r\n      tradingViewListener().then((tv) => {\r\n        widgetRef.current = initializeTradingView(tv, theme, currentLanguage.code, opts)\r\n      })\r\n    }\r\n\r\n    // Ignore isMobile to avoid re-render TV\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [theme, currentLanguage, id, symbol])\r\n\r\n  return (\r\n    <Box overflow=\"hidden\" className=\"tradingview_container\">\r\n      <div id={id} />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport function useTradingViewEvent({\r\n  id,\r\n  onNoDataEvent,\r\n  onLoadedEvent,\r\n}: {\r\n  id?: string\r\n  onNoDataEvent?: () => void\r\n  onLoadedEvent?: () => void\r\n}) {\r\n  useEffect(() => {\r\n    const onNoDataAvailable = (event: MessageEvent) => {\r\n      const payload = event.data\r\n\r\n      if (payload.name === 'tv-widget-no-data') {\r\n        if (id && payload.frameElementId === id) {\r\n          onNoDataEvent?.()\r\n        }\r\n      }\r\n      if (payload.name === 'tv-widget-load') {\r\n        if (id && payload.frameElementId === id) {\r\n          onLoadedEvent?.()\r\n        }\r\n      }\r\n    }\r\n    window.addEventListener('message', onNoDataAvailable)\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      window.removeEventListener('message', onNoDataAvailable)\r\n    }\r\n  }, [id, onNoDataEvent, onLoadedEvent])\r\n}\r\n\r\n// Required to link to TradingView website for the widget\r\nexport const TradingViewLabel = ({ symbol, ...props }: { symbol: string } & FlexProps) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Flex alignItems=\"center\" px=\"24px\" {...props}>\r\n      <Link fontSize=\"14px\" href={`https://www.tradingview.com/symbols/${symbol}`} external>\r\n        BNB {t('Chart')}\r\n      </Link>\r\n      <Text fontSize=\"14px\" ml=\"4px\">\r\n        {t('by')} TradingView\r\n      </Text>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default TradingView\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  ArrowForwardIcon,\r\n  Box,\r\n  Button,\r\n  Radio,\r\n  Flex,\r\n  Heading,\r\n  Text,\r\n  ButtonMenu,\r\n  ButtonMenuItem,\r\n} from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { HistoryFilter } from 'state/types'\r\nimport { setHistoryFilter, setHistoryPaneState } from 'state/predictions'\r\nimport { useGetHistoryFilter, useGetIsFetchingHistory } from 'state/predictions/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\n\r\nconst Filter = styled.label`\r\n  align-items: center;\r\n  cursor: pointer;\r\n  display: inline-flex;\r\n  margin-right: 16px;\r\n`\r\n\r\nconst StyledHeader = styled(Box)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n  flex: none;\r\n  padding: 16px;\r\n`\r\n\r\nconst ButtonMenuContainer = styled.div`\r\n  margin-bottom: 16px;\r\n  width: 100%;\r\n  & > div {\r\n    width: 100%;\r\n  }\r\n\r\n  & button {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\ninterface HeaderProps {\r\n  activeTab: HistoryTabs\r\n  setActiveTab: (value: HistoryTabs) => void\r\n}\r\n\r\nexport enum HistoryTabs {\r\n  ROUNDS,\r\n  PNL,\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = ({ activeTab, setActiveTab }) => {\r\n  const historyFilter = useGetHistoryFilter()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleClick = () => {\r\n    dispatch(setHistoryPaneState(false))\r\n  }\r\n\r\n  const handleChange = (newFilter: HistoryFilter) => async () => {\r\n    if (newFilter !== historyFilter) {\r\n      dispatch(setHistoryFilter(newFilter))\r\n    }\r\n  }\r\n\r\n  const switchTab = async (tabIndex: number) => {\r\n    setActiveTab(tabIndex)\r\n    await handleChange(HistoryFilter.ALL)()\r\n  }\r\n\r\n  return (\r\n    <StyledHeader>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n        <Heading as=\"h3\" size=\"md\">\r\n          {t('History')}\r\n        </Heading>\r\n        <Button onClick={handleClick} variant=\"text\" endIcon={<ArrowForwardIcon color=\"primary\" />} px=\"0\">\r\n          {t('Close')}\r\n        </Button>\r\n      </Flex>\r\n      <ButtonMenuContainer>\r\n        <ButtonMenu activeIndex={activeTab} scale=\"sm\" variant=\"subtle\" onItemClick={switchTab}>\r\n          <ButtonMenuItem>{t('Rounds')}</ButtonMenuItem>\r\n          <ButtonMenuItem>{t('PNL')}</ButtonMenuItem>\r\n        </ButtonMenu>\r\n      </ButtonMenuContainer>\r\n      {activeTab === HistoryTabs.ROUNDS && (\r\n        <>\r\n          <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\r\n            {t('Filter')}\r\n          </Text>\r\n          <Flex alignItems=\"center\">\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.ALL}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.ALL)}\r\n              />\r\n              <Text ml=\"4px\">{t('All')}</Text>\r\n            </Filter>\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.COLLECTED}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.COLLECTED)}\r\n              />\r\n              <Text ml=\"4px\">{t('Collected')}</Text>\r\n            </Filter>\r\n            <Filter>\r\n              <Radio\r\n                scale=\"sm\"\r\n                checked={historyFilter === HistoryFilter.UNCOLLECTED}\r\n                disabled={isFetchingHistory || !account}\r\n                onChange={handleChange(HistoryFilter.UNCOLLECTED)}\r\n              />\r\n              <Text ml=\"4px\">{t('Uncollected')}</Text>\r\n            </Filter>\r\n          </Flex>\r\n        </>\r\n      )}\r\n    </StyledHeader>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import TradingViewChart from 'components/TradingView'\r\nimport React from 'react'\r\n\r\nconst TRADING_VIEW_COMPONENT_ID = 'tradingview_b239c'\r\n\r\nconst TradingView = () => {\r\n  return <TradingViewChart id={TRADING_VIEW_COMPONENT_ID} symbol=\"BINANCE:BNBUSDT\" />\r\n}\r\n\r\nexport default TradingView\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Card, CardBody, Heading } from '@pancakeswap/uikit'\r\n\r\ninterface NotificationProps {\r\n  title: string\r\n}\r\n\r\n// const BunnyDecoration = styled.div`\r\n//   position: absolute;\r\n//   top: -130px; // line up bunny at the top of the modal\r\n//   left: 0px;\r\n//   text-align: center;\r\n//   width: 100%;\r\n// `\r\n\r\nconst Wrapper = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  height: 100%;\r\n  justify-content: center;\r\n`\r\n\r\nconst CardWrapper = styled.div`\r\n  position: relative;\r\n  width: 320px;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -130px;\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n  z-index: 5;\r\n`\r\n\r\nconst Notification: React.FC<NotificationProps> = ({ title, children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <CardWrapper>\r\n        <BunnyDecoration>\r\n          <img src=\"/images/decorations/hiccup-bunny.png\" alt=\"bunny decoration\" height=\"121px\" width=\"130px\" />\r\n        </BunnyDecoration>\r\n        <Card>\r\n          <CardBody>\r\n            <Heading mb=\"24px\">{title}</Heading>\r\n            {children}\r\n          </CardBody>\r\n        </Card>\r\n      </CardWrapper>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\nimport { Button, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport Notification from './Notification'\r\n\r\nconst ErrorNotification = () => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n  return (\r\n    <Notification title={t('Error')}>\r\n      <Text as=\"p\" mb=\"24px\">\r\n        {t('This page cant be displayed right now due to an error. Please check back soon.')}\r\n      </Text>\r\n      <Button variant=\"primary\" width=\"100%\" onClick={handleOpenHistory}>\r\n        {t('Show History')}\r\n      </Button>\r\n    </Notification>\r\n  )\r\n}\r\n\r\nexport default ErrorNotification\r\n","import React from 'react'\r\nimport { Box, Button, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport Notification from './Notification'\r\n\r\nconst PauseNotification = () => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n\r\n  const handleOpenHistory = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  return (\r\n    <Notification title={t('Markets Paused')}>\r\n      <Box mb=\"24px\">\r\n        <Text as=\"p\">{t('Prediction markets have been paused due to an error.')}</Text>\r\n        <Text as=\"p\">{t('All open positions have been canceled.')}</Text>\r\n        <Text as=\"p\">\r\n          {t('You can reclaim any funds entered into existing positions via the History tab on this page.')}\r\n        </Text>\r\n      </Box>\r\n      <Button variant=\"primary\" width=\"100%\" onClick={handleOpenHistory}>\r\n        {t('Show History')}\r\n      </Button>\r\n    </Notification>\r\n  )\r\n}\r\n\r\nexport default PauseNotification\r\n","import { Bet, BetPosition } from 'state/types'\r\nimport { formatNumber } from 'utils/formatBalance'\r\n\r\nexport const formatUsd = (usd: number) => {\r\n  return `$${formatNumber(usd || 0, 3, 3)}`\r\n}\r\n\r\nexport const formatBnb = (bnb: number) => {\r\n  return bnb ? bnb.toLocaleString(undefined, { minimumFractionDigits: 3, maximumFractionDigits: 3 }) : '0'\r\n}\r\n\r\nexport const getMultiplier = (total: number, amount: number) => {\r\n  if (total === 0 || amount === 0) {\r\n    return 0\r\n  }\r\n\r\n  return total / amount\r\n}\r\n\r\n/**\r\n * Calculates the total payout given a bet\r\n */\r\nexport const getPayout = (bet: Bet, rewardRate = 1) => {\r\n  if (!bet || !bet.round) {\r\n    return 0\r\n  }\r\n\r\n  const { bullAmount, bearAmount, totalAmount } = bet.round\r\n  const multiplier = getMultiplier(totalAmount, bet.position === BetPosition.BULL ? bullAmount : bearAmount)\r\n  return bet.amount * multiplier * rewardRate\r\n}\r\n\r\nexport const getNetPayout = (bet: Bet, rewardRate = 1): number => {\r\n  if (!bet || !bet.round) {\r\n    return 0\r\n  }\r\n\r\n  const payout = getPayout(bet, rewardRate)\r\n  return payout - bet.amount\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  ModalTitle,\r\n  ModalHeader,\r\n  InjectedModalProps,\r\n  Button,\r\n  AutoRenewIcon,\r\n  TrophyGoldIcon,\r\n  Text,\r\n  Flex,\r\n  Heading,\r\n  Box,\r\n  ModalCloseButton,\r\n  Skeleton,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { REWARD_RATE } from 'state/predictions/config'\r\nimport { fetchNodeHistory, markAsCollected } from 'state/predictions'\r\nimport { Bet } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useBNBBusdPrice } from 'hooks/useBUSDPrice'\r\nimport useToast from 'hooks/useToast'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { useGetHistory, useGetIsFetchingHistory } from 'state/predictions/hooks'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport { formatNumber } from 'utils/formatBalance'\r\nimport { logError } from 'utils/sentry'\r\nimport { getPayout } from './History/helpers'\r\n\r\ninterface CollectRoundWinningsModalProps extends InjectedModalProps {\r\n  onSuccess?: () => Promise<void>\r\n}\r\n\r\nconst Modal = styled(ModalContainer)`\r\n  overflow: visible;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -116px; // line up bunny at the top of the modal\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n`\r\n\r\ninterface ClaimableRounds {\r\n  epochs: number[]\r\n  total: number\r\n}\r\n\r\nconst calculateClaimableRounds = (history): ClaimableRounds => {\r\n  if (!history) {\r\n    return { epochs: [], total: 0 }\r\n  }\r\n\r\n  return history.reduce(\r\n    (accum: ClaimableRounds, bet: Bet) => {\r\n      if (!bet.claimed && bet.position === bet.round.position) {\r\n        const betPayout = getPayout(bet, REWARD_RATE)\r\n        return {\r\n          ...accum,\r\n          epochs: [...accum.epochs, bet.round.epoch],\r\n          total: accum.total + betPayout,\r\n        }\r\n      }\r\n\r\n      return accum\r\n    },\r\n    { epochs: [], total: 0 },\r\n  )\r\n}\r\n\r\nconst CollectRoundWinningsModal: React.FC<CollectRoundWinningsModalProps> = ({ onDismiss, onSuccess }) => {\r\n  const [isPendingTx, setIsPendingTx] = useState(false)\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const predictionsContract = usePredictionsContract()\r\n  const bnbBusdPrice = useBNBBusdPrice()\r\n  const dispatch = useAppDispatch()\r\n  const isLoadingHistory = useGetIsFetchingHistory()\r\n  const history = useGetHistory()\r\n\r\n  const { epochs, total } = calculateClaimableRounds(history)\r\n  const totalBnb = multiplyPriceByAmount(bnbBusdPrice, total)\r\n\r\n  useEffect(() => {\r\n    // Fetch history if they have not opened the history pane yet\r\n    if (history.length === 0) {\r\n      dispatch(fetchNodeHistory({ account }))\r\n    }\r\n  }, [account, history, dispatch])\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      const tx = await callWithGasPrice(predictionsContract, 'claim', [epochs])\r\n      setIsPendingTx(true)\r\n      const receipt = await tx.wait()\r\n\r\n      // Immediately mark rounds as claimed\r\n      dispatch(\r\n        markAsCollected(\r\n          epochs.reduce((accum, epoch) => {\r\n            return { ...accum, [epoch]: true }\r\n          }, {}),\r\n        ),\r\n      )\r\n\r\n      if (onSuccess) {\r\n        await onSuccess()\r\n      }\r\n\r\n      onDismiss()\r\n      setIsPendingTx(false)\r\n      toastSuccess(\r\n        t('Winnings collected!'),\r\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n          {t('Your prizes have been sent to your wallet')}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n    } catch (error) {\r\n      console.error('Unable to claim winnings', error)\r\n      logError(error)\r\n      toastError(\r\n        t('Error'),\r\n        error?.data?.message || t('Please try again. Confirm the transaction and make sure you are paying enough gas!'),\r\n      )\r\n    } finally {\r\n      setIsPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal minWidth=\"288px\" position=\"relative\" mt=\"124px\">\r\n      <BunnyDecoration>\r\n        <img src=\"/images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\r\n      </BunnyDecoration>\r\n      <ModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Collect Winnings')}</Heading>\r\n        </ModalTitle>\r\n        <ModalCloseButton onDismiss={onDismiss} />\r\n      </ModalHeader>\r\n      <ModalBody p=\"24px\">\r\n        <TrophyGoldIcon width=\"96px\" mx=\"auto\" mb=\"24px\" />\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text>{t('Collecting')}</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text>{`${formatNumber(total, 0, 4)} BNB`}</Text>\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {`~$${totalBnb.toFixed(2)}`}\r\n            </Text>\r\n          </Box>\r\n        </Flex>\r\n        <Flex alignItems=\"start\" justifyContent=\"center\" mb=\"24px\">\r\n          {isLoadingHistory ? (\r\n            <Skeleton height=\"21\" width=\"140px\" />\r\n          ) : (\r\n            <Text color=\"textSubtle\" fontSize=\"14px\">\r\n              {epochs.length === 1\r\n                ? t('From round %round%', { round: epochs[0] })\r\n                : t('From rounds %rounds%', { rounds: epochs.join(', ') })}\r\n            </Text>\r\n          )}\r\n        </Flex>\r\n        <Button\r\n          width=\"100%\"\r\n          mb=\"8px\"\r\n          onClick={handleClick}\r\n          isLoading={isPendingTx || isLoadingHistory}\r\n          endIcon={isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        >\r\n          {t('Confirm')}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CollectRoundWinningsModal\r\n","import React from 'react'\r\nimport { Button, ButtonProps, useModal } from '@pancakeswap/uikit'\r\nimport CollectRoundWinningsModal from './CollectRoundWinningsModal'\r\n\r\ninterface CollectWinningsButtonProps extends ButtonProps {\r\n  hasClaimed: boolean\r\n  onSuccess?: () => Promise<void>\r\n}\r\n\r\nconst CollectWinningsButton: React.FC<CollectWinningsButtonProps> = ({ hasClaimed, onSuccess, children, ...props }) => {\r\n  const [onPresentCollectWinningsModal] = useModal(<CollectRoundWinningsModal onSuccess={onSuccess} />, false)\r\n\r\n  return (\r\n    <Button onClick={onPresentCollectWinningsModal} disabled={hasClaimed} {...props}>\r\n      {children}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsButton\r\n","import React, { ReactNode, useState } from 'react'\r\nimport { AutoRenewIcon, Button, ButtonProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport useToast from 'hooks/useToast'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\n\r\ninterface ReclaimPositionButtonProps extends ButtonProps {\r\n  epoch: number\r\n  onSuccess?: () => Promise<void>\r\n  children?: ReactNode\r\n}\r\n\r\nconst ReclaimPositionButton: React.FC<ReclaimPositionButtonProps> = ({ epoch, onSuccess, children, ...props }) => {\r\n  const [isPendingTx, setIsPendingTx] = useState(false)\r\n  const { t } = useTranslation()\r\n  const predictionsContract = usePredictionsContract()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const { toastSuccess, toastError } = useToast()\r\n\r\n  const handleReclaim = async () => {\r\n    const tx = await callWithGasPrice(predictionsContract, 'claim', [[epoch]])\r\n    setIsPendingTx(true)\r\n\r\n    const receipt = await tx.wait()\r\n    if (receipt.status) {\r\n      if (onSuccess) {\r\n        await onSuccess()\r\n      }\r\n      setIsPendingTx(false)\r\n      toastSuccess(t('Position reclaimed!'), <ToastDescriptionWithTx txHash={receipt.transactionHash} />)\r\n    } else {\r\n      setIsPendingTx(false)\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleReclaim}\r\n      isLoading={isPendingTx}\r\n      endIcon={isPendingTx ? <AutoRenewIcon spin color=\"white\" /> : null}\r\n      {...props}\r\n    >\r\n      {children || t('Reclaim Position')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ReclaimPositionButton\r\n","import { BigNumber, ethers } from 'ethers'\r\nimport { BetPosition, NodeRound } from 'state/types'\r\nimport { formatBigNumberToFixed } from 'utils/formatBalance'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\n\r\nconst MIN_PRICE_USD_DISPLAYED = BigNumber.from(100000)\r\nconst MIN_PRICE_BNB_DISPLAYED = BigNumber.from('1000000000000000')\r\nconst DISPLAYED_DECIMALS = 3\r\n\r\ntype formatPriceDifferenceProps = {\r\n  price?: BigNumber\r\n  minPriceDisplayed: BigNumber\r\n  unitPrefix: string\r\n  decimals: number\r\n}\r\n\r\nconst formatPriceDifference = ({\r\n  price = BigNumber.from(0),\r\n  minPriceDisplayed,\r\n  unitPrefix,\r\n  decimals,\r\n}: formatPriceDifferenceProps) => {\r\n  const sign = price.isNegative() ? BigNumber.from(-1) : BigNumber.from(1)\r\n\r\n  if (price.abs().lt(minPriceDisplayed)) {\r\n    const signedPriceToFormat = minPriceDisplayed.mul(sign)\r\n    return `<${unitPrefix}${formatBigNumberToFixed(signedPriceToFormat, DISPLAYED_DECIMALS, decimals)}`\r\n  }\r\n\r\n  return `${unitPrefix}${formatBigNumberToFixed(price, DISPLAYED_DECIMALS, decimals)}`\r\n}\r\n\r\nexport const formatUsdv2 = (usd: BigNumber) => {\r\n  return formatPriceDifference({ price: usd, minPriceDisplayed: MIN_PRICE_USD_DISPLAYED, unitPrefix: '$', decimals: 8 })\r\n}\r\n\r\nexport const formatBnbv2 = (bnb: BigNumber) => {\r\n  return formatPriceDifference({ price: bnb, minPriceDisplayed: MIN_PRICE_BNB_DISPLAYED, unitPrefix: '', decimals: 18 })\r\n}\r\n\r\nexport const padTime = (num: number) => num.toString().padStart(2, '0')\r\n\r\nexport const formatRoundTime = (secondsBetweenBlocks: number) => {\r\n  const { hours, minutes, seconds } = getTimePeriods(secondsBetweenBlocks)\r\n  const minutesSeconds = `${padTime(minutes)}:${padTime(seconds)}`\r\n\r\n  if (hours > 0) {\r\n    return `${padTime(hours)}:${minutesSeconds}`\r\n  }\r\n\r\n  return minutesSeconds\r\n}\r\n\r\nexport const getHasRoundFailed = (round: NodeRound, buffer: number) => {\r\n  const closeTimestampMs = (round.closeTimestamp + buffer) * 1000\r\n  const now = Date.now()\r\n\r\n  if (closeTimestampMs !== null && now > closeTimestampMs && !round.oracleCalled) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport const getMultiplierV2 = (total: ethers.BigNumber, amount: ethers.BigNumber) => {\r\n  if (!total) {\r\n    return ethers.FixedNumber.from(0)\r\n  }\r\n\r\n  if (total.eq(0) || amount.eq(0)) {\r\n    return ethers.FixedNumber.from(0)\r\n  }\r\n\r\n  const rewardAmountFixed = ethers.FixedNumber.from(total)\r\n  const multiplierAmountFixed = ethers.FixedNumber.from(amount)\r\n\r\n  return rewardAmountFixed.divUnsafe(multiplierAmountFixed)\r\n}\r\n\r\nexport const getPriceDifference = (price: ethers.BigNumber, lockPrice: ethers.BigNumber) => {\r\n  if (!price || !lockPrice) {\r\n    return ethers.BigNumber.from(0)\r\n  }\r\n\r\n  return price.sub(lockPrice)\r\n}\r\n\r\nexport const getRoundPosition = (lockPrice: ethers.BigNumber, closePrice: ethers.BigNumber) => {\r\n  if (!closePrice) {\r\n    return null\r\n  }\r\n\r\n  if (closePrice.eq(lockPrice)) {\r\n    return BetPosition.HOUSE\r\n  }\r\n\r\n  return closePrice.gt(lockPrice) ? BetPosition.BULL : BetPosition.BEAR\r\n}\r\n","import React, { ReactNode } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  ArrowUpIcon,\r\n  ArrowDownIcon,\r\n  Flex,\r\n  FlexProps,\r\n  Text,\r\n  useTooltip,\r\n  TooltipText,\r\n  InfoIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { BetPosition } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface TagProps extends FlexProps {\r\n  bg?: string\r\n  startIcon?: ReactNode\r\n}\r\n\r\nconst StyledTag = styled(Flex)<{ bg: TagProps['bg'] }>`\r\n  background-color: ${({ bg, theme }) => theme.colors[bg]};\r\n  display: inline-flex;\r\n`\r\n\r\nexport const Tag: React.FC<TagProps> = ({ bg = 'success', startIcon, children, onClick, ...props }) => {\r\n  const icon = startIcon || <ArrowUpIcon color=\"white\" />\r\n\r\n  return (\r\n    <StyledTag\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      borderRadius=\"4px\"\r\n      bg={bg}\r\n      py=\"4px\"\r\n      px=\"8px\"\r\n      onClick={onClick}\r\n      style={{ cursor: onClick ? 'pointer' : 'normal' }}\r\n      {...props}\r\n    >\r\n      {icon}\r\n      <Text textTransform=\"uppercase\" color=\"white\" ml=\"4px\">\r\n        {children}\r\n      </Text>\r\n    </StyledTag>\r\n  )\r\n}\r\n\r\ninterface PositionTagProps extends FlexProps {\r\n  betPosition: BetPosition\r\n}\r\n\r\nconst PositionTag: React.FC<PositionTagProps> = ({ betPosition, children, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const isUpPosition = betPosition === BetPosition.BULL\r\n  const icon = isUpPosition ? <ArrowUpIcon color=\"white\" /> : <ArrowDownIcon color=\"white\" />\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Neither side wins this round')}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'The Locked Price & Closed Price are exactly the same (within 8 decimals), so neither side wins. All funds entered into UP and DOWN positions will go to the weekly CAKE burn.',\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'right' },\r\n  )\r\n\r\n  if (betPosition === BetPosition.HOUSE) {\r\n    return (\r\n      <>\r\n        {tooltipVisible && tooltip}\r\n        <TooltipText ref={targetRef} color=\"secondary\" fontWeight=\"300\" textTransform=\"uppercase\">\r\n          <Flex alignItems=\"center\">\r\n            {t('To Burn')}\r\n            <InfoIcon width=\"16px\" ml=\"4px\" color=\"secondary\" />\r\n          </Flex>\r\n        </TooltipText>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Tag bg={isUpPosition ? 'success' : 'failure'} startIcon={icon} {...props}>\r\n      {children}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nexport default PositionTag\r\n","import React from 'react'\r\nimport styled, { DefaultTheme } from 'styled-components'\r\nimport { ethers } from 'ethers'\r\nimport { Box, Flex, FlexProps, Skeleton, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BetPosition, NodeRound, Round } from 'state/types'\r\nimport { formatUsdv2, formatBnbv2, getRoundPosition, getPriceDifference } from '../../helpers'\r\nimport { formatBnb, formatUsd } from '../History/helpers'\r\nimport PositionTag from '../PositionTag'\r\n\r\n// PrizePoolRow\r\ninterface PrizePoolRowProps extends FlexProps {\r\n  totalAmount: NodeRound['totalAmount']\r\n}\r\n\r\nconst getPrizePoolAmount = (totalAmount: PrizePoolRowProps['totalAmount']) => {\r\n  if (!totalAmount) {\r\n    return '0'\r\n  }\r\n\r\n  return formatBnbv2(totalAmount)\r\n}\r\n\r\nconst Row = ({ children, ...props }) => {\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\" {...props}>\r\n      {children}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport const PrizePoolRow: React.FC<PrizePoolRowProps> = ({ totalAmount, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text bold>{t('Prize Pool')}:</Text>\r\n      <Text bold>{`${getPrizePoolAmount(totalAmount)} BNB`}</Text>\r\n    </Row>\r\n  )\r\n}\r\n\r\n// Payout Row\r\ninterface PayoutRowProps extends FlexProps {\r\n  positionLabel: string\r\n  multiplier: number\r\n  amount: number\r\n}\r\n\r\nexport const PayoutRow: React.FC<PayoutRowProps> = ({ positionLabel, multiplier, amount, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const formattedMultiplier = `${multiplier.toLocaleString(undefined, { maximumFractionDigits: 2 })}x`\r\n\r\n  return (\r\n    <Row height=\"18px\" {...props}>\r\n      <Text fontSize=\"12px\" textTransform=\"uppercase\">\r\n        {positionLabel}:\r\n      </Text>\r\n      <Flex alignItems=\"center\">\r\n        <Text fontSize=\"12px\" lineHeight=\"18px\" bold>\r\n          {t('%multiplier% Payout', { multiplier: formattedMultiplier })}\r\n        </Text>\r\n        <Text mx=\"4px\">|</Text>\r\n        <Text fontSize=\"12px\" lineHeight=\"18px\">{`${formatBnb(amount)} BNB`}</Text>\r\n      </Flex>\r\n    </Row>\r\n  )\r\n}\r\n\r\ninterface LockPriceRowProps extends FlexProps {\r\n  lockPrice: NodeRound['lockPrice']\r\n}\r\n\r\nexport const LockPriceRow: React.FC<LockPriceRowProps> = ({ lockPrice, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text fontSize=\"14px\">{t('Locked Price')}:</Text>\r\n      <Text fontSize=\"14px\">{formatUsdv2(lockPrice)}</Text>\r\n    </Row>\r\n  )\r\n}\r\n\r\n// RoundResultBox\r\ninterface RoundResultBoxProps {\r\n  betPosition?: BetPosition\r\n  isNext?: boolean\r\n  isLive?: boolean\r\n  hasEntered?: boolean\r\n}\r\n\r\nconst getBackgroundColor = ({\r\n  theme,\r\n  betPosition,\r\n  isNext,\r\n  isLive,\r\n  hasEntered,\r\n}: RoundResultBoxProps & { theme: DefaultTheme }) => {\r\n  if (isNext) {\r\n    return 'linear-gradient(180deg, #53DEE9 0%, #7645D9 100%)'\r\n  }\r\n\r\n  if (hasEntered || isLive) {\r\n    return theme.colors.secondary\r\n  }\r\n\r\n  switch (betPosition) {\r\n    case BetPosition.BULL:\r\n      return theme.colors.success\r\n    case BetPosition.BEAR:\r\n      return theme.colors.failure\r\n    case BetPosition.HOUSE:\r\n      return theme.colors.textDisabled\r\n    default:\r\n      return theme.colors.cardBorder\r\n  }\r\n}\r\n\r\nconst Background = styled(Box)<RoundResultBoxProps>`\r\n  background: ${getBackgroundColor};\r\n  border-radius: 16px;\r\n  padding: 2px;\r\n`\r\n\r\nconst StyledRoundResultBox = styled.div`\r\n  background: ${({ theme }) => theme.card.background};\r\n  border-radius: 14px;\r\n  padding: 16px;\r\n`\r\n\r\nexport const RoundResultBox: React.FC<RoundResultBoxProps> = ({\r\n  isNext = false,\r\n  hasEntered = false,\r\n  isLive = false,\r\n  children,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <Background isNext={isNext} hasEntered={hasEntered} isLive={isLive} {...props}>\r\n      <StyledRoundResultBox>{children}</StyledRoundResultBox>\r\n    </Background>\r\n  )\r\n}\r\n\r\ninterface RoundPriceProps {\r\n  lockPrice: ethers.BigNumber\r\n  closePrice: ethers.BigNumber\r\n}\r\n\r\nexport const RoundPrice: React.FC<RoundPriceProps> = ({ lockPrice, closePrice }) => {\r\n  const betPosition = getRoundPosition(lockPrice, closePrice)\r\n  const priceDifference = getPriceDifference(closePrice, lockPrice)\r\n\r\n  const getTextColor = () => {\r\n    switch (betPosition) {\r\n      case BetPosition.BULL:\r\n        return 'success'\r\n      case BetPosition.BEAR:\r\n        return 'failure'\r\n      case BetPosition.HOUSE:\r\n      default:\r\n        return 'textDisabled'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n      {closePrice ? (\r\n        <Text color={getTextColor()} bold fontSize=\"24px\">\r\n          {formatUsdv2(closePrice)}\r\n        </Text>\r\n      ) : (\r\n        <Skeleton height=\"34px\" my=\"1px\" />\r\n      )}\r\n      <PositionTag betPosition={betPosition}>{formatUsdv2(priceDifference)}</PositionTag>\r\n    </Flex>\r\n  )\r\n}\r\n\r\n/**\r\n * TODO: Remove\r\n *\r\n * This is a temporary function until we consolidate the data coming from the graph versus the node\r\n */\r\ninterface PrizePoolHistoryRowProps extends FlexProps {\r\n  totalAmount: number\r\n}\r\n\r\nconst getPrizePoolAmountHistory = (totalAmount: PrizePoolHistoryRowProps['totalAmount']) => {\r\n  if (!totalAmount) {\r\n    return '0'\r\n  }\r\n\r\n  return formatBnb(totalAmount)\r\n}\r\n\r\nexport const PrizePoolHistoryRow: React.FC<PrizePoolHistoryRowProps> = ({ totalAmount, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text bold>{t('Prize Pool')}:</Text>\r\n      <Text bold>{`${getPrizePoolAmountHistory(totalAmount)} BNB`}</Text>\r\n    </Row>\r\n  )\r\n}\r\n\r\ninterface LockPriceHistoryRowProps extends FlexProps {\r\n  lockPrice: Round['lockPrice']\r\n}\r\n\r\nexport const LockPriceHistoryRow: React.FC<LockPriceHistoryRowProps> = ({ lockPrice, ...props }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Row {...props}>\r\n      <Text fontSize=\"14px\">{t('Locked Price')}:</Text>\r\n      <Text fontSize=\"14px\">{formatUsd(lockPrice)}</Text>\r\n    </Row>\r\n  )\r\n}\r\n/**\r\n * END TEMPORARY COMPONENTS\r\n */\r\n","import React from 'react'\r\nimport { BoxProps, Text } from '@pancakeswap/uikit'\r\nimport { NodeRound } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getRoundPosition } from '../../helpers'\r\nimport { LockPriceRow, PrizePoolRow, RoundPrice, RoundResultBox } from './styles'\r\n\r\ninterface RoundResultProps extends BoxProps {\r\n  round: NodeRound\r\n  hasFailed?: boolean\r\n}\r\n\r\nconst RoundResult: React.FC<RoundResultProps> = ({ round, hasFailed = false, children, ...props }) => {\r\n  const { lockPrice, closePrice, totalAmount } = round\r\n  const betPosition = getRoundPosition(lockPrice, closePrice)\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <RoundResultBox betPosition={betPosition} {...props}>\r\n      <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n        {t('Closed Price')}\r\n      </Text>\r\n      {hasFailed ? (\r\n        <Text bold textTransform=\"uppercase\" color=\"textDisabled\" mb=\"16px\" fontSize=\"24px\">\r\n          {t('Canceled')}\r\n        </Text>\r\n      ) : (\r\n        <RoundPrice lockPrice={lockPrice} closePrice={closePrice} />\r\n      )}\r\n      {lockPrice && <LockPriceRow lockPrice={lockPrice} />}\r\n      <PrizePoolRow totalAmount={totalAmount} />\r\n      {children}\r\n    </RoundResultBox>\r\n  )\r\n}\r\n\r\nexport default RoundResult\r\n","import React from 'react'\r\nimport { BoxProps, Flex, Text } from '@pancakeswap/uikit'\r\nimport { BetPosition, Round } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatUsd } from '../History/helpers'\r\nimport PositionTag from '../PositionTag'\r\nimport { LockPriceHistoryRow, PrizePoolHistoryRow, RoundResultBox } from './styles'\r\n\r\ninterface RoundResultProps extends BoxProps {\r\n  round: Round\r\n}\r\n\r\nconst RoundResult: React.FC<RoundResultProps> = ({ round, children, ...props }) => {\r\n  const { lockPrice, closePrice, totalAmount } = round\r\n  const betPosition = closePrice > lockPrice ? BetPosition.BULL : BetPosition.BEAR\r\n  const isPositionUp = betPosition === BetPosition.BULL\r\n  const { t } = useTranslation()\r\n  const priceDifference = closePrice - lockPrice\r\n\r\n  return (\r\n    <RoundResultBox betPosition={betPosition} {...props}>\r\n      <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n        {t('Closed Price')}\r\n      </Text>\r\n      {round.failed ? (\r\n        <Text bold textTransform=\"uppercase\" color=\"textDisabled\" mb=\"16px\" fontSize=\"24px\">\r\n          {t('Canceled')}\r\n        </Text>\r\n      ) : (\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text color={isPositionUp ? 'success' : 'failure'} bold fontSize=\"24px\">\r\n            {formatUsd(closePrice)}\r\n          </Text>\r\n          <PositionTag betPosition={betPosition}>{formatUsd(priceDifference)}</PositionTag>\r\n        </Flex>\r\n      )}\r\n      {lockPrice && <LockPriceHistoryRow lockPrice={lockPrice} />}\r\n      <PrizePoolHistoryRow totalAmount={totalAmount} />\r\n      {children}\r\n    </RoundResultBox>\r\n  )\r\n}\r\n\r\nexport default RoundResult\r\n","import { useEffect, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { getPredictionsContract } from 'utils/contractHelpers'\r\n\r\nconst useIsRefundable = (epoch: number) => {\r\n  const [isRefundable, setIsRefundable] = useState(false)\r\n  const { account } = useWeb3React()\r\n\r\n  useEffect(() => {\r\n    const fetchRefundableStatus = async () => {\r\n      const predictionsContract = getPredictionsContract()\r\n      const refundable = await predictionsContract.refundable(epoch, account)\r\n\r\n      if (refundable) {\r\n        // Double check they have not already claimed\r\n        const ledger = await predictionsContract.ledger(epoch, account)\r\n        setIsRefundable(ledger.claimed === false)\r\n      } else {\r\n        setIsRefundable(false)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchRefundableStatus()\r\n    }\r\n  }, [account, epoch, setIsRefundable])\r\n\r\n  return { isRefundable, setIsRefundable }\r\n}\r\n\r\nexport default useIsRefundable\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Box, Flex, Heading, Text, PrizeIcon, BlockIcon, LinkExternal, useTooltip, InfoIcon } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useAppDispatch } from 'state'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { REWARD_RATE } from 'state/predictions/config'\r\nimport { Bet, BetPosition } from 'state/types'\r\nimport { fetchLedgerData, markAsCollected } from 'state/predictions'\r\nimport { Result } from 'state/predictions/helpers'\r\nimport { useGetIsClaimable } from 'state/predictions/hooks'\r\nimport { useBNBBusdPrice } from 'hooks/useBUSDPrice'\r\nimport { getBscScanLink } from 'utils'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport useIsRefundable from '../../hooks/useIsRefundable'\r\nimport { formatBnb, getNetPayout } from './helpers'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\nimport PositionTag from '../PositionTag'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\n\r\ninterface BetResultProps {\r\n  bet: Bet\r\n  result: Result\r\n}\r\n\r\nconst StyledBetResult = styled(Box)`\r\n  border: 2px solid ${({ theme }) => theme.colors.textDisabled};\r\n  border-radius: 16px;\r\n  margin-bottom: 24px;\r\n  padding: 16px;\r\n`\r\n\r\nconst Divider = styled.hr`\r\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n`\r\n\r\nconst BetResult: React.FC<BetResultProps> = ({ bet, result }) => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const { isRefundable } = useIsRefundable(bet.round.epoch)\r\n  const canClaim = useGetIsClaimable(bet.round.epoch)\r\n  const bnbBusdPrice = useBNBBusdPrice()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <Text as=\"p\">{t('Includes your original position and your winnings, minus the %fee% fee.', { fee: '3%' })}</Text>,\r\n    { placement: 'auto' },\r\n  )\r\n\r\n  const isWinner = result === Result.WIN\r\n\r\n  // Winners get the payout, otherwise the claim what they put it if it was canceled\r\n  const payout = isWinner ? getNetPayout(bet, REWARD_RATE) : bet.amount\r\n  const totalPayout = multiplyPriceByAmount(bnbBusdPrice, payout)\r\n  const returned = payout + bet.amount\r\n\r\n  const getHeaderColor = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'warning'\r\n      case Result.LOSE:\r\n        return 'textSubtle'\r\n      case Result.CANCELED:\r\n        return 'textDisabled'\r\n      case Result.HOUSE:\r\n        return 'textDisabled'\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const getHeaderText = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return t('Win')\r\n      case Result.LOSE:\r\n        return t('Lose')\r\n      case Result.CANCELED:\r\n        return t('Canceled')\r\n      case Result.HOUSE:\r\n        return t('To Burn')\r\n      default:\r\n        return ''\r\n    }\r\n  }\r\n\r\n  const getHeaderIcon = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return <PrizeIcon color={getHeaderColor()} />\r\n      case Result.LOSE:\r\n      case Result.CANCELED:\r\n        return <BlockIcon color={getHeaderColor()} />\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  const getResultColor = () => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'success'\r\n      case Result.LOSE:\r\n        return 'failure'\r\n      case Result.CANCELED:\r\n      case Result.HOUSE:\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const handleSuccess = async () => {\r\n    // We have to mark the bet as claimed immediately because it does not update fast enough\r\n    dispatch(markAsCollected({ [bet.round.epoch]: true }))\r\n    dispatch(fetchLedgerData({ account, epochs: [bet.round.epoch] }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Heading>{t('Your History')}</Heading>\r\n        <Flex alignItems=\"center\">\r\n          <Heading as=\"h3\" color={getHeaderColor()} textTransform=\"uppercase\" bold mr=\"4px\">\r\n            {getHeaderText()}\r\n          </Heading>\r\n          {getHeaderIcon()}\r\n        </Flex>\r\n      </Flex>\r\n      <StyledBetResult>\r\n        {result === Result.WIN && !canClaim && (\r\n          <CollectWinningsButton hasClaimed={!canClaim} width=\"100%\" mb=\"16px\" onSuccess={handleSuccess}>\r\n            {bet.claimed ? t('Already Collected') : t('Collect Winnings')}\r\n          </CollectWinningsButton>\r\n        )}\r\n        {bet.claimed && bet.claimedHash && (\r\n          <Flex justifyContent=\"center\">\r\n            <LinkExternal href={getBscScanLink(bet.claimedHash, 'transaction')} mb=\"16px\">\r\n              {t('View on BscScan')}\r\n            </LinkExternal>\r\n          </Flex>\r\n        )}\r\n        {result === Result.CANCELED && isRefundable && (\r\n          <ReclaimPositionButton epoch={bet.round.epoch} width=\"100%\" mb=\"16px\" />\r\n        )}\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text>{t('Your direction')}:</Text>\r\n          <PositionTag betPosition={bet.position}>\r\n            {bet.position === BetPosition.BULL ? t('Up') : t('Down')}\r\n          </PositionTag>\r\n        </Flex>\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text>{t('Your position')}</Text>\r\n          <Text>{`${formatBnb(bet.amount)} BNB`}</Text>\r\n        </Flex>\r\n        <Flex alignItems=\"start\" justifyContent=\"space-between\">\r\n          <Text bold>{isWinner ? t('Your winnings') : t('Your Result')}:</Text>\r\n          <Box style={{ textAlign: 'right' }}>\r\n            <Text bold color={getResultColor()}>{`${isWinner ? '+' : '-'}${formatBnb(payout)} BNB`}</Text>\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {`~$${totalPayout.toFixed(2)}`}\r\n            </Text>\r\n          </Box>\r\n        </Flex>\r\n        {isWinner && (\r\n          <>\r\n            <Divider />\r\n            <Flex alignItems=\"start\" justifyContent=\"space-between\">\r\n              <Text fontSize=\"14px\" color=\"textSubtle\">\r\n                {t('Amount to collect')}:\r\n              </Text>\r\n              <Flex justifyContent=\"end\">\r\n                <Text fontSize=\"14px\" color=\"textSubtle\">{`${formatBnb(returned)} BNB`}</Text>\r\n                <span ref={targetRef}>\r\n                  <InfoIcon color=\"textSubtle\" ml=\"4px\" />\r\n                </span>\r\n              </Flex>\r\n              {tooltipVisible && tooltip}\r\n            </Flex>\r\n          </>\r\n        )}\r\n      </StyledBetResult>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BetResult\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Bet } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBscScanLink } from 'utils'\r\nimport { Flex, Text, Link, Heading } from '@pancakeswap/uikit'\r\nimport { Result } from 'state/predictions/helpers'\r\nimport { PayoutRow, RoundResultHistory } from '../RoundResult'\r\nimport BetResult from './BetResult'\r\nimport { getMultiplier } from './helpers'\r\n\r\ninterface BetDetailsProps {\r\n  bet: Bet\r\n  result: Result\r\n}\r\n\r\nconst StyledBetDetails = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  border-bottom: 2px solid ${({ theme }) => theme.colors.cardBorder};\r\n  padding: 24px;\r\n`\r\n\r\nconst BetDetails: React.FC<BetDetailsProps> = ({ bet, result }) => {\r\n  const { t } = useTranslation()\r\n  const { totalAmount, bullAmount, bearAmount } = bet.round\r\n  const bullMultiplier = getMultiplier(totalAmount, bullAmount)\r\n  const bearMultiplier = getMultiplier(totalAmount, bearAmount)\r\n\r\n  return (\r\n    <StyledBetDetails>\r\n      {result === Result.CANCELED && (\r\n        <Text as=\"p\" color=\"failure\" mb=\"24px\">\r\n          {t(\r\n            'This round was automatically canceled due to an error. If you entered a position, please reclaim your funds below.',\r\n          )}\r\n        </Text>\r\n      )}\r\n      {result !== Result.LIVE && <BetResult bet={bet} result={result} />}\r\n      <Heading mb=\"8px\">{t('Round History')}</Heading>\r\n      <RoundResultHistory round={bet.round} mb=\"24px\">\r\n        <PayoutRow positionLabel={t('Up')} multiplier={bullMultiplier} amount={bullAmount} />\r\n        <PayoutRow positionLabel={t('Down')} multiplier={bearMultiplier} amount={bearAmount} />\r\n      </RoundResultHistory>\r\n      {bet.round.lockBlock && (\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text>{t('Opening Block')}</Text>\r\n          <Link href={getBscScanLink(bet.round.lockBlock, 'block')} external>\r\n            {bet.round.lockBlock}\r\n          </Link>\r\n        </Flex>\r\n      )}\r\n      {bet.round.closeBlock && (\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Text>{t('Closing Block')}</Text>\r\n          <Link href={getBscScanLink(bet.round.closeBlock, 'block')} external>\r\n            {bet.round.closeBlock}\r\n          </Link>\r\n        </Flex>\r\n      )}\r\n    </StyledBetDetails>\r\n  )\r\n}\r\n\r\nexport default BetDetails\r\n","import React, { useState } from 'react'\r\nimport {\r\n  Box,\r\n  ChevronDownIcon,\r\n  ChevronUpIcon,\r\n  Flex,\r\n  IconButton,\r\n  InfoIcon,\r\n  PlayCircleOutlineIcon,\r\n  Text,\r\n  useTooltip,\r\n  WaitIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport { useAppDispatch } from 'state'\r\nimport { Bet, PredictionStatus } from 'state/types'\r\nimport { REWARD_RATE } from 'state/predictions/config'\r\nimport { useGetCurrentEpoch, useGetIsClaimable, useGetPredictionsStatus } from 'state/predictions/hooks'\r\nimport { fetchLedgerData, markAsCollected } from 'state/predictions'\r\nimport { getRoundResult, Result } from 'state/predictions/helpers'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatBnb, getNetPayout } from './helpers'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\nimport BetDetails from './BetDetails'\r\n\r\ninterface BetProps {\r\n  bet: Bet\r\n}\r\n\r\nconst StyledBet = styled(Flex).attrs({ alignItems: 'center', p: '16px' })`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  border-bottom: 2px solid ${({ theme }) => theme.colors.cardBorder};\r\n  cursor: pointer;\r\n`\r\n\r\nconst YourResult = styled(Box)`\r\n  flex: 1;\r\n`\r\n\r\nconst HistoricalBet: React.FC<BetProps> = ({ bet }) => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const { amount, round } = bet\r\n  const { t } = useTranslation()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Neither side wins this round')}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'The Locked Price & Closed Price are exactly the same (within 8 decimals), so neither side wins. All funds entered into UP and DOWN positions will go to the weekly CAKE burn.',\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'right' },\r\n  )\r\n\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const status = useGetPredictionsStatus()\r\n  const canClaim = useGetIsClaimable(bet.round.epoch)\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const toggleOpen = () => setIsOpen(!isOpen)\r\n\r\n  const getRoundColor = (result) => {\r\n    switch (result) {\r\n      case Result.WIN:\r\n        return 'success'\r\n      case Result.LOSE:\r\n        return 'failure'\r\n      case Result.CANCELED:\r\n        return 'textDisabled'\r\n      case Result.HOUSE:\r\n        return 'textDisabled'\r\n      default:\r\n        return 'text'\r\n    }\r\n  }\r\n\r\n  const getRoundPrefix = (result) => {\r\n    if (result === Result.LOSE) {\r\n      return '-'\r\n    }\r\n\r\n    if (result === Result.WIN) {\r\n      return '+'\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n  const roundResult = getRoundResult(bet, currentEpoch)\r\n  const resultTextColor = getRoundColor(roundResult)\r\n  const resultTextPrefix = getRoundPrefix(roundResult)\r\n  const isOpenRound = round.epoch === currentEpoch\r\n  const isLiveRound = status === PredictionStatus.LIVE && round.epoch === currentEpoch - 1\r\n\r\n  // Winners get the payout, otherwise the claim what they put it if it was canceled\r\n  const payout = roundResult === Result.WIN ? getNetPayout(bet, REWARD_RATE) : amount\r\n\r\n  const renderBetLabel = () => {\r\n    if (isOpenRound) {\r\n      return (\r\n        <Flex alignItems=\"center\">\r\n          <WaitIcon color=\"primary\" mr=\"6px\" width=\"24px\" />\r\n          <Text color=\"primary\" bold>\r\n            {t('Starting Soon')}\r\n          </Text>\r\n        </Flex>\r\n      )\r\n    }\r\n\r\n    if (isLiveRound) {\r\n      return (\r\n        <Flex alignItems=\"center\">\r\n          <PlayCircleOutlineIcon color=\"secondary\" mr=\"6px\" width=\"24px\" />\r\n          <Text color=\"secondary\" bold>\r\n            {t('Live Now')}\r\n          </Text>\r\n        </Flex>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          {t('Your Result')}\r\n        </Text>\r\n        <Text bold color={resultTextColor} lineHeight={1}>\r\n          {roundResult === Result.CANCELED ? (\r\n            t('Canceled')\r\n          ) : roundResult === Result.HOUSE ? (\r\n            <>\r\n              {tooltipVisible && tooltip}\r\n              <Flex alignItems=\"center\" ref={targetRef}>\r\n                {t('To Burn')}\r\n                <InfoIcon width=\"16px\" ml=\"4px\" color=\"secondary\" />\r\n              </Flex>\r\n            </>\r\n          ) : (\r\n            `${resultTextPrefix}${formatBnb(payout)}`\r\n          )}\r\n        </Text>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const handleSuccess = async () => {\r\n    // We have to mark the bet as claimed immediately because it does not update fast enough\r\n    dispatch(markAsCollected({ [bet.round.epoch]: true }))\r\n    dispatch(fetchLedgerData({ account, epochs: [bet.round.epoch] }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <StyledBet onClick={toggleOpen} role=\"button\">\r\n        <Box width=\"48px\">\r\n          <Text textAlign=\"center\">\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {t('Round')}\r\n            </Text>\r\n            <Text bold lineHeight={1}>\r\n              {round.epoch.toLocaleString()}\r\n            </Text>\r\n          </Text>\r\n        </Box>\r\n        <YourResult px=\"24px\">{renderBetLabel()}</YourResult>\r\n        {roundResult === Result.WIN && canClaim && (\r\n          <CollectWinningsButton hasClaimed={!canClaim} onSuccess={handleSuccess} scale=\"sm\" mr=\"8px\">\r\n            {t('Collect')}\r\n          </CollectWinningsButton>\r\n        )}\r\n        {roundResult === Result.CANCELED && canClaim && (\r\n          <ReclaimPositionButton epoch={bet.round.epoch} scale=\"sm\" mr=\"8px\">\r\n            {t('Reclaim')}\r\n          </ReclaimPositionButton>\r\n        )}\r\n        {!isOpenRound && !isLiveRound && (\r\n          <IconButton variant=\"text\" scale=\"sm\">\r\n            {isOpen ? <ChevronUpIcon /> : <ChevronDownIcon />}\r\n          </IconButton>\r\n        )}\r\n      </StyledBet>\r\n      {isOpen && <BetDetails bet={bet} result={getRoundResult(bet, currentEpoch)} />}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HistoricalBet\r\n","import request, { gql } from 'graphql-request'\r\nimport flatten from 'lodash/flatten'\r\nimport { GRAPH_API_PREDICTION_V1 } from 'config/constants/endpoints'\r\n\r\nexport const getV1History = async (skip = 0, where = {}): Promise<Record<string, any>[]> => {\r\n  const response = await request(\r\n    GRAPH_API_PREDICTION_V1,\r\n    gql`\r\n      query getV1BetHistory($skip: Int!, $where: Bet_filter) {\r\n        bets(first: 1000, skip: $skip, where: $where, orderBy: createdAt, orderDirection: desc) {\r\n          hash\r\n          amount\r\n          position\r\n          claimed\r\n          claimedAmount\r\n          claimedHash\r\n          round {\r\n            epoch\r\n            position\r\n            failed\r\n            totalAmount\r\n            lockPrice\r\n            closePrice\r\n            totalBets\r\n            totalAmount\r\n          }\r\n        }\r\n      }\r\n    `,\r\n    { skip, where },\r\n  )\r\n  return response.bets\r\n}\r\n\r\nexport const getAllV1History = (where = {}): Promise<Record<string, any>[]> => {\r\n  return new Promise((resolve, reject) => {\r\n    const bets = {}\r\n\r\n    const getHistoryChunk = async (skip: number) => {\r\n      try {\r\n        const betHistory = await getV1History(skip, where)\r\n        bets[skip] = betHistory\r\n\r\n        if (betHistory.length === 0) {\r\n          resolve(flatten(Object.values(bets)))\r\n        } else {\r\n          getHistoryChunk(skip + 1000)\r\n        }\r\n      } catch (error) {\r\n        reject(error)\r\n      }\r\n    }\r\n\r\n    getHistoryChunk(0)\r\n  })\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport {\r\n  ModalContainer,\r\n  ModalBody,\r\n  ModalTitle,\r\n  ModalHeader,\r\n  InjectedModalProps,\r\n  Text,\r\n  Heading,\r\n  ModalCloseButton,\r\n  Button,\r\n  AutoRenewIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getAllV1History } from './helpers'\r\n\r\nconst Modal = styled(ModalContainer)`\r\n  overflow: visible;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -116px; // line up bunny at the top of the modal\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n`\r\n\r\nconst CollectRoundWinningsModal: React.FC<InjectedModalProps> = ({ onDismiss }) => {\r\n  const [isFetching, setIsFetching] = useState(false)\r\n  const [history, setHistory] = useState([])\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleClick = () => {\r\n    const header = [\r\n      'Round',\r\n      'Result',\r\n      'Your Position',\r\n      'Bet Amount',\r\n      'Transaction',\r\n      'Claimed Transaction',\r\n      'Lock Price',\r\n      'Close Price',\r\n      'Total Bets',\r\n      'Total Amount',\r\n      'Round Failed',\r\n    ].join(',')\r\n\r\n    const rows = history.reduce((accum, bet) => {\r\n      return [\r\n        ...accum,\r\n        [\r\n          bet.round.epoch,\r\n          bet.round.position,\r\n          bet.position,\r\n          bet.amount,\r\n          bet.hash,\r\n          bet.claimedHash || '',\r\n          bet.round.lockPrice,\r\n          bet.round.closePrice,\r\n          bet.round.totalBets,\r\n          bet.round.totalAmount,\r\n          bet.round.failed,\r\n        ].join(','),\r\n      ]\r\n    }, [])\r\n\r\n    const anchor = document.createElement('a')\r\n    const blob = new Blob([`${header}\\n${rows.join('\\n')}`], {\r\n      type: 'text/csv;charset=utf-8;',\r\n    })\r\n\r\n    anchor.href = URL.createObjectURL(blob)\r\n    anchor.target = '_blank'\r\n    anchor.download = 'pancakeswap-prediction-v1-history.csv'\r\n\r\n    document.body.appendChild(anchor)\r\n    anchor.click()\r\n    document.body.removeChild(anchor)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchAllHistory = async () => {\r\n      setIsFetching(true)\r\n\r\n      try {\r\n        const response = await getAllV1History({ user: account.toLowerCase() })\r\n        setHistory(response)\r\n      } catch (error) {\r\n        console.error('Unable to fetch history', error)\r\n      } finally {\r\n        setIsFetching(false)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchAllHistory()\r\n    }\r\n  }, [account, setHistory, setIsFetching])\r\n\r\n  return (\r\n    <Modal minWidth=\"288px\" position=\"relative\" mt=\"124px\">\r\n      <BunnyDecoration>\r\n        <img src=\"/images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\r\n      </BunnyDecoration>\r\n      <ModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Nothing to Collect')}</Heading>\r\n        </ModalTitle>\r\n        <ModalCloseButton onDismiss={onDismiss} />\r\n      </ModalHeader>\r\n      <ModalBody p=\"24px\">\r\n        <Text as=\"p\" fontSize=\"14px\">\r\n          {t('You have no unclaimed v0.1 prizes.')}\r\n        </Text>\r\n        <Text as=\"p\" fontSize=\"14px\" mb=\"24px\">\r\n          {t('Download your v0.1 Prediction history below.')}\r\n        </Text>\r\n        <Button\r\n          onClick={handleClick}\r\n          isLoading={isFetching}\r\n          endIcon={isFetching ? <AutoRenewIcon spin width=\"24px\" color=\"white\" /> : null}\r\n        >\r\n          {t('Download .CSV')}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default CollectRoundWinningsModal\r\n","import React, { useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Box, Flex, Text, ChevronRightIcon, useModal } from '@pancakeswap/uikit'\r\nimport Loading from 'components/Loading'\r\nimport CollectRoundWinningsModal from '../CollectRoundWinningsModal'\r\nimport { getAllV1History } from './helpers'\r\nimport NothingToClaimModal from './NothingToClaimModal'\r\n\r\nconst StyledClaimCheck = styled(Flex)`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n  cursor: pointer;\r\n  justify-content: space-between;\r\n  padding: 16px;\r\n`\r\n\r\nconst ClaimCheck = () => {\r\n  const [isFetching, setIsFetching] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n\r\n  const [onPresentCollectWinningsModal] = useModal(<CollectRoundWinningsModal />, false)\r\n\r\n  const [onPresentNothingToClaimModal] = useModal(<NothingToClaimModal />)\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      setIsFetching(true)\r\n      const betHistory = await getAllV1History({ user: account.toLowerCase(), claimed: false })\r\n\r\n      // Filter out bets that can be claimed\r\n      const unclaimedBets = betHistory.filter((bet) => {\r\n        return bet.round.position === bet.position || bet.round.failed === true\r\n      })\r\n\r\n      if (unclaimedBets.length > 0) {\r\n        onPresentCollectWinningsModal()\r\n      } else {\r\n        onPresentNothingToClaimModal()\r\n      }\r\n    } catch (error) {\r\n      console.error('Unable to check v1 history', error)\r\n    } finally {\r\n      setIsFetching(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledClaimCheck onClick={account ? handleClick : undefined}>\r\n      <Box style={{ flex: 1 }}>\r\n        <Text>{t('Showing history for Prediction v0.2')}</Text>\r\n        <Flex alignItems=\"center\">\r\n          <Text color=\"primary\">{t('Check for unclaimed v0.1 winnings')}</Text>\r\n          <ChevronRightIcon color=\"primary\" width=\"24px\" />\r\n        </Flex>\r\n      </Box>\r\n      {isFetching && (\r\n        <Box px=\"16px\">\r\n          <Loading />\r\n        </Box>\r\n      )}\r\n    </StyledClaimCheck>\r\n  )\r\n}\r\n\r\nexport default ClaimCheck\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { orderBy } from 'lodash'\r\nimport { Box, Button, Flex, Heading, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { Bet } from 'state/types'\r\nimport { fetchNodeHistory } from 'state/predictions'\r\nimport { useGetCurrentHistoryPage, useGetHasHistoryLoaded, useGetIsFetchingHistory } from 'state/predictions/hooks'\r\nimport HistoricalBet from './HistoricalBet'\r\nimport V1ClaimCheck from '../v1/V1ClaimCheck'\r\n\r\ninterface RoundsTabProps {\r\n  hasBetHistory: boolean\r\n  bets: Bet[]\r\n}\r\n\r\nconst RoundsTab: React.FC<RoundsTabProps> = ({ hasBetHistory, bets }) => {\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const hasHistoryLoaded = useGetHasHistoryLoaded()\r\n  const currentHistoryPage = useGetCurrentHistoryPage()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n\r\n  const handleClick = () => {\r\n    dispatch(fetchNodeHistory({ account, page: currentHistoryPage + 1 }))\r\n  }\r\n\r\n  return hasBetHistory ? (\r\n    <>\r\n      <V1ClaimCheck />\r\n      {orderBy(bets, ['round.epoch'], ['desc']).map((bet) => (\r\n        <HistoricalBet key={bet.round.epoch} bet={bet} />\r\n      ))}\r\n      {hasBetHistory && !hasHistoryLoaded && (\r\n        <Flex alignItems=\"center\" justifyContent=\"center\" py=\"24px\">\r\n          <Button variant=\"secondary\" scale=\"sm\" onClick={handleClick} disabled={isFetchingHistory}>\r\n            {t('View More')}\r\n          </Button>\r\n        </Flex>\r\n      )}\r\n    </>\r\n  ) : (\r\n    <>\r\n      <V1ClaimCheck />\r\n      <Box p=\"24px\">\r\n        <Heading size=\"lg\" textAlign=\"center\" mb=\"8px\">\r\n          {t('No prediction history available')}\r\n        </Heading>\r\n        <Text as=\"p\" textAlign=\"center\">\r\n          {t(\r\n            'If you are sure you should see history here, make sure youre connected to the correct wallet and try again.',\r\n          )}\r\n        </Text>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RoundsTab\r\n","// @ts-nocheck\r\n/**\r\n * There is ts-nocheck at the top of this file for the following reasons:\r\n * 1. You can't ignore block in TS at the moment https://stackoverflow.com/questions/51145180/how-to-use-ts-ignore-for-a-block\r\n * 2. Interpolations in keyframes are indeed supported and work fine https://github.com/styled-components/styled-components/issues/2263\r\n * But TypeScript definitions are not updated to reflect that - https://github.com/DefinitelyTyped/DefinitelyTyped/issues/48907\r\n * 3. Since this error is in the middle of a template string there is no way to add @ts-ignore on just that one line\r\n * without also messing prettier.\r\n *\r\n * I'll leave TODO: comment here to check back later if there is update to types\r\n *\r\n */\r\nimport styled, { keyframes } from 'styled-components'\r\n\r\ninterface SliceProps {\r\n  length: number\r\n  offset?: number\r\n}\r\n\r\nexport const DrawAnimation = keyframes`\r\n  from {\r\n    stroke-dasharray: 0, 339.292\r\n  }\r\n  to {\r\n    stroke-dasharray: ${({ length }: SliceProps) => length} 339.292;\r\n  }\r\n`\r\n\r\nexport const OffsetAnimation = keyframes`\r\n  from {\r\n    stroke-dashoffset: 0\r\n  }\r\n  to {\r\n    stroke-dashoffset: ${(props) => -props.offset};\r\n  }\r\n`\r\n\r\nexport const SVG = styled.svg`\r\n  width: 128px;\r\n  height: 128px;\r\n  transform: rotate(-90deg);\r\n`\r\n\r\nconst DefaultSlice = styled.circle<SliceProps>`\r\n  fill: none;\r\n  stroke-width: 16;\r\n  stroke-dasharray: ${(props) => `${props.length} 339.292`};\r\n`\r\n\r\nexport const LostSlice = styled(DefaultSlice)`\r\n  stroke: #ed4b9e;\r\n  animation: ${DrawAnimation} 1s ease;\r\n`\r\n\r\nexport const WonSlice = styled(DefaultSlice)`\r\n  stroke: #31d0aa;\r\n  stroke-dashoffset: ${(props) => -props.offset};\r\n  animation: ${DrawAnimation} 1s ease, ${OffsetAnimation} 1s ease;\r\n`\r\n\r\nexport const Wrapper = styled.div`\r\n  position: relative;\r\n  width: 128px;\r\n  height: 128px;\r\n`\r\n\r\nexport const Info = styled.div`\r\n  width: 128px;\r\n  height: 128px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 2;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Text } from '@pancakeswap/uikit'\r\nimport { SVG, WonSlice, LostSlice, Wrapper, Info } from './PnlChartStyles'\r\n\r\n/**\r\n * Bare minimum chart that doesn't require any external dependencies\r\n * For details read here - https://www.smashingmagazine.com/2015/07/designing-simple-pie-charts-with-css/\r\n */\r\n\r\ninterface PnlChartProps {\r\n  won: number\r\n  lost: number\r\n}\r\n\r\n// 2 * Pi * R\r\nconst CIRCUMFERENCE = 339.292\r\n\r\nconst PnlChart: React.FC<PnlChartProps> = ({ lost, won }) => {\r\n  const { t } = useTranslation()\r\n  const percentageWon = ((won * 100) / (lost + won)).toFixed(2)\r\n  const paintLost = (lost / (won + lost)) * CIRCUMFERENCE\r\n  const paintWon = CIRCUMFERENCE - paintLost\r\n  return (\r\n    <Wrapper>\r\n      <SVG viewBox=\"0 0 128 128\">\r\n        <LostSlice r=\"54\" cx=\"64\" cy=\"64\" length={paintLost} />\r\n        <WonSlice r=\"54\" cx=\"64\" cy=\"64\" length={paintWon} offset={paintLost} />\r\n      </SVG>\r\n      <Info>\r\n        <Text small lineHeight=\"1\">\r\n          {t('Won')}\r\n        </Text>\r\n        <Text bold fontSize=\"20px\" lineHeight=\"1\">\r\n          {won}/{won + lost}\r\n        </Text>\r\n        <Text small lineHeight=\"1\" color=\"textSubtle\">\r\n          {percentageWon}%\r\n        </Text>\r\n      </Info>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default PnlChart\r\n","import React from 'react'\r\nimport { Price } from '@pancakeswap/sdk'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatBnb } from '../helpers'\r\n\r\ntype SummaryType = 'won' | 'lost' | 'entered'\r\n\r\ninterface SummaryRowProps {\r\n  type: SummaryType\r\n  summary: any\r\n  bnbBusdPrice: Price\r\n}\r\n\r\nconst summaryTypeColors = {\r\n  won: 'success',\r\n  lost: 'failure',\r\n  entered: 'text',\r\n}\r\n\r\nconst summaryTypeSigns = {\r\n  won: '+',\r\n  lost: '-',\r\n  entered: '',\r\n}\r\n\r\nconst SummaryRow: React.FC<SummaryRowProps> = ({ type, summary, bnbBusdPrice }) => {\r\n  const { t } = useTranslation()\r\n\r\n  const color = summaryTypeColors[type]\r\n  const { rounds, amount } = summary[type]\r\n  const totalRounds = summary.entered.rounds\r\n  const roundsInPercents = ((rounds * 100) / totalRounds).toFixed(2)\r\n  const typeTranslationKey = type.charAt(0).toUpperCase() + type.slice(1)\r\n  const displayAmount = type === 'won' ? summary[type].payout : amount\r\n  const amountInUsd = multiplyPriceByAmount(bnbBusdPrice, displayAmount)\r\n\r\n  return (\r\n    <>\r\n      <Text mt=\"16px\" bold color=\"textSubtle\">\r\n        {t(typeTranslationKey)}\r\n      </Text>\r\n      <Flex>\r\n        <Flex flex=\"2\" flexDirection=\"column\">\r\n          <Text bold fontSize=\"20px\" color={color}>\r\n            {rounds} {t('Rounds').toLocaleLowerCase()}\r\n          </Text>\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {type === 'entered' ? t('Total').toLocaleLowerCase() : `${roundsInPercents}%`}\r\n          </Text>\r\n        </Flex>\r\n        <Flex flex=\"3\" flexDirection=\"column\">\r\n          <Text bold fontSize=\"20px\" color={color}>\r\n            {`${summaryTypeSigns[type]}${formatBnb(displayAmount)} BNB`}\r\n          </Text>\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {`~$${amountInUsd.toFixed(2)}`}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SummaryRow\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Box, Flex, Heading, Text, Button, Link, OpenNewIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getRoundResult, Result } from 'state/predictions/helpers'\r\nimport { REWARD_RATE } from 'state/predictions/config'\r\nimport { getBscScanLink } from 'utils'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport { useBNBBusdPrice } from 'hooks/useBUSDPrice'\r\nimport { useGetCurrentEpoch } from 'state/predictions/hooks'\r\nimport { Bet, BetPosition } from 'state/types'\r\nimport { formatBnb, getMultiplier, getNetPayout } from '../helpers'\r\nimport PnlChart from './PnlChart'\r\nimport SummaryRow from './SummaryRow'\r\n\r\ninterface PnlTabProps {\r\n  hasBetHistory: boolean\r\n  bets: Bet[]\r\n}\r\n\r\ninterface PnlCategory {\r\n  rounds: number\r\n  amount: number\r\n}\r\n\r\ninterface PnlSummary {\r\n  won: PnlCategory & { payout: number; bestRound: { id: string; payout: number; multiplier: number } }\r\n  lost: PnlCategory\r\n  entered: PnlCategory\r\n}\r\n\r\nconst Divider = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.backgroundDisabled};\r\n  height: 1px;\r\n  margin: 24px auto;\r\n  width: 100%;\r\n`\r\n\r\nconst initialPnlSummary: PnlSummary = {\r\n  won: {\r\n    rounds: 0,\r\n    amount: 0,\r\n    payout: 0, // net payout after all deductions\r\n    bestRound: {\r\n      id: '0',\r\n      payout: 0, // net payout after all deductions\r\n      multiplier: 0,\r\n    },\r\n  },\r\n  lost: {\r\n    rounds: 0,\r\n    amount: 0,\r\n  },\r\n  entered: {\r\n    rounds: 0,\r\n    amount: 0,\r\n  },\r\n}\r\n\r\nconst getPnlSummary = (bets: Bet[], currentEpoch: number): PnlSummary => {\r\n  return bets.reduce((summary: PnlSummary, bet) => {\r\n    const roundResult = getRoundResult(bet, currentEpoch)\r\n    if (roundResult === Result.WIN) {\r\n      const payout = getNetPayout(bet, REWARD_RATE)\r\n      let { bestRound } = summary.won\r\n      if (payout > bestRound.payout) {\r\n        const { bullAmount, bearAmount, totalAmount } = bet.round\r\n        const multiplier = getMultiplier(totalAmount, bet.position === BetPosition.BULL ? bullAmount : bearAmount)\r\n        bestRound = { id: bet.round.epoch.toString(), payout, multiplier }\r\n      }\r\n      return {\r\n        won: {\r\n          rounds: summary.won.rounds + 1,\r\n          amount: summary.won.amount + bet.amount,\r\n          payout: summary.won.payout + payout,\r\n          bestRound,\r\n        },\r\n        entered: {\r\n          rounds: summary.entered.rounds + 1,\r\n          amount: summary.entered.amount + bet.amount,\r\n        },\r\n        lost: summary.lost,\r\n      }\r\n    }\r\n    if (roundResult === Result.LOSE || roundResult === Result.HOUSE) {\r\n      return {\r\n        lost: {\r\n          rounds: summary.lost.rounds + 1,\r\n          amount: summary.lost.amount + bet.amount,\r\n        },\r\n        entered: {\r\n          rounds: summary.entered.rounds + 1,\r\n          amount: summary.entered.amount + bet.amount,\r\n        },\r\n        won: summary.won,\r\n      }\r\n    }\r\n    // Ignore Canceled and Live rounds\r\n    return summary\r\n  }, initialPnlSummary)\r\n}\r\n\r\nconst PnlTab: React.FC<PnlTabProps> = ({ hasBetHistory, bets }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const bnbBusdPrice = useBNBBusdPrice()\r\n\r\n  const summary = getPnlSummary(bets, currentEpoch)\r\n\r\n  const netResultAmount = summary.won.payout - summary.lost.amount\r\n  const netResultIsPositive = netResultAmount > 0\r\n  const avgPositionEntered = summary.entered.amount / summary.entered.rounds\r\n  const avgBnbWonPerRound = netResultAmount / summary.entered.rounds\r\n  const avgBnbWonIsPositive = avgBnbWonPerRound > 0\r\n\r\n  // Guard in case user has only lost rounds\r\n  const hasBestRound = summary.won.bestRound.payout !== 0\r\n\r\n  const netResultInUsd = multiplyPriceByAmount(bnbBusdPrice, netResultAmount)\r\n  const avgBnbWonInUsd = multiplyPriceByAmount(bnbBusdPrice, avgBnbWonPerRound)\r\n  const betRoundInUsd = multiplyPriceByAmount(bnbBusdPrice, summary.won.bestRound.payout)\r\n  const avgPositionEnteredInUsd = multiplyPriceByAmount(bnbBusdPrice, avgPositionEntered)\r\n\r\n  return hasBetHistory ? (\r\n    <Box p=\"16px\">\r\n      <Text bold fontSize=\"24px\" color=\"secondary\" pb=\"24px\">\r\n        {t('Your history')}\r\n      </Text>\r\n      <Flex>\r\n        <PnlChart lost={summary.lost.rounds} won={summary.won.rounds} />\r\n        <Flex flexDirection=\"column\" justifyContent=\"center\" pl=\"24px\">\r\n          <Text bold color=\"textSubtle\">\r\n            {t('Net results')}\r\n          </Text>\r\n          <Text bold fontSize=\"24px\" lineHeight=\"1\" color={netResultIsPositive ? 'success' : 'failure'}>\r\n            {`${netResultIsPositive ? '+' : ''}${formatBnb(netResultAmount)} BNB`}\r\n          </Text>\r\n          <Text small color=\"textSubtle\">\r\n            {`~$${netResultInUsd.toFixed(2)}`}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n      <Box pl=\"8px\">\r\n        <Text mt=\"24px\" bold color=\"textSubtle\">\r\n          {t('Average return / round')}\r\n        </Text>\r\n        <Text bold color={avgBnbWonIsPositive ? 'success' : 'failure'}>\r\n          {`${avgBnbWonIsPositive ? '+' : ''}${formatBnb(avgBnbWonPerRound)} BNB`}\r\n        </Text>\r\n        <Text small color=\"textSubtle\">\r\n          {`~$${avgBnbWonInUsd.toFixed(2)}`}\r\n        </Text>\r\n\r\n        {hasBestRound && (\r\n          <>\r\n            <Text mt=\"16px\" bold color=\"textSubtle\">\r\n              {t('Best round: #%roundId%', { roundId: summary.won.bestRound.id })}\r\n            </Text>\r\n            <Flex alignItems=\"flex-end\">\r\n              <Text bold color=\"success\">{`+${formatBnb(summary.won.bestRound.payout)} BNB`}</Text>\r\n              <Text ml=\"4px\" small color=\"textSubtle\">\r\n                ({summary.won.bestRound.multiplier.toFixed(2)}x)\r\n              </Text>\r\n            </Flex>\r\n            <Text small color=\"textSubtle\">\r\n              {`~$${betRoundInUsd.toFixed(2)}`}\r\n            </Text>\r\n          </>\r\n        )}\r\n\r\n        <Text mt=\"16px\" bold color=\"textSubtle\">\r\n          {t('Average position entered / round')}\r\n        </Text>\r\n        <Text bold>{`${formatBnb(avgPositionEntered)} BNB`}</Text>\r\n        <Text small color=\"textSubtle\">\r\n          {`~$${avgPositionEnteredInUsd.toFixed(2)}`}\r\n        </Text>\r\n\r\n        <Divider />\r\n\r\n        <SummaryRow type=\"won\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n        <SummaryRow type=\"lost\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n        <SummaryRow type=\"entered\" summary={summary} bnbBusdPrice={bnbBusdPrice} />\r\n\r\n        <Flex justifyContent=\"center\" mt=\"24px\">\r\n          <Link href={`${getBscScanLink(account, 'address')}#internaltx`} mb=\"16px\" external>\r\n            <Button mt=\"8px\" width=\"100%\">\r\n              {t('View Reclaimed & Won')}\r\n              <OpenNewIcon color=\"white\" ml=\"4px\" />\r\n            </Button>\r\n          </Link>\r\n        </Flex>\r\n      </Box>\r\n    </Box>\r\n  ) : (\r\n    <Box p=\"24px\">\r\n      <Heading size=\"lg\" textAlign=\"center\" mb=\"8px\">\r\n        {t('No prediction history available')}\r\n      </Heading>\r\n      <Text as=\"p\" textAlign=\"center\">\r\n        {t(\r\n          'If you are sure you should see history here, make sure youre connected to the correct wallet and try again.',\r\n        )}\r\n      </Text>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default PnlTab\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Flex, Spinner, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { fetchNodeHistory } from 'state/predictions'\r\nimport { getFilteredBets } from 'state/predictions/helpers'\r\nimport { useAppDispatch } from 'state'\r\nimport {\r\n  useGetCurrentEpoch,\r\n  useGetCurrentHistoryPage,\r\n  useGetHistory,\r\n  useGetHistoryFilter,\r\n  useGetIsFetchingHistory,\r\n  useIsHistoryPaneOpen,\r\n} from 'state/predictions/hooks'\r\nimport { Header, HistoryTabs } from './components/History'\r\nimport RoundsTab from './components/History/RoundsTab'\r\nimport PnlTab from './components/History/PnlTab/PnlTab'\r\n\r\nconst StyledHistory = styled.div`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`\r\n\r\nconst BetWrapper = styled.div`\r\n  flex: 1;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  position: relative;\r\n`\r\n\r\nconst SpinnerWrapper = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  left: 0;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n`\r\n\r\nconst History = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const historyFilter = useGetHistoryFilter()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const currentHistoryPage = useGetCurrentHistoryPage()\r\n  const { t } = useTranslation()\r\n  const bets = useGetHistory()\r\n  const [activeTab, setActiveTab] = useState(HistoryTabs.ROUNDS)\r\n\r\n  useEffect(() => {\r\n    if (account && isHistoryPaneOpen) {\r\n      dispatch(fetchNodeHistory({ account }))\r\n    }\r\n  }, [account, currentEpoch, isHistoryPaneOpen, dispatch])\r\n\r\n  const results = getFilteredBets(bets, historyFilter)\r\n  const hasBetHistory = results && results.length > 0\r\n\r\n  let activeTabComponent = null\r\n\r\n  switch (activeTab) {\r\n    case HistoryTabs.PNL:\r\n      activeTabComponent = <PnlTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n    case HistoryTabs.ROUNDS:\r\n    default:\r\n      activeTabComponent = <RoundsTab hasBetHistory={hasBetHistory} bets={results} />\r\n      break\r\n  }\r\n\r\n  if (!account) {\r\n    activeTabComponent = (\r\n      <Flex justifyContent=\"center\" alignItems=\"center\" flexDirection=\"column\" mt=\"32px\">\r\n        <ConnectWalletButton />\r\n        <Text mt=\"8px\">{t('Connect your wallet to view your prediction history')}</Text>\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledHistory>\r\n      <Header activeTab={activeTab} setActiveTab={setActiveTab} />\r\n      <BetWrapper>\r\n        {isFetchingHistory && currentHistoryPage === 1 ? (\r\n          <SpinnerWrapper>\r\n            <Spinner size={72} />\r\n          </SpinnerWrapper>\r\n        ) : (\r\n          activeTabComponent\r\n        )}\r\n      </BetWrapper>\r\n    </StyledHistory>\r\n  )\r\n}\r\n\r\nexport default History\r\n","import React from 'react'\r\nimport { useTheme } from 'styled-components'\r\nimport { Svg, SvgProps } from '@pancakeswap/uikit'\r\n\r\ninterface MultiplierProps extends SvgProps {\r\n  isActive: boolean\r\n}\r\n\r\nexport const RoundMultiplierDownArrow: React.FC<MultiplierProps> = ({ isActive, ...props }) => {\r\n  const theme = useTheme()\r\n  const fill = theme.colors[isActive ? 'failure' : 'tertiary']\r\n\r\n  return (\r\n    <Svg height=\"65px\" width=\"240px\" viewBox=\"0 0 240 65\" {...props}>\r\n      <g filter=\"url(#filter0_i)\">\r\n        <path\r\n          d=\"M10.0001 15.7243L10.0003 1H234L234 15.7247C234 22.4864 229.749 28.5181 223.381 30.7923L138.48 61.1141C127.823 64.9203 116.177 64.9203 105.519 61.1141L20.6188 30.7924C14.2508 28.5181 10.0001 22.4862 10.0001 15.7243Z\"\r\n          fill={fill}\r\n        />\r\n      </g>\r\n      <defs>\r\n        <filter\r\n          id=\"filter0_i\"\r\n          x=\"10.0001\"\r\n          y=\"1\"\r\n          width=\"224\"\r\n          height=\"62.9688\"\r\n          filterUnits=\"userSpaceOnUse\"\r\n          colorInterpolationFilters=\"sRGB\"\r\n        >\r\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\r\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\" />\r\n          <feColorMatrix\r\n            in=\"SourceAlpha\"\r\n            type=\"matrix\"\r\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\r\n            result=\"hardAlpha\"\r\n          />\r\n          <feOffset />\r\n          <feGaussianBlur stdDeviation=\"1\" />\r\n          <feComposite in2=\"hardAlpha\" operator=\"arithmetic\" k2=\"-1\" k3=\"1\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\" />\r\n          <feBlend mode=\"normal\" in2=\"shape\" result=\"effect1_innerShadow\" />\r\n        </filter>\r\n      </defs>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const RoundMultiplierUpArrow: React.FC<MultiplierProps> = ({ isActive, ...props }) => {\r\n  const theme = useTheme()\r\n  const fill = theme.colors[isActive ? 'success' : 'tertiary']\r\n\r\n  return (\r\n    <Svg height=\"65px\" width=\"240px\" viewBox=\"0 0 240 65\" {...props}>\r\n      <g filter=\"url(#filter0_i)\">\r\n        <path\r\n          d=\"M10.0001 49.2757L10.0003 64H234L234 49.2753C234 42.5136 229.749 36.4819 223.381 34.2077L138.48 3.8859C127.823 0.0796983 116.177 0.0796931 105.519 3.8859L20.6188 34.2076C14.2508 36.4819 10.0001 42.5138 10.0001 49.2757Z\"\r\n          fill={fill}\r\n        />\r\n      </g>\r\n      <defs>\r\n        <filter\r\n          id=\"filter0_i\"\r\n          x=\"10.0001\"\r\n          y=\"1.03125\"\r\n          width=\"224\"\r\n          height=\"62.9688\"\r\n          filterUnits=\"userSpaceOnUse\"\r\n          colorInterpolationFilters=\"sRGB\"\r\n        >\r\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\r\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\" />\r\n          <feColorMatrix\r\n            in=\"SourceAlpha\"\r\n            type=\"matrix\"\r\n            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\r\n            result=\"hardAlpha\"\r\n          />\r\n          <feOffset />\r\n          <feGaussianBlur stdDeviation=\"1\" />\r\n          <feComposite in2=\"hardAlpha\" operator=\"arithmetic\" k2=\"-1\" k3=\"1\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\" />\r\n          <feBlend mode=\"normal\" in2=\"shape\" result=\"effect1_innerShadow\" />\r\n        </filter>\r\n      </defs>\r\n    </Svg>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ethers } from 'ethers'\r\nimport { CheckmarkCircleIcon, CheckmarkCircleFillIcon, Tag, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatBnbv2 } from '../../helpers'\r\n\r\ninterface EnteredTagProps {\r\n  amount?: ethers.BigNumber\r\n  hasClaimed?: boolean\r\n}\r\n\r\nconst EnteredTag: React.FC<EnteredTagProps> = ({ amount, hasClaimed = false }) => {\r\n  const { t } = useTranslation()\r\n  const { targetRef, tooltipVisible, tooltip } = useTooltip(\r\n    <div style={{ whiteSpace: 'nowrap' }}>{`${formatBnbv2(amount)} BNB`}</div>,\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <span ref={targetRef}>\r\n        <Tag\r\n          variant=\"secondary\"\r\n          fontWeight=\"bold\"\r\n          textTransform=\"uppercase\"\r\n          outline={!hasClaimed}\r\n          startIcon={hasClaimed ? <CheckmarkCircleFillIcon width=\"18px\" /> : <CheckmarkCircleIcon width=\"18px\" />}\r\n        >\r\n          {hasClaimed ? t('Claimed') : t('Entered')}\r\n        </Tag>{' '}\r\n      </span>{' '}\r\n      {tooltipVisible && tooltip}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EnteredTag\r\n","import React from 'react'\r\nimport { ethers } from 'ethers'\r\nimport styled, { CSSProperties } from 'styled-components'\r\nimport { Box, Flex, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BetPosition } from 'state/types'\r\nimport { RoundMultiplierDownArrow, RoundMultiplierUpArrow } from '../../RoundMultiplierArrows'\r\nimport EnteredTag from './EnteredTag'\r\n\r\ninterface MultiplierArrowProps {\r\n  betAmount?: ethers.BigNumber\r\n  multiplier?: string\r\n  hasEntered?: boolean\r\n  hasClaimed?: boolean\r\n  betPosition?: BetPosition\r\n  isDisabled?: boolean\r\n  isActive?: boolean\r\n  isHouse?: boolean\r\n}\r\n\r\nconst ArrowWrapper = styled.div`\r\n  height: 65px;\r\n  margin: 0 auto;\r\n  width: 240px;\r\n`\r\n\r\nconst Content = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  left: 0;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n`\r\n\r\nconst EnteredTagWrapper = styled.div`\r\n  position: absolute;\r\n  z-index: 10;\r\n`\r\n\r\nconst getTextColor =\r\n  (fallback = 'textSubtle') =>\r\n  (isActive: boolean, isDisabled: boolean, isHouse: boolean) => {\r\n    if (isDisabled || isHouse) {\r\n      return 'textDisabled'\r\n    }\r\n\r\n    if (isActive) {\r\n      return 'white'\r\n    }\r\n\r\n    return fallback\r\n  }\r\n\r\nconst MultiplierArrow: React.FC<MultiplierArrowProps> = ({\r\n  betAmount,\r\n  multiplier,\r\n  hasEntered = false,\r\n  hasClaimed = false,\r\n  betPosition = BetPosition.BULL,\r\n  isDisabled = false,\r\n  isActive = false,\r\n  isHouse = false,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const upColor = getTextColor('success')(isActive, isDisabled, isHouse)\r\n  const downColor = getTextColor('failure')(isActive, isDisabled, isHouse)\r\n  const textColor = getTextColor()(isActive, isDisabled, isHouse)\r\n  const multiplierText = (\r\n    <Box>\r\n      <Flex justifyContent=\"center\" height=\"14px\">\r\n        <Text fontSize=\"14px\" color={textColor} bold lineHeight=\"14x\">\r\n          {multiplier !== undefined ? `${multiplier}x` : '-'}\r\n        </Text>\r\n        <Text fontSize=\"14px\" color={textColor} lineHeight=\"14x\" ml=\"4px\">\r\n          {t('Payout')}\r\n        </Text>\r\n      </Flex>\r\n    </Box>\r\n  )\r\n\r\n  const getEnteredTag = (position: CSSProperties) => {\r\n    if (!hasEntered) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <EnteredTagWrapper style={position}>\r\n        <EnteredTag amount={betAmount} hasClaimed={hasClaimed} />\r\n      </EnteredTagWrapper>\r\n    )\r\n  }\r\n\r\n  if (betPosition === BetPosition.BEAR) {\r\n    return (\r\n      <Box mt=\"-1px\" position=\"relative\">\r\n        <ArrowWrapper>\r\n          <RoundMultiplierDownArrow isActive={isActive} />\r\n          {getEnteredTag({ bottom: 0, right: 0 })}\r\n          <Content>\r\n            {!isDisabled && multiplierText}\r\n            <Text bold fontSize=\"20px\" mb=\"8px\" color={downColor} textTransform=\"uppercase\">\r\n              {t('Down')}\r\n            </Text>\r\n          </Content>\r\n        </ArrowWrapper>\r\n      </Box>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Box mb=\"-1px\" position=\"relative\">\r\n      <ArrowWrapper>\r\n        <RoundMultiplierUpArrow isActive={isActive} />\r\n        {getEnteredTag({ top: 0, left: 0 })}\r\n        <Content>\r\n          <Text bold fontSize=\"20px\" lineHeight=\"21px\" color={upColor} textTransform=\"uppercase\">\r\n            {t('Up')}\r\n          </Text>\r\n          {!isDisabled && multiplierText}\r\n        </Content>\r\n      </ArrowWrapper>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default MultiplierArrow\r\n","import React, { ReactElement } from 'react'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport styled, { DefaultTheme } from 'styled-components'\r\n\r\ntype Status = 'expired' | 'live' | 'next' | 'soon' | 'canceled' | 'calculating'\r\n\r\ninterface CardHeaderProps {\r\n  status: Status\r\n  title: string\r\n  epoch: number\r\n  icon?: ReactElement\r\n}\r\n\r\nconst HEADER_HEIGHT = '37px'\r\n\r\n// Used to get the gradient for the card border, which depends on the header color to create the illusion\r\n// that header is overlapping the 1px card border.\r\n// 'live' is not included into the switch case because it has isActive border style\r\nexport const getBorderBackground = (theme: DefaultTheme, status: Status) => {\r\n  const gradientStopPoint = `calc(${HEADER_HEIGHT} + 1px)`\r\n  switch (status) {\r\n    case 'calculating':\r\n      return `linear-gradient(transparent ${gradientStopPoint}, ${theme.colors.cardBorder} ${gradientStopPoint}), ${theme.colors.gradients.cardHeader}`\r\n    case 'canceled':\r\n      return `linear-gradient(${theme.colors.warning} ${gradientStopPoint}, ${theme.colors.cardBorder} ${gradientStopPoint})`\r\n    case 'next':\r\n      return `linear-gradient(${theme.colors.secondary} ${gradientStopPoint}, ${theme.colors.cardBorder} ${gradientStopPoint})`\r\n    case 'expired':\r\n    case 'soon':\r\n    default:\r\n      return theme.colors.cardBorder\r\n  }\r\n}\r\n\r\nconst getBackgroundColor = (theme: DefaultTheme, status: Status) => {\r\n  switch (status) {\r\n    case 'calculating':\r\n      return theme.colors.gradients.cardHeader\r\n    case 'live':\r\n      return 'transparent'\r\n    case 'canceled':\r\n      return theme.colors.warning\r\n    case 'next':\r\n      return theme.colors.secondary\r\n    case 'expired':\r\n    case 'soon':\r\n    default:\r\n      return theme.colors.cardBorder\r\n  }\r\n}\r\n\r\ntype TextColor = 'textDisabled' | 'white' | 'secondary' | 'text' | 'textSubtle'\r\ntype FallbackColor = 'text' | 'textSubtle'\r\n\r\nconst getTextColorByStatus = (status: Status, fallback: FallbackColor): TextColor => {\r\n  switch (status) {\r\n    case 'expired':\r\n      return 'textDisabled'\r\n    case 'next':\r\n      return 'white'\r\n    case 'live':\r\n      return 'secondary'\r\n    case 'canceled':\r\n    case 'calculating':\r\n      return 'text'\r\n    default:\r\n      return fallback\r\n  }\r\n}\r\n\r\nconst StyledCardHeader = styled.div<{ status: Status }>`\r\n  align-items: center;\r\n  background: ${({ theme, status }) => getBackgroundColor(theme, status)};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  height: ${HEADER_HEIGHT};\r\n  padding: ${({ status }) => (status === 'live' ? '16px' : '8px')};\r\n`\r\n\r\nconst Round = styled.div`\r\n  justify-self: center;\r\n`\r\n\r\nconst CardHeader: React.FC<CardHeaderProps> = ({ status, title, epoch, icon }) => {\r\n  const textColor = getTextColorByStatus(status, 'text')\r\n  const isLive = status === 'live'\r\n\r\n  return (\r\n    <StyledCardHeader status={status}>\r\n      <Flex alignItems=\"center\">\r\n        {icon}\r\n        <Text color={textColor} bold={isLive} textTransform={isLive ? 'uppercase' : 'capitalize'} lineHeight=\"21px\">\r\n          {title}\r\n        </Text>\r\n      </Flex>\r\n      <Round>\r\n        <Text fontSize={isLive ? '14px' : '12px'} color={getTextColorByStatus(status, 'textSubtle')} textAlign=\"center\">\r\n          {`#${epoch}`}\r\n        </Text>\r\n      </Round>\r\n    </StyledCardHeader>\r\n  )\r\n}\r\n\r\nexport default CardHeader\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, TrophyGoldIcon } from '@pancakeswap/uikit'\r\nimport { useGetIsClaimable } from 'state/predictions/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport CollectWinningsButton from '../CollectWinningsButton'\r\n\r\ninterface CollectWinningsOverlayProps {\r\n  epoch: number\r\n  isBottom?: boolean\r\n}\r\n\r\nconst Wrapper = styled(Flex)<{ isBottom: CollectWinningsOverlayProps['isBottom'] }>`\r\n  background-color: ${({ theme }) => theme.colors.secondary};\r\n  left: 0;\r\n  position: absolute;\r\n  width: 100%;\r\n  z-index: 30;\r\n\r\n  ${({ isBottom }) => {\r\n    return isBottom\r\n      ? `\r\n      border-radius: 0 0 16px 16px;\r\n      bottom: 0;\r\n    `\r\n      : `\r\n      top: 37px; // Card header height\r\n    `\r\n  }}\r\n`\r\n\r\nconst CollectWinningsOverlay: React.FC<CollectWinningsOverlayProps> = ({ epoch, isBottom = false, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const isClaimable = useGetIsClaimable(epoch)\r\n\r\n  if (!isClaimable) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Wrapper alignItems=\"center\" p=\"16px\" isBottom={isBottom} {...props}>\r\n      <TrophyGoldIcon width=\"64px\" style={{ flex: 'none' }} mr=\"8px\" />\r\n      <CollectWinningsButton hasClaimed={false} width=\"100%\">\r\n        {t('Collect Winnings')}\r\n      </CollectWinningsButton>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default CollectWinningsOverlay\r\n","import React from 'react'\r\nimport { Card, CardBody, Text, Flex, BlockIcon, LinkExternal } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, BetPosition } from 'state/types'\r\nimport useTheme from 'hooks/useTheme'\r\nimport ReclaimPositionButton from '../ReclaimPositionButton'\r\nimport useIsRefundable from '../../hooks/useIsRefundable'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader, { getBorderBackground } from './CardHeader'\r\n\r\ninterface CanceledRoundCardProps {\r\n  round: NodeRound\r\n}\r\n\r\nconst CanceledRoundCard: React.FC<CanceledRoundCardProps> = ({ round }) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { isRefundable, setIsRefundable } = useIsRefundable(round.epoch)\r\n  const { epoch } = round\r\n\r\n  const handleSuccess = async () => {\r\n    setIsRefundable(false)\r\n  }\r\n\r\n  return (\r\n    <Card borderBackground={getBorderBackground(theme, 'canceled')}>\r\n      <CardHeader\r\n        status=\"canceled\"\r\n        icon={<BlockIcon mr=\"4px\" width=\"21px\" />}\r\n        title={t('Canceled')}\r\n        epoch={round.epoch}\r\n      />\r\n      <CardBody p=\"16px\">\r\n        <MultiplierArrow isDisabled />\r\n        <RoundResultBox>\r\n          <Flex flexDirection=\"column\" alignItems=\"center\">\r\n            <Text bold color={isRefundable ? 'text' : 'textDisabled'}>\r\n              {t('Round Canceled')}\r\n            </Text>\r\n            {isRefundable && <ReclaimPositionButton epoch={epoch} onSuccess={handleSuccess} width=\"100%\" my=\"8px\" />}\r\n            <LinkExternal href=\"https://docs.pancakeswap.finance/products/prediction\" external>\r\n              {t('Learn More')}\r\n            </LinkExternal>\r\n          </Flex>\r\n        </RoundResultBox>\r\n        <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled />\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default CanceledRoundCard\r\n","import React from 'react'\r\nimport { Card, CardBody, Flex, Spinner, WaitIcon, TooltipText, useTooltip, InfoIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, BetPosition } from 'state/types'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader, { getBorderBackground } from './CardHeader'\r\n\r\ninterface CalculatingCardProps {\r\n  round: NodeRound\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n}\r\n\r\nconst CalculatingCard: React.FC<CalculatingCardProps> = ({ round, hasEnteredUp, hasEnteredDown }) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('This rounds closing transaction has been submitted to the blockchain, and is awaiting confirmation.'),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <Card borderBackground={getBorderBackground(theme, 'calculating')}>\r\n        <CardHeader\r\n          status=\"calculating\"\r\n          icon={<WaitIcon mr=\"4px\" width=\"21px\" />}\r\n          title={t('Calculating')}\r\n          epoch={round.epoch}\r\n        />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow isDisabled hasEntered={hasEnteredUp} />\r\n          <RoundResultBox>\r\n            <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\">\r\n              <Spinner size={96} />\r\n              <Flex mt=\"8px\" ref={targetRef}>\r\n                <TooltipText>{t('Calculating')}</TooltipText>\r\n                <InfoIcon ml=\"4px\" />\r\n              </Flex>\r\n            </Flex>\r\n          </RoundResultBox>\r\n          <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled hasEntered={hasEnteredDown} />\r\n        </CardBody>\r\n      </Card>\r\n      {tooltipVisible && tooltip}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CalculatingCard\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Card, Box, BlockIcon, CardBody } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, BetPosition, NodeLedger } from 'state/types'\r\nimport { useGetBufferSeconds } from 'state/predictions/hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { getHasRoundFailed, getRoundPosition } from '../../helpers'\r\nimport { RoundResult } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader, { getBorderBackground } from './CardHeader'\r\nimport CollectWinningsOverlay from './CollectWinningsOverlay'\r\nimport CanceledRoundCard from './CanceledRoundCard'\r\nimport CalculatingCard from './CalculatingCard'\r\n\r\ninterface ExpiredRoundCardProps {\r\n  round: NodeRound\r\n  betAmount?: NodeLedger['amount']\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  hasClaimedUp: boolean\r\n  hasClaimedDown: boolean\r\n  bullMultiplier: string\r\n  bearMultiplier: string\r\n}\r\n\r\nconst StyledExpiredRoundCard = styled(Card)`\r\n  opacity: 0.7;\r\n  transition: opacity 300ms;\r\n\r\n  &:hover {\r\n    opacity: 1;\r\n  }\r\n`\r\n\r\nconst ExpiredRoundCard: React.FC<ExpiredRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  hasClaimedUp,\r\n  hasClaimedDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { epoch, lockPrice, closePrice } = round\r\n  const betPosition = getRoundPosition(lockPrice, closePrice)\r\n  const bufferSeconds = useGetBufferSeconds()\r\n  const hasRoundFailed = getHasRoundFailed(round, bufferSeconds)\r\n\r\n  if (hasRoundFailed) {\r\n    return <CanceledRoundCard round={round} />\r\n  }\r\n\r\n  if (!closePrice) {\r\n    return <CalculatingCard round={round} hasEnteredDown={hasEnteredDown} hasEnteredUp={hasEnteredUp} />\r\n  }\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      <StyledExpiredRoundCard borderBackground={getBorderBackground(theme, 'expired')}>\r\n        <CardHeader\r\n          status=\"expired\"\r\n          icon={<BlockIcon mr=\"4px\" width=\"21px\" color=\"textDisabled\" />}\r\n          title={t('Expired')}\r\n          epoch={round.epoch}\r\n        />\r\n        <CardBody p=\"16px\" style={{ position: 'relative' }}>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bullMultiplier}\r\n            isActive={betPosition === BetPosition.BULL}\r\n            hasEntered={hasEnteredUp}\r\n            hasClaimed={hasClaimedUp}\r\n            isHouse={betPosition === BetPosition.HOUSE}\r\n          />\r\n          <RoundResult round={round} hasFailed={hasRoundFailed} />\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            isActive={betPosition === BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n            hasClaimed={hasClaimedDown}\r\n            isHouse={betPosition === BetPosition.HOUSE}\r\n          />\r\n        </CardBody>\r\n      </StyledExpiredRoundCard>\r\n      <CollectWinningsOverlay epoch={epoch} isBottom={hasEnteredDown} />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default ExpiredRoundCard\r\n","import React from 'react'\r\nimport { Progress, ProgressProps } from '@pancakeswap/uikit'\r\n\r\ninterface RoundProgressProps extends ProgressProps {\r\n  lockTimestamp: number\r\n  closeTimestamp: number\r\n}\r\n\r\nconst RoundProgress: React.FC<RoundProgressProps> = ({ lockTimestamp, closeTimestamp, ...props }) => {\r\n  const startMs = lockTimestamp * 1000\r\n  const endMs = closeTimestamp * 1000\r\n  const now = Date.now()\r\n  const rawProgress = ((now - startMs) / (endMs - startMs)) * 100\r\n  const progress = rawProgress <= 100 ? rawProgress : 100\r\n\r\n  return <Progress primaryStep={progress} {...props} />\r\n}\r\n\r\nexport default RoundProgress\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useCountUp } from 'react-countup'\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  Flex,\r\n  PlayCircleOutlineIcon,\r\n  Skeleton,\r\n  Text,\r\n  TooltipText,\r\n  useTooltip,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, NodeLedger, BetPosition } from 'state/types'\r\nimport { formatBigNumberToFixed } from 'utils/formatBalance'\r\nimport { useGetLastOraclePrice, useGetBufferSeconds } from 'state/predictions/hooks'\r\nimport RoundProgress from 'components/RoundProgress'\r\nimport { formatUsdv2, getHasRoundFailed, getPriceDifference } from '../../helpers'\r\nimport PositionTag from '../PositionTag'\r\nimport { RoundResultBox, LockPriceRow, PrizePoolRow } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader from './CardHeader'\r\nimport CanceledRoundCard from './CanceledRoundCard'\r\nimport CalculatingCard from './CalculatingCard'\r\n\r\ninterface LiveRoundCardProps {\r\n  round: NodeRound\r\n  betAmount?: NodeLedger['amount']\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: string\r\n  bearMultiplier: string\r\n}\r\n\r\nconst LiveRoundCard: React.FC<LiveRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { lockPrice, totalAmount, lockTimestamp, closeTimestamp } = round\r\n  const price = useGetLastOraclePrice()\r\n  const bufferSeconds = useGetBufferSeconds()\r\n\r\n  const isBull = lockPrice && price.gt(lockPrice)\r\n  const priceColor = isBull ? 'success' : 'failure'\r\n\r\n  const priceDifference = getPriceDifference(price, lockPrice)\r\n  const priceAsNumber = parseFloat(formatBigNumberToFixed(price, 3, 8))\r\n  const hasRoundFailed = getHasRoundFailed(round, bufferSeconds)\r\n\r\n  const now = Date.now()\r\n\r\n  const { countUp, update } = useCountUp({\r\n    start: 0,\r\n    end: priceAsNumber,\r\n    duration: 1,\r\n    decimals: 3,\r\n  })\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(t('Last price from Chainlink Oracle'), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  const updateRef = useRef(update)\r\n\r\n  useEffect(() => {\r\n    updateRef.current(priceAsNumber)\r\n  }, [priceAsNumber, updateRef])\r\n\r\n  if (hasRoundFailed) {\r\n    return <CanceledRoundCard round={round} />\r\n  }\r\n\r\n  if (now > closeTimestamp * 1000) {\r\n    return <CalculatingCard round={round} hasEnteredDown={hasEnteredDown} hasEnteredUp={hasEnteredUp} />\r\n  }\r\n\r\n  return (\r\n    <Card isActive>\r\n      <CardHeader\r\n        status=\"live\"\r\n        icon={<PlayCircleOutlineIcon mr=\"4px\" width=\"24px\" color=\"secondary\" />}\r\n        title={t('Live')}\r\n        epoch={round.epoch}\r\n      />\r\n      <RoundProgress variant=\"flat\" scale=\"sm\" lockTimestamp={lockTimestamp} closeTimestamp={closeTimestamp} />\r\n      <CardBody p=\"16px\">\r\n        <MultiplierArrow\r\n          betAmount={betAmount}\r\n          multiplier={bullMultiplier}\r\n          hasEntered={hasEnteredUp}\r\n          isActive={isBull}\r\n        />\r\n        <RoundResultBox betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n          <Text color=\"textSubtle\" fontSize=\"12px\" bold textTransform=\"uppercase\" mb=\"8px\">\r\n            {t('Last Price')}\r\n          </Text>\r\n          <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\" height=\"36px\">\r\n            <div ref={targetRef}>\r\n              <TooltipText bold color={priceColor} fontSize=\"24px\" style={{ minHeight: '36px' }}>\r\n                {price.gt(0) ? `$${countUp}` : <Skeleton height=\"36px\" width=\"94px\" />}\r\n              </TooltipText>\r\n            </div>\r\n            <PositionTag betPosition={isBull ? BetPosition.BULL : BetPosition.BEAR}>\r\n              {formatUsdv2(priceDifference)}\r\n            </PositionTag>\r\n          </Flex>\r\n          {lockPrice && <LockPriceRow lockPrice={lockPrice} />}\r\n          <PrizePoolRow totalAmount={totalAmount} />\r\n        </RoundResultBox>\r\n        <MultiplierArrow\r\n          betAmount={betAmount}\r\n          multiplier={bearMultiplier}\r\n          betPosition={BetPosition.BEAR}\r\n          hasEntered={hasEnteredDown}\r\n          isActive={!isBull}\r\n        />\r\n      </CardBody>\r\n      {tooltipVisible && tooltip}\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default LiveRoundCard\r\n","import React, { ReactNode } from 'react'\r\nimport styled from 'styled-components'\r\n\r\ninterface CardFlipProps {\r\n  isFlipped: boolean\r\n  height: string\r\n  children: [ReactNode, ReactNode]\r\n}\r\n\r\nconst Front = styled.div`\r\n  align-items: center;\r\n  backface-visibility: hidden;\r\n  display: flex;\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  transition: z-index 600ms;\r\n  width: 100%;\r\n\r\n  & > div {\r\n    flex: 1;\r\n  }\r\n`\r\n\r\nconst Back = styled(Front)`\r\n  transform: rotateY(180deg);\r\n`\r\n\r\nconst Inner = styled.div<{ isFlipped: CardFlipProps['isFlipped'] }>`\r\n  height: 100%;\r\n  position: relative;\r\n  transform: rotateY(${({ isFlipped }) => (isFlipped ? 180 : 0)}deg);\r\n  transform-style: preserve-3d;\r\n  transition: transform 600ms;\r\n\r\n  ${Front} {\r\n    z-index: ${({ isFlipped }) => (isFlipped ? 5 : 10)};\r\n  }\r\n\r\n  ${Back} {\r\n    z-index: ${({ isFlipped }) => (isFlipped ? 10 : 5)};\r\n  }\r\n`\r\n\r\nconst StyledCardFlip = styled.div`\r\n  perspective: 1000px;\r\n  z-index: auto;\r\n`\r\n\r\nconst getComponents = (children: CardFlipProps['children']) => {\r\n  if (children.length !== 2) {\r\n    throw new Error('CardFlip: Two children are required')\r\n  }\r\n\r\n  return children\r\n}\r\n\r\nconst CardFlip: React.FC<CardFlipProps> = ({ isFlipped, height, children }) => {\r\n  const [front, back] = getComponents(children)\r\n\r\n  return (\r\n    <StyledCardFlip style={{ height }}>\r\n      <Inner isFlipped={isFlipped}>\r\n        <Front>{front}</Front>\r\n        <Back>{back}</Back>\r\n      </Inner>\r\n    </StyledCardFlip>\r\n  )\r\n}\r\n\r\nexport default CardFlip\r\n","import { useContext } from 'react'\r\nimport { SwiperContext } from '../context/SwiperProvider'\r\n\r\nconst useSwiper = () => {\r\n  const swiperContext = useContext(SwiperContext)\r\n\r\n  if (swiperContext === undefined) {\r\n    throw new Error('Swiper not found')\r\n  }\r\n\r\n  return swiperContext\r\n}\r\n\r\nexport default useSwiper\r\n","import styled from 'styled-components'\r\nimport { Flex } from '@pancakeswap/uikit'\r\n\r\nconst FlexRow = styled(Flex).attrs({ alignItems: 'center' })`\r\n  flex: 1;\r\n`\r\n\r\nexport default FlexRow\r\n","import React, { useEffect, useMemo, useState } from 'react'\r\nimport {\r\n  ArrowBackIcon,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Flex,\r\n  Heading,\r\n  IconButton,\r\n  Button,\r\n  BinanceIcon,\r\n  Text,\r\n  BalanceInput,\r\n  Slider,\r\n  Box,\r\n  AutoRenewIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { ethers } from 'ethers'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetMinBetAmount } from 'state/predictions/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePredictionsContract } from 'hooks/useContract'\r\nimport { useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { BetPosition } from 'state/types'\r\nimport { formatBigNumber, formatFixedNumber } from 'utils/formatBalance'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { logError } from 'utils/sentry'\r\nimport PositionTag from '../PositionTag'\r\nimport useSwiper from '../../hooks/useSwiper'\r\nimport FlexRow from '../FlexRow'\r\n\r\ninterface SetPositionCardProps {\r\n  position: BetPosition\r\n  togglePosition: () => void\r\n  epoch: number\r\n  onBack: () => void\r\n  onSuccess: (hash: string) => Promise<void>\r\n}\r\n\r\nconst dust = parseUnits('0.01', 18)\r\nconst percentShortcuts = [10, 25, 50, 75]\r\n\r\nconst getButtonProps = (\r\n  value: ethers.BigNumber,\r\n  bnbBalance: ethers.BigNumber,\r\n  minBetAmountBalance: ethers.BigNumber,\r\n) => {\r\n  const hasSufficientBalance = () => {\r\n    if (value.gt(0)) {\r\n      return value.lte(bnbBalance)\r\n    }\r\n    return bnbBalance.gt(0)\r\n  }\r\n\r\n  if (!hasSufficientBalance()) {\r\n    return { key: 'Insufficient BNB balance', disabled: true }\r\n  }\r\n\r\n  if (value.eq(0)) {\r\n    return { key: 'Enter an amount', disabled: true }\r\n  }\r\n\r\n  return { key: 'Confirm', disabled: value.lt(minBetAmountBalance) }\r\n}\r\n\r\nconst getValueAsEthersBn = (value: string) => {\r\n  const valueAsFloat = parseFloat(value)\r\n  return Number.isNaN(valueAsFloat) ? ethers.BigNumber.from(0) : parseUnits(value)\r\n}\r\n\r\nconst SetPositionCard: React.FC<SetPositionCardProps> = ({ position, togglePosition, epoch, onBack, onSuccess }) => {\r\n  const [value, setValue] = useState('')\r\n  const [isTxPending, setIsTxPending] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [percent, setPercent] = useState(0)\r\n\r\n  const { account } = useWeb3React()\r\n  const { swiper } = useSwiper()\r\n  const { balance: bnbBalance } = useGetBnbBalance()\r\n  const minBetAmount = useGetMinBetAmount()\r\n  const { t } = useTranslation()\r\n  const { toastError } = useToast()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const predictionsContract = usePredictionsContract()\r\n\r\n  const maxBalance = useMemo(() => {\r\n    return bnbBalance.gt(dust) ? bnbBalance.sub(dust) : dust\r\n  }, [bnbBalance])\r\n  const balanceDisplay = formatBigNumber(bnbBalance)\r\n\r\n  const valueAsBn = getValueAsEthersBn(value)\r\n  const showFieldWarning = account && valueAsBn.gt(0) && errorMessage !== null\r\n\r\n  const handleInputChange = (input: string) => {\r\n    const inputAsBn = getValueAsEthersBn(input)\r\n\r\n    if (inputAsBn.eq(0)) {\r\n      setPercent(0)\r\n    } else {\r\n      const inputAsFn = ethers.FixedNumber.from(inputAsBn)\r\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance)\r\n      const hundredAsFn = ethers.FixedNumber.from(100)\r\n      const percentage = inputAsFn.divUnsafe(maxValueAsFn).mulUnsafe(hundredAsFn)\r\n      const percentageAsFloat = percentage.toUnsafeFloat()\r\n\r\n      setPercent(percentageAsFloat > 100 ? 100 : percentageAsFloat)\r\n    }\r\n    setValue(input)\r\n  }\r\n\r\n  const handlePercentChange = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const maxValueAsFn = ethers.FixedNumber.from(maxBalance)\r\n      const hundredAsFn = ethers.FixedNumber.from(100)\r\n      const sliderPercentAsFn = ethers.FixedNumber.from(sliderPercent.toFixed(18)).divUnsafe(hundredAsFn)\r\n      const balancePercentage = maxValueAsFn.mulUnsafe(sliderPercentAsFn)\r\n      setValue(formatFixedNumber(balancePercentage))\r\n    } else {\r\n      setValue('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  // Clear value\r\n  const handleGoBack = () => {\r\n    setValue('')\r\n    setPercent(0)\r\n    onBack()\r\n  }\r\n\r\n  // Disable the swiper events to avoid conflicts\r\n  const handleMouseOver = () => {\r\n    swiper.keyboard.disable()\r\n    swiper.mousewheel.disable()\r\n    swiper.detachEvents()\r\n  }\r\n\r\n  const handleMouseOut = () => {\r\n    swiper.keyboard.enable()\r\n    swiper.mousewheel.enable()\r\n    swiper.attachEvents()\r\n  }\r\n\r\n  const { key, disabled } = getButtonProps(valueAsBn, maxBalance, minBetAmount)\r\n\r\n  const handleEnterPosition = async () => {\r\n    const betMethod = position === BetPosition.BULL ? 'betBull' : 'betBear'\r\n\r\n    try {\r\n      const tx = await callWithGasPrice(predictionsContract, betMethod, [epoch], { value: valueAsBn.toString() })\r\n      setIsTxPending(true)\r\n      const receipt = await tx.wait()\r\n      onSuccess(receipt.transactionHash)\r\n    } catch (e) {\r\n      logError(e)\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n    } finally {\r\n      setIsTxPending(false)\r\n    }\r\n  }\r\n\r\n  // Warnings\r\n  useEffect(() => {\r\n    const inputAmount = getValueAsEthersBn(value)\r\n    const hasSufficientBalance = inputAmount.gt(0) && inputAmount.lte(maxBalance)\r\n\r\n    if (!hasSufficientBalance) {\r\n      setErrorMessage({ key: 'Insufficient BNB balance' })\r\n    } else if (inputAmount.gt(0) && inputAmount.lt(minBetAmount)) {\r\n      setErrorMessage({\r\n        key: 'A minimum amount of %num% %token% is required',\r\n        data: { num: formatBigNumber(minBetAmount), token: 'BNB' },\r\n      })\r\n    } else {\r\n      setErrorMessage(null)\r\n    }\r\n  }, [value, maxBalance, minBetAmount, setErrorMessage])\r\n\r\n  return (\r\n    <Card onMouseOver={handleMouseOver} onMouseOut={handleMouseOut}>\r\n      <CardHeader p=\"16px\">\r\n        <Flex alignItems=\"center\">\r\n          <IconButton variant=\"text\" scale=\"sm\" onClick={handleGoBack} mr=\"8px\">\r\n            <ArrowBackIcon width=\"24px\" />\r\n          </IconButton>\r\n          <FlexRow>\r\n            <Heading scale=\"md\">{t('Set Position')}</Heading>\r\n          </FlexRow>\r\n          <PositionTag betPosition={position} onClick={togglePosition}>\r\n            {position === BetPosition.BULL ? t('Up') : t('Down')}\r\n          </PositionTag>\r\n        </Flex>\r\n      </CardHeader>\r\n      <CardBody py=\"16px\">\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text textAlign=\"right\" color=\"textSubtle\">\r\n            {t('Commit')}:\r\n          </Text>\r\n          <Flex alignItems=\"center\">\r\n            <BinanceIcon mr=\"4px  \" />\r\n            <Text bold textTransform=\"uppercase\">\r\n              BNB\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n        <BalanceInput\r\n          value={value}\r\n          onUserInput={handleInputChange}\r\n          isWarning={showFieldWarning}\r\n          inputProps={{ disabled: !account || isTxPending }}\r\n        />\r\n        {showFieldWarning && (\r\n          <Text color=\"failure\" fontSize=\"12px\" mt=\"4px\" textAlign=\"right\">\r\n            {t(errorMessage.key, errorMessage.data)}\r\n          </Text>\r\n        )}\r\n        <Text textAlign=\"right\" mb=\"16px\" color=\"textSubtle\" fontSize=\"12px\" style={{ height: '18px' }}>\r\n          {account && t('Balance: %balance%', { balance: balanceDisplay })}\r\n        </Text>\r\n        <Slider\r\n          name=\"balance\"\r\n          min={0}\r\n          max={100}\r\n          value={percent}\r\n          onValueChanged={handlePercentChange}\r\n          valueLabel={account ? `${percent.toFixed(percent > 0 ? 1 : 0)}%` : ''}\r\n          step={0.01}\r\n          disabled={!account || isTxPending}\r\n          mb=\"4px\"\r\n          className={!account || isTxPending ? '' : 'swiper-no-swiping'}\r\n        />\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\r\n          {percentShortcuts.map((percentShortcut) => {\r\n            const handleClick = () => {\r\n              handlePercentChange(percentShortcut)\r\n            }\r\n\r\n            return (\r\n              <Button\r\n                key={percentShortcut}\r\n                scale=\"xs\"\r\n                variant=\"tertiary\"\r\n                onClick={handleClick}\r\n                disabled={!account || isTxPending}\r\n                style={{ flex: 1 }}\r\n              >\r\n                {`${percentShortcut}%`}\r\n              </Button>\r\n            )\r\n          })}\r\n          <Button\r\n            scale=\"xs\"\r\n            variant=\"tertiary\"\r\n            onClick={() => handlePercentChange(100)}\r\n            disabled={!account || isTxPending}\r\n          >\r\n            {t('Max')}\r\n          </Button>\r\n        </Flex>\r\n        <Box mb=\"8px\">\r\n          {account ? (\r\n            <Button\r\n              width=\"100%\"\r\n              disabled={!account || disabled}\r\n              onClick={handleEnterPosition}\r\n              isLoading={isTxPending}\r\n              endIcon={isTxPending ? <AutoRenewIcon color=\"currentColor\" spin /> : null}\r\n            >\r\n              {t(key)}\r\n            </Button>\r\n          ) : (\r\n            <ConnectWalletButton width=\"100%\" />\r\n          )}\r\n        </Box>\r\n        <Text as=\"p\" fontSize=\"12px\" lineHeight={1} color=\"textSubtle\">\r\n          {t('You wont be able to remove or change your position once you enter it.')}\r\n        </Text>\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SetPositionCard\r\n","import React, { useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  PlayCircleOutlineIcon,\r\n  Button,\r\n  useTooltip,\r\n  ArrowUpIcon,\r\n  ArrowDownIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { BetPosition, NodeLedger, NodeRound } from 'state/types'\r\nimport { fetchLedgerData } from 'state/predictions'\r\nimport { ROUND_BUFFER } from 'state/predictions/config'\r\nimport useToast from 'hooks/useToast'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport CardFlip from '../CardFlip'\r\nimport { formatBnbv2 } from '../../helpers'\r\nimport { RoundResultBox, PrizePoolRow } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader, { getBorderBackground } from './CardHeader'\r\nimport SetPositionCard from './SetPositionCard'\r\n\r\ninterface OpenRoundCardProps {\r\n  round: NodeRound\r\n  betAmount?: NodeLedger['amount']\r\n  hasEnteredUp: boolean\r\n  hasEnteredDown: boolean\r\n  bullMultiplier: string\r\n  bearMultiplier: string\r\n}\r\n\r\ninterface State {\r\n  isSettingPosition: boolean\r\n  position: BetPosition\r\n}\r\n\r\nconst OpenRoundCard: React.FC<OpenRoundCardProps> = ({\r\n  round,\r\n  betAmount,\r\n  hasEnteredUp,\r\n  hasEnteredDown,\r\n  bullMultiplier,\r\n  bearMultiplier,\r\n}) => {\r\n  const [state, setState] = useState<State>({\r\n    isSettingPosition: false,\r\n    position: BetPosition.BULL,\r\n  })\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { toastSuccess } = useToast()\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const { isSettingPosition, position } = state\r\n  const isBufferPhase = Date.now() > (round.lockTimestamp + ROUND_BUFFER) * 1000\r\n  const positionDisplay = position === BetPosition.BULL ? t('Up').toUpperCase() : t('Down').toUpperCase()\r\n  const { targetRef, tooltipVisible, tooltip } = useTooltip(\r\n    <div style={{ whiteSpace: 'nowrap' }}>{`${formatBnbv2(betAmount)} BNB`}</div>,\r\n    { placement: 'top' },\r\n  )\r\n\r\n  const getHasEnteredPosition = () => {\r\n    if (hasEnteredUp || hasEnteredDown) {\r\n      return false\r\n    }\r\n\r\n    if (round.lockPrice !== null) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  const canEnterPosition = getHasEnteredPosition()\r\n\r\n  const handleBack = () =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isSettingPosition: false,\r\n    }))\r\n\r\n  const handleSetPosition = (newPosition: BetPosition) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isSettingPosition: true,\r\n      position: newPosition,\r\n    }))\r\n  }\r\n\r\n  const togglePosition = () => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      position: prevState.position === BetPosition.BULL ? BetPosition.BEAR : BetPosition.BULL,\r\n    }))\r\n  }\r\n\r\n  const handleSuccess = async (hash: string) => {\r\n    await dispatch(fetchLedgerData({ account, epochs: [round.epoch] }))\r\n\r\n    handleBack()\r\n\r\n    toastSuccess(\r\n      t('Success!'),\r\n      <ToastDescriptionWithTx txHash={hash}>\r\n        {t('%position% position entered', {\r\n          position: positionDisplay,\r\n        })}\r\n      </ToastDescriptionWithTx>,\r\n    )\r\n  }\r\n\r\n  const getPositionEnteredIcon = () => {\r\n    return position === BetPosition.BULL ? <ArrowUpIcon color=\"currentColor\" /> : <ArrowDownIcon color=\"currentColor\" />\r\n  }\r\n\r\n  return (\r\n    <CardFlip isFlipped={isSettingPosition} height=\"404px\">\r\n      <Card borderBackground={getBorderBackground(theme, 'next')}>\r\n        <CardHeader\r\n          status=\"next\"\r\n          epoch={round.epoch}\r\n          icon={<PlayCircleOutlineIcon color=\"white\" mr=\"4px\" width=\"21px\" />}\r\n          title={t('Next')}\r\n        />\r\n        <CardBody p=\"16px\">\r\n          <MultiplierArrow betAmount={betAmount} multiplier={bullMultiplier} hasEntered={hasEnteredUp} />\r\n          <RoundResultBox isNext={canEnterPosition} isLive={!canEnterPosition}>\r\n            {canEnterPosition ? (\r\n              <>\r\n                <PrizePoolRow totalAmount={round.totalAmount} mb=\"8px\" />\r\n                <Button\r\n                  variant=\"success\"\r\n                  width=\"100%\"\r\n                  onClick={() => handleSetPosition(BetPosition.BULL)}\r\n                  mb=\"4px\"\r\n                  disabled={!canEnterPosition || isBufferPhase}\r\n                >\r\n                  {t('Enter UP')}\r\n                </Button>\r\n                <Button\r\n                  variant=\"danger\"\r\n                  width=\"100%\"\r\n                  onClick={() => handleSetPosition(BetPosition.BEAR)}\r\n                  disabled={!canEnterPosition || isBufferPhase}\r\n                >\r\n                  {t('Enter DOWN')}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div ref={targetRef}>\r\n                  <Button disabled startIcon={getPositionEnteredIcon()} width=\"100%\" mb=\"8px\">\r\n                    {t('%position% Entered', { position: positionDisplay })}\r\n                  </Button>\r\n                </div>\r\n                <PrizePoolRow totalAmount={round.totalAmount} />\r\n                {tooltipVisible && tooltip}\r\n              </>\r\n            )}\r\n          </RoundResultBox>\r\n          <MultiplierArrow\r\n            betAmount={betAmount}\r\n            multiplier={bearMultiplier}\r\n            betPosition={BetPosition.BEAR}\r\n            hasEntered={hasEnteredDown}\r\n          />\r\n        </CardBody>\r\n      </Card>\r\n      <SetPositionCard\r\n        onBack={handleBack}\r\n        onSuccess={handleSuccess}\r\n        position={position}\r\n        togglePosition={togglePosition}\r\n        epoch={round.epoch}\r\n      />\r\n    </CardFlip>\r\n  )\r\n}\r\n\r\nexport default OpenRoundCard\r\n","import { useCallback, useEffect, useState } from 'react'\r\nimport useIsWindowVisible from 'hooks/useIsWindowVisible'\r\n\r\nconst getNow = () => Math.floor(Date.now() / 1000)\r\n\r\n/**\r\n * Consider this moving up to the global level\r\n */\r\nconst useCountdown = (timestamp: number) => {\r\n  const [secondsRemaining, setSecondsRemaining] = useState(() => {\r\n    return timestamp - getNow()\r\n  })\r\n  const [isPaused, setIsPaused] = useState(false)\r\n  const isWindowVisible = useIsWindowVisible()\r\n\r\n  const pause = useCallback(() => setIsPaused(true), [setIsPaused])\r\n  const unpause = useCallback(() => setIsPaused(false), [setIsPaused])\r\n\r\n  useEffect(() => {\r\n    let timer: ReturnType<typeof setTimeout>\r\n\r\n    if (!isPaused && secondsRemaining > 0) {\r\n      timer = setTimeout(() => {\r\n        setSecondsRemaining((prevSecondsRemaining) => prevSecondsRemaining - 1)\r\n      }, 1000)\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timer)\r\n    }\r\n  }, [secondsRemaining, isPaused, setSecondsRemaining])\r\n\r\n  useEffect(() => {\r\n    setSecondsRemaining(timestamp - getNow())\r\n  }, [timestamp, setSecondsRemaining])\r\n\r\n  // Pause the timer if the tab becomes inactive to avoid it becoming out of sync\r\n  useEffect(() => {\r\n    if (isWindowVisible) {\r\n      setSecondsRemaining(timestamp - getNow())\r\n      unpause()\r\n    } else {\r\n      pause()\r\n    }\r\n  }, [pause, unpause, timestamp, setSecondsRemaining, isWindowVisible])\r\n\r\n  return { secondsRemaining, pause, unpause }\r\n}\r\n\r\nexport default useCountdown\r\n","import React from 'react'\r\nimport { Card, CardBody, Text, WaitIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { NodeRound, BetPosition } from 'state/types'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useGetIntervalSeconds } from 'state/predictions/hooks'\r\nimport { ROUND_BUFFER } from 'state/predictions/config'\r\nimport { formatRoundTime } from '../../helpers'\r\nimport useCountdown from '../../hooks/useCountdown'\r\nimport { RoundResultBox } from '../RoundResult'\r\nimport MultiplierArrow from './MultiplierArrow'\r\nimport CardHeader, { getBorderBackground } from './CardHeader'\r\n\r\ninterface SoonRoundCardProps {\r\n  round: NodeRound\r\n}\r\n\r\nconst SoonRoundCard: React.FC<SoonRoundCardProps> = ({ round }) => {\r\n  const intervalSeconds = useGetIntervalSeconds()\r\n  const { secondsRemaining } = useCountdown(round.startTimestamp + intervalSeconds + ROUND_BUFFER)\r\n  const countdown = formatRoundTime(secondsRemaining)\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n\r\n  return (\r\n    <Card borderBackground={getBorderBackground(theme, 'soon')}>\r\n      <CardHeader status=\"soon\" icon={<WaitIcon mr=\"4px\" width=\"21px\" />} title={t('Later')} epoch={round.epoch} />\r\n      <CardBody p=\"16px\">\r\n        <MultiplierArrow isDisabled />\r\n        <RoundResultBox>\r\n          <Text textAlign=\"center\">\r\n            <Text bold>{t('Entry starts')}</Text>\r\n            <Text fontSize=\"24px\" bold>\r\n              {`~${countdown}`}\r\n            </Text>\r\n          </Text>\r\n        </RoundResultBox>\r\n        <MultiplierArrow betPosition={BetPosition.BEAR} isDisabled />\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SoonRoundCard\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetBetByEpoch, useGetCurrentEpoch } from 'state/predictions/hooks'\r\nimport { BetPosition, NodeRound } from 'state/types'\r\nimport { getMultiplierV2 } from '../../helpers'\r\nimport ExpiredRoundCard from './ExpiredRoundCard'\r\nimport LiveRoundCard from './LiveRoundCard'\r\nimport OpenRoundCard from './OpenRoundCard'\r\nimport SoonRoundCard from './SoonRoundCard'\r\n\r\ninterface RoundCardProps {\r\n  round: NodeRound\r\n}\r\n\r\nconst RoundCard: React.FC<RoundCardProps> = ({ round }) => {\r\n  const { epoch, lockPrice, closePrice, totalAmount, bullAmount, bearAmount } = round\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const { account } = useWeb3React()\r\n  const ledger = useGetBetByEpoch(account, epoch)\r\n  const hasEntered = ledger ? ledger.amount.gt(0) : false\r\n  const hasEnteredUp = hasEntered && ledger.position === BetPosition.BULL\r\n  const hasEnteredDown = hasEntered && ledger.position === BetPosition.BEAR\r\n  const hasClaimedUp = hasEntered && ledger.claimed && ledger.position === BetPosition.BULL\r\n  const hasClaimedDown = hasEntered && ledger.claimed && ledger.position === BetPosition.BEAR\r\n\r\n  const bullMultiplier = getMultiplierV2(totalAmount, bullAmount)\r\n  const bearMultiplier = getMultiplierV2(totalAmount, bearAmount)\r\n\r\n  const formattedBullMultiplier = bullMultiplier.toUnsafeFloat().toFixed(bullMultiplier.isZero() ? 0 : 2)\r\n  const formattedBearMultiplier = bearMultiplier.toUnsafeFloat().toFixed(bearMultiplier.isZero() ? 0 : 2)\r\n\r\n  // Next (open) round\r\n  if (epoch === currentEpoch && lockPrice === null) {\r\n    return (\r\n      <OpenRoundCard\r\n        round={round}\r\n        hasEnteredDown={hasEnteredDown}\r\n        hasEnteredUp={hasEnteredUp}\r\n        betAmount={ledger?.amount}\r\n        bullMultiplier={formattedBullMultiplier}\r\n        bearMultiplier={formattedBearMultiplier}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Live round\r\n  if (closePrice === null && epoch === currentEpoch - 1) {\r\n    return (\r\n      <LiveRoundCard\r\n        betAmount={ledger?.amount}\r\n        hasEnteredDown={hasEnteredDown}\r\n        hasEnteredUp={hasEnteredUp}\r\n        round={round}\r\n        bullMultiplier={formattedBullMultiplier}\r\n        bearMultiplier={formattedBearMultiplier}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Fake future rounds\r\n  if (epoch > currentEpoch) {\r\n    return <SoonRoundCard round={round} />\r\n  }\r\n\r\n  // Past rounds\r\n  return (\r\n    <ExpiredRoundCard\r\n      round={round}\r\n      hasEnteredDown={hasEnteredDown}\r\n      hasEnteredUp={hasEnteredUp}\r\n      hasClaimedDown={hasClaimedDown}\r\n      hasClaimedUp={hasClaimedUp}\r\n      betAmount={ledger?.amount}\r\n      bullMultiplier={formattedBullMultiplier}\r\n      bearMultiplier={formattedBearMultiplier}\r\n    />\r\n  )\r\n}\r\n\r\nexport default RoundCard\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { useCountUp } from 'react-countup'\r\nimport styled from 'styled-components'\r\nimport { BnbUsdtPairTokenIcon, Box, Flex, PocketWatchIcon, Text } from '@pancakeswap/uikit'\r\nimport { ROUND_BUFFER } from 'state/predictions/config'\r\nimport { formatBigNumberToFixed } from 'utils/formatBalance'\r\nimport { useGetCurrentRoundLockTimestamp, useGetLastOraclePrice } from 'state/predictions/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatRoundTime } from '../helpers'\r\nimport useCountdown from '../hooks/useCountdown'\r\n\r\nconst Token = styled(Box)`\r\n  margin-top: -24px;\r\n  position: absolute;\r\n  top: 50%;\r\n  z-index: 30;\r\n\r\n  & > svg {\r\n    height: 48px;\r\n    width: 48px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    margin-top: -32px;\r\n\r\n    & > svg {\r\n      height: 64px;\r\n      width: 64px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Title = styled(Text)`\r\n  font-size: 16px;\r\n  line-height: 21px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    font-size: 20px;\r\n    line-height: 22px;\r\n  }\r\n`\r\n\r\nconst ClosingTitle = styled(Text)`\r\n  font-size: 9px;\r\n  line-height: 21px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    font-size: 16px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    font-size: 20px;\r\n    line-height: 22px;\r\n  }\r\n`\r\n\r\nconst Price = styled(Text)`\r\n  height: 18px;\r\n  justify-self: start;\r\n  width: 70px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    text-align: center;\r\n  }\r\n`\r\n\r\nconst Interval = styled(Text)`\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    text-align: center;\r\n    width: 32px;\r\n  }\r\n`\r\n\r\nconst Label = styled(Flex)<{ dir: 'left' | 'right' }>`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  box-shadow: ${({ theme }) => theme.shadows.level1};\r\n  align-items: ${({ dir }) => (dir === 'right' ? 'flex-end' : 'flex-start')};\r\n  border-radius: ${({ dir }) => (dir === 'right' ? '8px 8px 8px 24px' : '8px 8px 24px 8px')};\r\n  flex-direction: column;\r\n  overflow: initial;\r\n  padding: ${({ dir }) => (dir === 'right' ? '0 28px 0 8px' : '0 8px 0 24px')};\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    align-items: center;\r\n    border-radius: ${({ theme }) => theme.radii.card};\r\n    flex-direction: row;\r\n    padding: ${({ dir }) => (dir === 'right' ? '8px 40px 8px 8px' : '8px 8px 8px 40px')};\r\n  }\r\n`\r\n\r\nexport const PricePairLabel: React.FC = () => {\r\n  const price = useGetLastOraclePrice()\r\n  const priceAsNumber = parseFloat(formatBigNumberToFixed(price, 3, 8))\r\n  const { countUp, update } = useCountUp({\r\n    start: 0,\r\n    end: priceAsNumber,\r\n    duration: 1,\r\n    decimals: 3,\r\n  })\r\n\r\n  const updateRef = useRef(update)\r\n\r\n  useEffect(() => {\r\n    updateRef.current(priceAsNumber)\r\n  }, [priceAsNumber, updateRef])\r\n\r\n  return (\r\n    <Box pl=\"24px\" position=\"relative\" display=\"inline-block\">\r\n      <Token left={0}>\r\n        <BnbUsdtPairTokenIcon />\r\n      </Token>\r\n      <Label dir=\"left\">\r\n        <Title bold textTransform=\"uppercase\">\r\n          BNBUSDT\r\n        </Title>\r\n        <Price fontSize=\"12px\">{`$${countUp}`}</Price>\r\n      </Label>\r\n    </Box>\r\n  )\r\n}\r\n\r\ninterface TimerLabelProps {\r\n  interval: string\r\n  unit: 'm' | 'h' | 'd'\r\n}\r\n\r\nexport const TimerLabel: React.FC<TimerLabelProps> = ({ interval, unit }) => {\r\n  const currentRoundLockTimestamp = useGetCurrentRoundLockTimestamp()\r\n  const { secondsRemaining } = useCountdown(currentRoundLockTimestamp + ROUND_BUFFER)\r\n  const countdown = formatRoundTime(secondsRemaining)\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Box pr=\"24px\" position=\"relative\">\r\n      <Label dir=\"right\">\r\n        {secondsRemaining !== 0 ? (\r\n          <Title bold color=\"secondary\">\r\n            {countdown}\r\n          </Title>\r\n        ) : (\r\n          <ClosingTitle bold color=\"secondary\">\r\n            {t('Closing')}\r\n          </ClosingTitle>\r\n        )}\r\n        <Interval fontSize=\"12px\">{`${interval}${t(unit)}`}</Interval>\r\n      </Label>\r\n      <Token right={0}>\r\n        <PocketWatchIcon />\r\n      </Token>\r\n    </Box>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { ArrowBackIcon, ArrowForwardIcon, BunnyCardsIcon, Flex, IconButton } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useGetCurrentEpoch, useGetSortedRounds } from 'state/predictions/hooks'\r\nimport useSwiper from '../hooks/useSwiper'\r\n\r\nconst StyledPrevNextNav = styled(Flex)`\r\n  align-items: center;\r\n  display: none;\r\n  justify-content: space-between;\r\n  overflow: initial;\r\n  position: relative;\r\n  width: 128px;\r\n\r\n  box-shadow: ${({ theme }) => theme.shadows.level1};\r\n  border-radius: ${({ theme }) => theme.radii.default};\r\n  background-color: ${({ theme }) => theme.card.background};\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: flex;\r\n  }\r\n`\r\n\r\nconst Icon = styled.div`\r\n  cursor: pointer;\r\n  left: 50%;\r\n  margin-left: -32px;\r\n  position: absolute;\r\n`\r\n\r\nconst PrevNextNav = () => {\r\n  const { swiper } = useSwiper()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const rounds = useGetSortedRounds()\r\n\r\n  const handlePrevSlide = () => {\r\n    swiper.slidePrev()\r\n  }\r\n\r\n  const handleNextSlide = () => {\r\n    swiper.slideNext()\r\n  }\r\n\r\n  const handleSlideToLive = () => {\r\n    const currentEpochIndex = rounds.findIndex((round) => round.epoch === currentEpoch)\r\n\r\n    swiper.slideTo(currentEpochIndex - 1)\r\n    swiper.update()\r\n  }\r\n\r\n  return (\r\n    <StyledPrevNextNav>\r\n      <IconButton variant=\"text\" scale=\"sm\" onClick={handlePrevSlide}>\r\n        <ArrowBackIcon color=\"primary\" width=\"24px\" />\r\n      </IconButton>\r\n      <Icon onClick={handleSlideToLive}>\r\n        <BunnyCardsIcon width=\"64px\" />\r\n      </Icon>\r\n      <IconButton variant=\"text\" scale=\"sm\" onClick={handleNextSlide}>\r\n        <ArrowForwardIcon color=\"primary\" width=\"24px\" />\r\n      </IconButton>\r\n    </StyledPrevNextNav>\r\n  )\r\n}\r\n\r\nexport default PrevNextNav\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { AutoRenewIcon, HistoryIcon, IconButton } from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { setHistoryPaneState } from 'state/predictions'\r\nimport { useGetIsFetchingHistory } from 'state/predictions/hooks'\r\n\r\nconst HistoryButton = () => {\r\n  const isFetchingHistory = useGetIsFetchingHistory()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleClick = () => {\r\n    dispatch(setHistoryPaneState(true))\r\n  }\r\n\r\n  return (\r\n    <IconButton\r\n      id=\"prediction-history-button\"\r\n      variant=\"subtle\"\r\n      onClick={handleClick}\r\n      isLoading={isFetchingHistory}\r\n      disabled={!account}\r\n    >\r\n      {isFetchingHistory ? <AutoRenewIcon spin color=\"white\" /> : <HistoryIcon width=\"24px\" color=\"white\" />}\r\n    </IconButton>\r\n  )\r\n}\r\n\r\nexport default HistoryButton\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { Flex, HelpIcon, Button, PrizeIcon } from '@pancakeswap/uikit'\r\nimport FlexRow from './FlexRow'\r\nimport { PricePairLabel, TimerLabel } from './Label'\r\nimport PrevNextNav from './PrevNextNav'\r\nimport HistoryButton from './HistoryButton'\r\n\r\nconst SetCol = styled.div`\r\n  flex: none;\r\n  width: auto;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    width: 270px;\r\n  }\r\n`\r\n\r\nconst HelpButtonWrapper = styled.div`\r\n  order: 1;\r\n  margin: 0 2px 0 8px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    order: 2;\r\n    margin: 0 0 0 8px;\r\n  }\r\n`\r\n\r\nconst TimerLabelWrapper = styled.div`\r\n  order: 3;\r\n  width: 100px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    order: 1;\r\n    width: auto;\r\n  }\r\n`\r\n\r\nconst LeaderboardButtonWrapper = styled.div`\r\n  display: block;\r\n\r\n  order: 2;\r\n  margin: 0 8px 0 0;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    order: 3;\r\n    margin: 0 0 0 8px;\r\n  }\r\n`\r\n\r\nconst ButtonWrapper = styled.div`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: block;\r\n    margin-left: 8px;\r\n  }\r\n`\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <FlexRow alignItems=\"center\" p=\"16px\">\r\n      <SetCol>\r\n        <PricePairLabel />\r\n      </SetCol>\r\n      <FlexRow justifyContent=\"center\">\r\n        <PrevNextNav />\r\n      </FlexRow>\r\n      <SetCol>\r\n        <Flex alignItems=\"center\" justifyContent=\"flex-end\">\r\n          <TimerLabelWrapper>\r\n            <TimerLabel interval=\"5\" unit=\"m\" />\r\n          </TimerLabelWrapper>\r\n          <HelpButtonWrapper>\r\n            <Button\r\n              variant=\"subtle\"\r\n              as=\"a\"\r\n              href=\"https://docs.pancakeswap.finance/products/prediction\"\r\n              target=\"_blank\"\r\n              rel=\"noreferrer noopener\"\r\n              width=\"48px\"\r\n            >\r\n              <HelpIcon width=\"24px\" color=\"white\" />\r\n            </Button>\r\n          </HelpButtonWrapper>\r\n          <LeaderboardButtonWrapper>\r\n            <Button as={Link} variant=\"subtle\" to=\"/prediction/leaderboard\" width=\"48px\">\r\n              <PrizeIcon color=\"white\" />\r\n            </Button>\r\n          </LeaderboardButtonWrapper>\r\n          <ButtonWrapper style={{ order: 4 }}>\r\n            <HistoryButton />\r\n          </ButtonWrapper>\r\n        </Flex>\r\n      </SetCol>\r\n    </FlexRow>\r\n  )\r\n}\r\n\r\nexport default Menu\r\n","import { useEffect } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport usePreviousValue from 'hooks/usePreviousValue'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetCurrentEpoch, useGetSortedRounds } from 'state/predictions/hooks'\r\nimport useSwiper from './useSwiper'\r\n\r\n/**\r\n * Hooks for actions to be performed when the round changes\r\n */\r\nconst useOnNextRound = () => {\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const rounds = useGetSortedRounds()\r\n  const { account } = useWeb3React()\r\n  const previousEpoch = usePreviousValue(currentEpoch)\r\n  const { swiper } = useSwiper()\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    if (swiper && currentEpoch !== undefined && previousEpoch !== undefined && currentEpoch !== previousEpoch) {\r\n      const currentEpochIndex = rounds.findIndex((round) => round.epoch === currentEpoch)\r\n\r\n      // Slide to the current LIVE round which is always the one before the current round\r\n      swiper.slideTo(currentEpochIndex - 1)\r\n      swiper.update()\r\n    }\r\n  }, [previousEpoch, currentEpoch, rounds, swiper, account, dispatch])\r\n}\r\n\r\nexport default useOnNextRound\r\n","import { useEffect } from 'react'\r\nimport usePrevious from 'hooks/usePreviousValue'\r\nimport useSwiper from './useSwiper'\r\nimport { PageView } from '../types'\r\n\r\n/**\r\n * Hooks for actions to be performed when the view changes (mobile)\r\n */\r\nconst useOnViewChange = (liveSwiperIndex: number, view?: PageView) => {\r\n  const { swiper } = useSwiper()\r\n  const prevView = usePrevious(view)\r\n\r\n  useEffect(() => {\r\n    if (swiper && view !== prevView && swiper.activeIndex !== liveSwiperIndex) {\r\n      swiper.slideTo(liveSwiperIndex, 0.1)\r\n    }\r\n  }, [swiper, prevView, view, liveSwiperIndex])\r\n}\r\n\r\nexport default useOnViewChange\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport SwiperCore, { Keyboard, Mousewheel } from 'swiper'\r\nimport { Swiper, SwiperSlide } from 'swiper/react'\r\nimport { Box } from '@pancakeswap/uikit'\r\nimport { useGetCurrentEpoch, useGetSortedRounds } from 'state/predictions/hooks'\r\nimport 'swiper/swiper.min.css'\r\nimport RoundCard from './components/RoundCard'\r\nimport Menu from './components/Menu'\r\nimport useSwiper from './hooks/useSwiper'\r\nimport useOnNextRound from './hooks/useOnNextRound'\r\nimport useOnViewChange from './hooks/useOnViewChange'\r\nimport { PageView } from './types'\r\n\r\nSwiperCore.use([Keyboard, Mousewheel])\r\n\r\nconst StyledSwiper = styled.div`\r\n  .swiper-wrapper {\r\n    align-items: center;\r\n    display: flex;\r\n  }\r\n\r\n  .swiper-slide {\r\n    width: 320px;\r\n  }\r\n`\r\nconst Positions: React.FC<{ view?: PageView }> = ({ view }) => {\r\n  const { setSwiper } = useSwiper()\r\n  const rounds = useGetSortedRounds()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const previousEpoch = currentEpoch > 0 ? currentEpoch - 1 : currentEpoch\r\n  const previousRound = rounds.find((round) => round.epoch === previousEpoch)\r\n  const swiperIndex = rounds.indexOf(previousRound)\r\n\r\n  useOnNextRound()\r\n  useOnViewChange(swiperIndex, view)\r\n\r\n  return (\r\n    <Box overflow=\"hidden\">\r\n      <Menu />\r\n      <StyledSwiper>\r\n        <Swiper\r\n          initialSlide={swiperIndex}\r\n          onSwiper={setSwiper}\r\n          spaceBetween={16}\r\n          slidesPerView=\"auto\"\r\n          freeMode\r\n          freeModeSticky\r\n          centeredSlides\r\n          freeModeMomentumRatio={0.25}\r\n          freeModeMomentumVelocityRatio={0.5}\r\n          mousewheel\r\n          keyboard\r\n          resizeObserver\r\n        >\r\n          {rounds.map((round) => (\r\n            <SwiperSlide key={round.epoch}>\r\n              <RoundCard round={round} />\r\n            </SwiperSlide>\r\n          ))}\r\n        </Swiper>\r\n      </StyledSwiper>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Positions\r\n","export enum PageView {\r\n  POSITIONS = 'positions',\r\n  HISTORY = 'history',\r\n  CHART = 'chart',\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport Split from 'split-grid'\r\nimport { ArrowDownIcon, Button, ChartIcon } from '@pancakeswap/uikit'\r\nimport debounce from 'lodash/debounce'\r\nimport delay from 'lodash/delay'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/predictions/hooks'\r\nimport { setChartPaneState } from 'state/predictions'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { TradingViewLabel } from 'components/TradingView'\r\nimport TradingView from './components/TradingView'\r\nimport { ErrorNotification, PauseNotification } from './components/Notification'\r\nimport History from './History'\r\nimport Positions from './Positions'\r\n\r\n// The value to set the chart when the user clicks the chart tab at the bottom\r\nconst GRID_TEMPLATE_ROW = '1.2fr 24px .8fr'\r\n\r\nconst ExpandChartButton = styled(Button)`\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  border-bottom-left-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  bottom: 24px;\r\n  color: ${({ theme }) => theme.colors.text};\r\n  display: none;\r\n  left: 32px;\r\n  position: absolute;\r\n  z-index: 50;\r\n\r\n  &:hover:not(:disabled):not(.pancake-button--disabled):not(.pancake-button--disabled):not(:active) {\r\n    background-color: ${({ theme }) => theme.card.background};\r\n    opacity: 1;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: inline-flex;\r\n  }\r\n`\r\n\r\nconst SplitWrapper = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr 24px 0;\r\n  flex: 1;\r\n  overflow: hidden;\r\n`\r\n\r\nconst ChartPane = styled.div`\r\n  overflow: hidden;\r\n  position: relative;\r\n`\r\n\r\nconst HistoryPane = styled.div<{ isHistoryPaneOpen: boolean }>`\r\n  flex: none;\r\n  overflow: hidden;\r\n  transition: width 200ms ease-in-out;\r\n  width: ${({ isHistoryPaneOpen }) => (isHistoryPaneOpen ? '384px' : 0)};\r\n`\r\n\r\nconst StyledDesktop = styled.div`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: flex;\r\n    height: calc(100vh - 100px);\r\n  }\r\n`\r\n\r\nconst PositionPane = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  max-width: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n\r\n  & > div {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n`\r\n\r\nconst Gutter = styled.div`\r\n  background: ${({ theme }) => theme.colors.dropdown};\r\n  cursor: row-resize;\r\n  height: 24px;\r\n  position: relative;\r\n\r\n  &:before {\r\n    background-color: ${({ theme }) => theme.colors.textSubtle};\r\n    border-radius: 8px;\r\n    content: '';\r\n    height: 4px;\r\n    left: 50%;\r\n    margin-left: -32px;\r\n    position: absolute;\r\n    top: 10px;\r\n    width: 64px;\r\n  }\r\n`\r\n\r\nconst Desktop: React.FC = () => {\r\n  const splitWrapperRef = useRef<HTMLDivElement>()\r\n  const chartRef = useRef<HTMLDivElement>()\r\n  const gutterRef = useRef<HTMLDivElement>()\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n  const { t } = useTranslation()\r\n  const status = useGetPredictionsStatus()\r\n\r\n  const toggleChartPane = () => {\r\n    const newChartPaneState = !isChartPaneOpen\r\n\r\n    if (newChartPaneState) {\r\n      splitWrapperRef.current.style.transition = 'grid-template-rows 150ms'\r\n      splitWrapperRef.current.style.gridTemplateRows = GRID_TEMPLATE_ROW\r\n\r\n      // Purely comedic: We only want to animate if we are clicking the open chart button\r\n      // If we keep the transition on the resizing becomes very choppy\r\n      delay(() => {\r\n        splitWrapperRef.current.style.transition = ''\r\n      }, 150)\r\n    }\r\n\r\n    dispatch(setChartPaneState(newChartPaneState))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const threshold = 100\r\n    const handleDrag = debounce(() => {\r\n      const { height } = chartRef.current.getBoundingClientRect()\r\n\r\n      // If the height of the chart pane goes below the \"snapOffset\" threshold mark the chart pane as closed\r\n      dispatch(setChartPaneState(height > threshold))\r\n    }, 50)\r\n\r\n    const split = Split({\r\n      dragInterval: 1,\r\n      snapOffset: threshold,\r\n      onDrag: handleDrag,\r\n      rowGutters: [\r\n        {\r\n          track: 1,\r\n          element: gutterRef.current,\r\n        },\r\n      ],\r\n    })\r\n\r\n    return () => {\r\n      split.destroy()\r\n    }\r\n  }, [gutterRef, chartRef, dispatch])\r\n\r\n  return (\r\n    <>\r\n      {!isChartPaneOpen && (\r\n        <ExpandChartButton\r\n          variant=\"tertiary\"\r\n          scale=\"sm\"\r\n          startIcon={isChartPaneOpen ? <ArrowDownIcon /> : <ChartIcon />}\r\n          onClick={toggleChartPane}\r\n        >\r\n          {isChartPaneOpen ? t('Close') : t('Charts')}\r\n        </ExpandChartButton>\r\n      )}\r\n      <StyledDesktop>\r\n        <SplitWrapper ref={splitWrapperRef}>\r\n          <PositionPane>\r\n            {status === PredictionStatus.ERROR && <ErrorNotification />}\r\n            {status === PredictionStatus.PAUSED && <PauseNotification />}\r\n            {status === PredictionStatus.LIVE && <Positions />}\r\n          </PositionPane>\r\n          <Gutter ref={gutterRef}>\r\n            <TradingViewLabel justifyContent=\"flex-end\" symbol=\"BNBUSDT\" />\r\n          </Gutter>\r\n          <ChartPane ref={chartRef}>\r\n            <TradingView />\r\n          </ChartPane>\r\n        </SplitWrapper>\r\n        <HistoryPane isHistoryPaneOpen={isHistoryPaneOpen}>\r\n          <History />\r\n        </HistoryPane>\r\n      </StyledDesktop>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Desktop\r\n","import { useEffect, useState } from 'react'\r\nimport { ethers } from 'ethers'\r\nimport useLastUpdated from 'hooks/useLastUpdated'\r\nimport { getChainlinkOracleContract } from 'utils/contractHelpers'\r\n\r\nconst useGetLatestOraclePrice = () => {\r\n  const [price, setPrice] = useState(ethers.BigNumber.from(0))\r\n  const { lastUpdated, setLastUpdated: refresh } = useLastUpdated()\r\n\r\n  useEffect(() => {\r\n    const fetchPrice = async () => {\r\n      const contract = getChainlinkOracleContract()\r\n      const response = await contract.latestAnswer()\r\n      setPrice(response)\r\n    }\r\n\r\n    fetchPrice()\r\n  }, [lastUpdated, setPrice])\r\n\r\n  return { price, lastUpdated, refresh }\r\n}\r\n\r\nexport default useGetLatestOraclePrice\r\n","import { useEffect } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { setLastOraclePrice } from 'state/predictions'\r\nimport useGetLatestOraclePrice from './useGetLatestOraclePrice'\r\n\r\nconst usePollOraclePrice = (seconds = 10) => {\r\n  const { price, refresh } = useGetLatestOraclePrice()\r\n  const dispatch = useAppDispatch()\r\n\r\n  // Poll for the oracle price\r\n  useEffect(() => {\r\n    refresh()\r\n    const timer = setInterval(() => {\r\n      refresh()\r\n    }, seconds * 1000)\r\n\r\n    return () => {\r\n      clearInterval(timer)\r\n    }\r\n  }, [seconds, refresh])\r\n\r\n  // If the price changed update global state\r\n  useEffect(() => {\r\n    dispatch(setLastOraclePrice(price.toJSON()))\r\n  }, [price, dispatch])\r\n}\r\n\r\nexport default usePollOraclePrice\r\n","import { useEffect, useRef } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { useGetCurrentEpoch, useGetEarliestEpoch, useGetPredictionsStatus } from 'state/predictions/hooks'\r\nimport { fetchClaimableStatuses, fetchLedgerData, fetchMarketData, fetchRounds } from 'state/predictions'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { range } from 'lodash'\r\n\r\nconst POLL_TIME_IN_SECONDS = 10\r\n\r\nconst usePollPredictions = () => {\r\n  const timer = useRef<NodeJS.Timeout>(null)\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const earliestEpoch = useGetEarliestEpoch()\r\n  const status = useGetPredictionsStatus()\r\n\r\n  useEffect(() => {\r\n    // Clear old timer\r\n    if (timer.current) {\r\n      clearInterval(timer.current)\r\n    }\r\n\r\n    if (status !== PredictionStatus.INITIAL) {\r\n      timer.current = setInterval(async () => {\r\n        const liveCurrentAndRecent = [currentEpoch, currentEpoch - 1, currentEpoch - 2]\r\n\r\n        dispatch(fetchRounds(liveCurrentAndRecent))\r\n        dispatch(fetchMarketData())\r\n\r\n        if (account) {\r\n          const epochRange = range(earliestEpoch, currentEpoch + 1)\r\n          dispatch(fetchLedgerData({ account, epochs: epochRange }))\r\n          dispatch(fetchClaimableStatuses({ account, epochs: epochRange }))\r\n        }\r\n      }, POLL_TIME_IN_SECONDS * 1000)\r\n    }\r\n\r\n    return () => {\r\n      if (timer.current) {\r\n        clearInterval(timer.current)\r\n      }\r\n    }\r\n  }, [timer, account, status, currentEpoch, earliestEpoch, dispatch])\r\n}\r\n\r\nexport default usePollPredictions\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  ArrowBackIcon,\r\n  ArrowForwardIcon,\r\n  ButtonMenu,\r\n  ButtonMenuItem,\r\n  Cards,\r\n  ChartIcon,\r\n  HistoryIcon,\r\n  IconButton,\r\n} from '@pancakeswap/uikit'\r\nimport { useAppDispatch } from 'state'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/predictions/hooks'\r\nimport { setChartPaneState, setHistoryPaneState } from 'state/predictions'\r\nimport useSwiper from '../hooks/useSwiper'\r\n\r\nconst ButtonNav = styled.div`\r\n  flex: none;\r\n`\r\n\r\nconst TabNav = styled.div`\r\n  flex: 1;\r\n  text-align: center;\r\n`\r\n\r\nconst StyledMobileMenu = styled.div`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  display: flex;\r\n  flex: none;\r\n  height: 64px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst getActiveIndex = (isHistoryOpen: boolean, isChartOpen: boolean) => {\r\n  if (isHistoryOpen) {\r\n    return 2\r\n  }\r\n\r\n  if (isChartOpen) {\r\n    return 1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nconst MobileMenu = () => {\r\n  const { swiper } = useSwiper()\r\n  const isHistoryOpen = useIsHistoryPaneOpen()\r\n  const isChartOpen = useIsChartPaneOpen()\r\n  const status = useGetPredictionsStatus()\r\n  const activeIndex = getActiveIndex(isHistoryOpen, isChartOpen)\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n\r\n  const handleItemClick = (index: number) => {\r\n    switch (index) {\r\n      case 2:\r\n        dispatch(setHistoryPaneState(true))\r\n        break\r\n      case 1:\r\n        dispatch(setChartPaneState(true))\r\n        dispatch(setHistoryPaneState(false))\r\n        break\r\n      case 0:\r\n      default:\r\n        dispatch(setHistoryPaneState(false))\r\n        dispatch(setChartPaneState(false))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledMobileMenu>\r\n      <ButtonNav>\r\n        <IconButton variant=\"text\" onClick={() => swiper.slidePrev()} disabled={status !== PredictionStatus.LIVE}>\r\n          <ArrowBackIcon width=\"24px\" color=\"primary\" />\r\n        </IconButton>\r\n      </ButtonNav>\r\n      <TabNav>\r\n        <ButtonMenu activeIndex={activeIndex} scale=\"sm\" variant=\"subtle\" onItemClick={handleItemClick}>\r\n          <ButtonMenuItem>\r\n            <Cards color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n          <ButtonMenuItem>\r\n            <ChartIcon color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n          <ButtonMenuItem disabled={!account}>\r\n            <HistoryIcon color=\"currentColor\" />\r\n          </ButtonMenuItem>\r\n        </ButtonMenu>\r\n      </TabNav>\r\n      <ButtonNav>\r\n        <IconButton variant=\"text\" onClick={() => swiper.slideNext()} disabled={status !== PredictionStatus.LIVE}>\r\n          <ArrowForwardIcon width=\"24px\" color=\"primary\" />\r\n        </IconButton>\r\n      </ButtonNav>\r\n    </StyledMobileMenu>\r\n  )\r\n}\r\n\r\nexport default MobileMenu\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex } from '@pancakeswap/uikit'\r\nimport Menu from './components/Menu'\r\nimport TradingView from './components/TradingView'\r\n\r\nconst MenuWrapper = styled.div`\r\n  flex: none;\r\n`\r\n\r\nconst ChartWrapper = styled.div`\r\n  flex: 1;\r\n  height: 100%;\r\n`\r\n\r\nconst Chart = () => {\r\n  return (\r\n    <Flex flexDirection=\"column\" height=\"100%\">\r\n      <MenuWrapper>\r\n        <Menu />\r\n      </MenuWrapper>\r\n      <ChartWrapper>\r\n        <TradingView />\r\n      </ChartWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default Chart\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Flex } from '@pancakeswap/uikit'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen, useIsHistoryPaneOpen } from 'state/predictions/hooks'\r\nimport { PredictionStatus } from 'state/types'\r\nimport MobileMenu from './components/MobileMenu'\r\nimport History from './History'\r\nimport Positions from './Positions'\r\nimport Chart from './Chart'\r\nimport { ErrorNotification, PauseNotification } from './components/Notification'\r\nimport { PageView } from './types'\r\n\r\nconst StyledMobile = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  max-height: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst View = styled.div<{ isVisible: boolean }>`\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  visibility: ${({ isVisible }) => (isVisible ? 'visible' : 'hidden')};\r\n`\r\n\r\nconst getView = (isHistoryPaneOpen: boolean, isChartPaneOpen: boolean): PageView => {\r\n  if (isHistoryPaneOpen) {\r\n    return PageView.HISTORY\r\n  }\r\n\r\n  if (isChartPaneOpen) {\r\n    return PageView.CHART\r\n  }\r\n\r\n  return PageView.POSITIONS\r\n}\r\n\r\nconst Mobile: React.FC = () => {\r\n  const isHistoryPaneOpen = useIsHistoryPaneOpen()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const view = getView(isHistoryPaneOpen, isChartPaneOpen)\r\n  const status = useGetPredictionsStatus()\r\n\r\n  return (\r\n    <StyledMobile>\r\n      <Box height=\"100%\" overflow=\"hidden\" position=\"relative\">\r\n        <View isVisible={view === PageView.POSITIONS}>\r\n          <Flex alignItems=\"center\" height=\"100%\">\r\n            {status === PredictionStatus.ERROR && <ErrorNotification />}\r\n            {status === PredictionStatus.PAUSED && <PauseNotification />}\r\n            {status === PredictionStatus.LIVE && <Positions view={view} />}\r\n          </Flex>\r\n        </View>\r\n        <View isVisible={view === PageView.CHART}>\r\n          <Chart />\r\n        </View>\r\n        <View isVisible={view === PageView.HISTORY}>\r\n          <History />\r\n        </View>\r\n      </Box>\r\n      <MobileMenu />\r\n    </StyledMobile>\r\n  )\r\n}\r\n\r\nexport default Mobile\r\n","import { useMatchBreakpoints, useModal } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { PageMeta } from 'components/Layout/Page'\r\nimport PageLoader from 'components/Loader/PageLoader'\r\nimport React, { useEffect, useRef } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { useInitialBlock } from 'state/block/hooks'\r\nimport { initializePredictions } from 'state/predictions'\r\nimport { useGetPredictionsStatus, useIsChartPaneOpen } from 'state/predictions/hooks'\r\nimport { PredictionStatus } from 'state/types'\r\nimport { useUserPredictionAcceptedRisk, useUserPredictionChartDisclaimerShow } from 'state/user/hooks'\r\nimport ChartDisclaimer from './components/ChartDisclaimer'\r\nimport CollectWinningsPopup from './components/CollectWinningsPopup'\r\nimport Container from './components/Container'\r\nimport RiskDisclaimer from './components/RiskDisclaimer'\r\nimport SwiperProvider from './context/SwiperProvider'\r\nimport Desktop from './Desktop'\r\nimport usePollOraclePrice from './hooks/usePollOraclePrice'\r\nimport usePollPredictions from './hooks/usePollPredictions'\r\nimport Mobile from './Mobile'\r\n\r\nconst Predictions = () => {\r\n  const { isDesktop } = useMatchBreakpoints()\r\n  const [hasAcceptedRisk, setHasAcceptedRisk] = useUserPredictionAcceptedRisk()\r\n  const [showDisclaimer] = useUserPredictionChartDisclaimerShow()\r\n  const { account } = useWeb3React()\r\n  const status = useGetPredictionsStatus()\r\n  const isChartPaneOpen = useIsChartPaneOpen()\r\n  const dispatch = useAppDispatch()\r\n  const initialBlock = useInitialBlock()\r\n  const handleAcceptRiskSuccess = () => setHasAcceptedRisk(true)\r\n  const [onPresentRiskDisclaimer] = useModal(<RiskDisclaimer onSuccess={handleAcceptRiskSuccess} />, false)\r\n  const [onPresentChartDisclaimer] = useModal(<ChartDisclaimer />, false)\r\n\r\n  // TODO: memoize modal's handlers\r\n  const onPresentRiskDisclaimerRef = useRef(onPresentRiskDisclaimer)\r\n  const onPresentChartDisclaimerRef = useRef(onPresentChartDisclaimer)\r\n\r\n  // Disclaimer\r\n  useEffect(() => {\r\n    if (!hasAcceptedRisk) {\r\n      onPresentRiskDisclaimerRef.current()\r\n    }\r\n  }, [hasAcceptedRisk, onPresentRiskDisclaimerRef])\r\n\r\n  // Chart Disclaimer\r\n  useEffect(() => {\r\n    if (isChartPaneOpen && showDisclaimer) {\r\n      onPresentChartDisclaimerRef.current()\r\n    }\r\n  }, [onPresentChartDisclaimerRef, isChartPaneOpen, showDisclaimer])\r\n\r\n  useEffect(() => {\r\n    if (initialBlock > 0) {\r\n      // Do not start initialization until the first block has been retrieved\r\n      dispatch(initializePredictions(account))\r\n    }\r\n  }, [initialBlock, dispatch, account])\r\n\r\n  usePollPredictions()\r\n  usePollOraclePrice()\r\n\r\n  if (status === PredictionStatus.INITIAL) {\r\n    return <PageLoader />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PageMeta />\r\n      <SwiperProvider>\r\n        <Container>\r\n          {isDesktop ? <Desktop /> : <Mobile />}\r\n          <CollectWinningsPopup />\r\n        </Container>\r\n      </SwiperProvider>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Predictions\r\n","import { useEffect, useMemo } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { ethers } from 'ethers'\r\nimport { minBy, orderBy } from 'lodash'\r\nimport { isAddress } from 'utils'\r\nimport { useAppDispatch } from 'state'\r\nimport { State, NodeRound, ReduxNodeLedger, NodeLedger, ReduxNodeRound } from '../types'\r\nimport { parseBigNumberObj } from './helpers'\r\nimport { fetchAddressResult } from '.'\r\n\r\nexport const useGetRounds = () => {\r\n  const rounds = useSelector((state: State) => state.predictions.rounds)\r\n  return Object.keys(rounds).reduce((accum, epoch) => {\r\n    return {\r\n      ...accum,\r\n      [epoch]: parseBigNumberObj<ReduxNodeRound, NodeRound>(rounds[epoch]),\r\n    }\r\n  }, {}) as { [key: string]: NodeRound }\r\n}\r\n\r\nexport const useGetRound = (epoch: number) => {\r\n  const round = useSelector((state: State) => state.predictions.rounds[epoch])\r\n  return parseBigNumberObj<ReduxNodeRound, NodeRound>(round)\r\n}\r\n\r\nexport const useGetSortedRounds = () => {\r\n  const roundData = useGetRounds()\r\n  return orderBy(Object.values(roundData), ['epoch'], ['asc'])\r\n}\r\n\r\nexport const useGetBetByEpoch = (account: string, epoch: number) => {\r\n  const bets = useSelector((state: State) => state.predictions.ledgers)\r\n\r\n  if (!bets[account]) {\r\n    return null\r\n  }\r\n\r\n  if (!bets[account][epoch]) {\r\n    return null\r\n  }\r\n\r\n  return parseBigNumberObj<ReduxNodeLedger, NodeLedger>(bets[account][epoch])\r\n}\r\n\r\nexport const useGetIsClaimable = (epoch) => {\r\n  const claimableStatuses = useSelector((state: State) => state.predictions.claimableStatuses)\r\n  return claimableStatuses[epoch] || false\r\n}\r\n\r\n/**\r\n * Used to get the range of rounds to poll for\r\n */\r\nexport const useGetEarliestEpoch = () => {\r\n  return useSelector((state: State) => {\r\n    const earliestRound = minBy(Object.values(state.predictions.rounds), 'epoch')\r\n    return earliestRound?.epoch\r\n  })\r\n}\r\n\r\nexport const useIsHistoryPaneOpen = () => {\r\n  return useSelector((state: State) => state.predictions.isHistoryPaneOpen)\r\n}\r\n\r\nexport const useIsChartPaneOpen = () => {\r\n  return useSelector((state: State) => state.predictions.isChartPaneOpen)\r\n}\r\n\r\nexport const useGetCurrentEpoch = () => {\r\n  return useSelector((state: State) => state.predictions.currentEpoch)\r\n}\r\n\r\nexport const useGetIntervalSeconds = () => {\r\n  return useSelector((state: State) => state.predictions.intervalSeconds)\r\n}\r\n\r\nexport const useGetCurrentRound = () => {\r\n  const currentEpoch = useGetCurrentEpoch()\r\n  const rounds = useGetRounds()\r\n  return rounds[currentEpoch]\r\n}\r\n\r\nexport const useGetPredictionsStatus = () => {\r\n  return useSelector((state: State) => state.predictions.status)\r\n}\r\n\r\nexport const useGetHistoryFilter = () => {\r\n  return useSelector((state: State) => state.predictions.historyFilter)\r\n}\r\n\r\nexport const useGetHasHistoryLoaded = () => {\r\n  return useSelector((state: State) => state.predictions.hasHistoryLoaded)\r\n}\r\n\r\nexport const useGetCurrentHistoryPage = () => {\r\n  return useSelector((state: State) => state.predictions.currentHistoryPage)\r\n}\r\n\r\nexport const useGetMinBetAmount = () => {\r\n  const minBetAmount = useSelector((state: State) => state.predictions.minBetAmount)\r\n  return useMemo(() => ethers.BigNumber.from(minBetAmount), [minBetAmount])\r\n}\r\n\r\nexport const useGetBufferSeconds = () => {\r\n  return useSelector((state: State) => state.predictions.bufferSeconds)\r\n}\r\n\r\nexport const useGetIsFetchingHistory = () => {\r\n  return useSelector((state: State) => state.predictions.isFetchingHistory)\r\n}\r\n\r\nexport const useGetHistory = () => {\r\n  return useSelector((state: State) => state.predictions.history)\r\n}\r\n\r\nexport const useGetLastOraclePrice = () => {\r\n  const lastOraclePrice = useSelector((state: State) => state.predictions.lastOraclePrice)\r\n  return useMemo(() => {\r\n    return ethers.BigNumber.from(lastOraclePrice)\r\n  }, [lastOraclePrice])\r\n}\r\n\r\n/**\r\n * The current round's lock timestamp will not be set immediately so we return an estimate until then\r\n */\r\nexport const useGetCurrentRoundLockTimestamp = () => {\r\n  const currentRound = useGetCurrentRound()\r\n  const intervalSeconds = useGetIntervalSeconds()\r\n\r\n  if (!currentRound.lockTimestamp) {\r\n    return currentRound.startTimestamp + intervalSeconds\r\n  }\r\n\r\n  return currentRound.lockTimestamp\r\n}\r\n\r\n// Leaderboard\r\nexport const useGetLeaderboardLoadingState = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.loadingState)\r\n}\r\n\r\nexport const useGetLeaderboardResults = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.results)\r\n}\r\n\r\nexport const useGetLeaderboardFilters = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.filters)\r\n}\r\n\r\nexport const useGetLeaderboardSkip = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.skip)\r\n}\r\n\r\nexport const useGetLeaderboardHasMoreResults = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.hasMoreResults)\r\n}\r\n\r\nexport const useGetAddressResult = (account: string) => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.addressResults[account])\r\n}\r\n\r\nexport const useGetOrFetchLeaderboardAddressResult = (account: string) => {\r\n  const addressResult = useGetAddressResult(account)\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    const address = isAddress(account)\r\n\r\n    // If address result is null it means we already tried fetching the results and none came back\r\n    if (!addressResult && addressResult !== null && address) {\r\n      dispatch(fetchAddressResult(account))\r\n    }\r\n  }, [dispatch, account, addressResult])\r\n\r\n  return addressResult\r\n}\r\n\r\nexport const useGetSelectedAddress = () => {\r\n  return useSelector((state: State) => state.predictions.leaderboard.selectedAddress)\r\n}\r\n"],"sourceRoot":""}