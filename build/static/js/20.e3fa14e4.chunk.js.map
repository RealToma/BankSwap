{"version":3,"sources":["../node_modules/lodash/every.js","../node_modules/lodash/_arrayEvery.js","../node_modules/lodash/_baseEvery.js","views/Ifos/components/IfoFoldableCard/types.ts","views/Ifos/components/Hero.tsx","views/Ifos/hooks/helpers.ts","views/Ifos/hooks/v2/useGetPublicIfoData.ts","views/Ifos/hooks/useIfoAllowance.ts","views/Ifos/hooks/v3/useGetWalletIfoData.ts","views/Ifos/hooks/useIfoApprove.ts","views/Ifos/components/IfoFoldableCard/Achievement.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/PercentageOfTotal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/Skeletons.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardTokens.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/GetTokenModal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeModal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeButton.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ClaimButton.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardActions.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardDetails.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/index.tsx","views/Ifos/components/IfoFoldableCard/Timer.tsx","views/Ifos/components/IfoFoldableCard/IfoRibbon.tsx","views/Ifos/components/IfoFoldableCard/index.tsx","views/Ifos/components/IfoLayout.tsx","views/Ifos/components/IfoPoolVaultCard.tsx","views/Ifos/components/IfoQuestions/config.ts","views/Ifos/components/IfoQuestions/index.tsx","views/Ifos/components/IfoSteps.tsx","views/Ifos/CurrentIfo.tsx","views/Ifos/hooks/v1/useGetPublicIfoData.ts","views/Ifos/hooks/v1/useGetWalletIfoData.ts","views/Ifos/components/IfoCardV1Data.tsx","views/Ifos/hooks/v2/useGetWalletIfoData.ts","views/Ifos/components/IfoCardV2Data.tsx","views/Ifos/components/IfoCardV3Data.tsx","views/Ifos/PastIfo.tsx","views/Ifos/index.tsx","hooks/useApproveConfirmTransaction.ts","components/ApproveConfirmButtons.tsx","components/FoldableSection/FoldableText.tsx"],"names":["arrayEvery","require","baseEvery","baseIteratee","isArray","isIterateeCall","module","exports","collection","predicate","guard","func","undefined","array","index","length","baseEach","result","value","EnableStatus","StyledHero","styled","Box","theme","isDark","StyledHeading","Heading","mediaQueries","md","StyledButton","Button","colors","tertiary","primary","shadows","inset","DesktopButton","StyledSubTitle","Text","Hero","t","useTranslation","isMobile","useMatchBreakpoints","handleClick","document","getElementById","scrollIntoView","mb","py","minHeight","Container","justifyContent","flexDirection","style","gap","as","bold","onClick","variant","getStatus","currentBlock","startBlock","endBlock","TAX_PRECISION","ethers","FixedNumber","from","formatPool","pool","raisingAmountPool","BigNumber","toString","BIG_ZERO","offeringAmountPool","limitPerUserInLP","hasTax","totalAmountPool","sumTaxesOverflow","useGetPublicIfoData","ifo","address","releaseBlockNumber","cakePriceUsd","usePriceCakeBusd","lpTokenPriceInUsd","useLpTokenPrice","currency","symbol","currencyPriceInUSD","tokens","cake","useState","isInitialized","status","blocksRemaining","secondsUntilStart","progress","secondsUntilEnd","poolBasic","taxRate","poolUnlimited","thresholdPoints","startBlockNum","endBlockNum","numberPoints","state","setState","fetchIfoData","useCallback","a","multicallv2","ifoV2Abi","name","params","poolBasicFormatted","poolUnlimitedFormatted","toNumber","taxRateNum","divUnsafe","toUnsafeFloat","totalBlocks","prev","BSC_BLOCK_TIME","useIfoAllowance","tokenContract","spenderAddress","dependency","account","useWeb3React","allowance","setAllowance","useEffect","res","console","error","fetch","initialState","amountTokenCommittedInLP","offeringAmountInToken","refundingAmountInLP","taxAmountInLP","hasClaimed","isPendingTx","useGetWalletIfoData","dispatch","useAppDispatch","credit","useIfoPoolCredit","contract","useIfoV2Contract","currencyContract","useERC20","ifoCalls","map","method","fetchIfoPoolUserAndCredit","userInfo","amounts","prevState","resetIfoData","ifoCredit","creditLeft","minus","setPendingTx","poolId","setIsClaimed","useIfoApprove","callWithGasPrice","useCallWithGasPrice","constants","MaxUint256","tx","wait","SmartContractIcon","props","viewBox","fill","xmlns","d","fillRule","clipRule","FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT","BIG_TEN","Flex","AchievementFlex","isFinished","InlinePrize","IfoAchievement","publicIfoData","tokenName","token","toLowerCase","campaignTitle","minLpForAchievement","formatBigNumber","div","toFixed","p","pb","alignItems","flex","src","width","height","mr","ml","color","fontSize","lineHeight","title","gt","amount","pt","pl","external","href","articleUrl","getBscScanLink","twitterUrl","telegramUrl","description","PercentageOfTotal","userAmount","totalAmount","percentOfUserDisplay","isGreaterThan","times","toLocaleString","maximumFractionDigits","num","SkeletonCardActions","SkeletonCardTokens","SkeletonCardDetails","TokenSection","primaryToken","secondaryToken","children","TokenImage","CommitTokenSection","commitToken","equals","cakeBnbLpToken","wbnb","Label","textTransform","Value","wordBreak","OnSaleInfo","saleAmount","distributionRatio","toUpperCase","ratio","MessageTextLink","Link","IfoCardTokens","walletIfoData","hasProfile","isLoading","onApprove","enableStatus","useTooltip","placement","targetRef","tooltip","tooltipVisible","publicPoolCharacteristics","userPoolCharacteristics","ifoPoolVault","useIfoPoolVault","useIfoWithApr","stakingTokenBalance","userData","useModal","VaultStakeModal","stakingMax","performanceFee","fees","performanceFeeAsDecimal","onPresentStake","message","my","display","version","getBalanceNumber","fontWeight","ENABLED","mt","IS_ENABLING","endIcon","spin","decimals","isEqualTo","textAlign","ref","marginLeft","renderTokenSection","GetTokenModal","onDismiss","maxWidth","margin","minWidth","multiplierValues","gasPrice","parseUnits","ContributeModal","userCurrencyBalance","onSuccess","setValue","raisingTokenContract","valueWithTokenDecimals","DEFAULT_TOKEN_DECIMAL","label","useApproveConfirmTransaction","onRequiresApproval","response","currentAllowance","onConfirm","PoolIds","receipt","transactionHash","isApproving","isApproved","isConfirmed","isConfirming","handleApprove","handleConfirm","maximumTokenEntry","useMemo","isLessThanOrEqualTo","maximumTokenCommittable","isWarning","formatNumber","getBalanceAmount","flexGrow","split","toLocaleLowerCase","currencyValue","onUserInput","onBlur","balance","multiplierValue","scale","ApproveConfirmButtons","isApproveDisabled","isConfirmDisabled","isNaN","eq","ContributeButton","toastSuccess","useToast","useBlock","useTokenBalance","handleContributeSuccess","txHash","Promise","all","Toast","onPresentContributeModal","onPresentGetTokenModal","isDisabled","isGreaterThanOrEqualTo","disabled","ClaimButton","ifoVersion","toastError","isPending","handleClaim","harvest","harvestPool","logError","IfoCardActions","to","nftsBaseUrl","ConnectWalletButton","FooterEntry","small","MaxTokenEntry","maxToken","isCurrencyCake","isV3","tooltipContent","price","useBUSDPrice","dollarValueOfToken","multiplyPriceByAmount","IfoCardDetails","poolCharacteristic","walletCharacteristic","version3MaxTokens","maxLpTokens","totalCommittedPercent","totalLPCommitted","totalLPCommittedInUSD","totalCommitted","pricePerTokenWithFeeToOriginalRatio","plus","pricePerTokenWithFee","tokenOfferingPrice","tokenEntry","paddingTop","raiseAmount","cakeToBurn","StyledCard","Card","SmallCard","config","cardConfig","useProfile","isProfileLoading","GradientText","FlexGap","SoonTimer","timeUntil","getTimePeriods","position","animation","days","hours","minutes","EndInHeading","LiveNowHeading","LiveTimer","BigCurve","$status","input","IfoRibbon","Component","$useDark","$background","Math","min","max","overflow","IfoRibbonEnd","IfoRibbonSoon","IfoRibbonLive","$isCurrent","gradients","bubblegum","dropdown","sm","Header","CardHeader","ifoId","CardsWrapper","xxl","singleCard","StyledCardBody","CardBody","StyledCardFooter","CardFooter","backgroundAlt","StyledNoHatBunny","$isLive","lg","NoHatBunny","isLive","isCurrent","isXs","isSm","isMd","isSmallerThanTablet","alt","IfoCurrentCard","isExpanded","setIsExpanded","shouldShowBunny","className","bottom","zIndex","id","expanded","FoldableContent","isVisible","IfoCard","fetchPublicIfoData","isPublicIfoDataInitialized","fetchWalletIfoData","resetWalletIfoData","isWalletDataInitialized","DISABLED","setEnableStatus","isRecentlyActive","isActive","fastRefresh","useRefresh","isWindowVisible","useIsWindowVisible","lte","checkAllowance","IfoPoolCard","IfoFoldableCard","isDesktop","borderRadius","IfoLayout","IfoLayoutWrapper","StyledCardMobile","StyledTokenContent","ActionContainer","invertedContrast","IfoPoolVaultCardMobile","userDataLoaded","useActiveWeb3React","creditStartBlock","useIfoPooStartBlock","startBlockTooltip","startBlockTooltipVisible","startBlockTargetRef","cakeAsNumberBalance","cakeAsBigNumber","getDecimalAmount","cakePriceBusd","stakedDollarValue","multipliedBy","stakingToken","Balance","prefix","unit","AprRow","stakedBalance","vaultKey","VaultKey","IfoPool","Stake","UnstakingFeeCountdownRow","ExpandedFooter","IfoPoolVaultCard","CakeVaultCard","showStakedOnly","m","ImageWrapper","DetailsWrapper","IfoQuestions","i","FoldableText","desc","Wrapper","InlineLink","SmallStakePoolCard","cardBorder","background","Step1","flexWrap","alignSelf","Step2","isCommitted","IfoSteps","stepsValidationStatus","getStatusProp","arePreviousValid","every","slice","Boolean","renderCardBody","step","isStepValid","RouterLink","_","statusFirstPart","statusSecondPart","activeIfo","ifosConfig","find","Ifo","useGetPublicIfoV2Data","useGetWalletIfoV3Data","ifoV1Abi","raisingAmount","useIfoV1Contract","offeringAmount","userInfoResponse","refundingAmount","parsedUserInfo","claimed","IfoCardV1Data","useGetPublicIfoV1Data","useGetWalletIfoV1Data","IfoCardV2Data","useGetWalletIfoV2Data","IfoCardV3Data","inactiveIfo","filter","PastIfo","Ifos","useRouteMatch","path","isExact","useFetchIfoPool","useFetchPublicPoolsData","useFetchUserPools","items","activeItem","exact","CurrentIfo","approvalState","confirmState","reducer","actions","type","noop","onApproveSuccess","useReducer","handlePreApprove","useRef","current","then","hasApproveFailed","hasConfirmFailed","ButtonArrangement","StyledApproveConfirmButtonRow","UIKitButton","iconAttrs","ChevronRight","ChevronRightIcon","attrs","ChevronBottom","ChevronDownIcon","spinnerIcon","buttonArrangement","ROW","confirmLabel","confirmId","confirmButtonText","StyledExpandableLabelWrapper","StyledChildrenFlex","inputSecondary"],"mappings":"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","file":"static/js/20.e3fa14e4.chunk.js","sourcesContent":["var arrayEvery = require('./_arrayEvery'),\n    baseEvery = require('./_baseEvery'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * Iteration is stopped once `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * **Note:** This method returns `true` for\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n * elements of empty collections.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.every(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, guard) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = every;\n","/**\n * A specialized version of `_.every` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = arrayEvery;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.every` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nmodule.exports = baseEvery;\n","export enum EnableStatus {\r\n  ENABLED = 'enabled',\r\n  DISABLED = 'disabled',\r\n  IS_ENABLING = 'is_enabling',\r\n}\r\n\r\nexport default EnableStatus\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Heading, Text, Button, Flex, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport Container from 'components/Layout/Container'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst StyledHero = styled(Box)`\r\n  background-image: url('/images/ifos/assets/ifo-banner-${({ theme }) => (theme.isDark ? 'dark' : 'light')}.png');\r\n  background-position: top, center;\r\n  background-repeat: no-repeat;\r\n  background-size: auto 100%;\r\n`\r\n\r\nconst StyledHeading = styled(Heading)`\r\n  font-size: 40px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 64px;\r\n  }\r\n`\r\n\r\nconst StyledButton = styled(Button)`\r\n  background-color: ${({ theme }) => theme.colors.tertiary};\r\n  color: ${({ theme }) => theme.colors.primary};\r\n  padding: 4px 13px;\r\n  height: auto;\r\n  text-transform: uppercase;\r\n  align-self: flex-start;\r\n  font-size: 12px;\r\n  box-shadow: ${({ theme }) => theme.shadows.inset};\r\n  border-radius: 8px;\r\n  margin-left: 8px;\r\n`\r\n\r\nconst DesktopButton = styled(Button)`\r\n  align-self: flex-end;\r\n`\r\n\r\nconst StyledSubTitle = styled(Text)`\r\n  font-size: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 20px;\r\n  }\r\n`\r\n\r\nconst Hero = () => {\r\n  const { t } = useTranslation()\r\n\r\n  const { isMobile } = useMatchBreakpoints()\r\n\r\n  const handleClick = () => {\r\n    document.getElementById('ifo-how-to')?.scrollIntoView()\r\n  }\r\n\r\n  return (\r\n    <Box mb=\"8px\">\r\n      <StyledHero py={['16px', '16px', '32px']} minHeight={['212px', '212px', '197px']}>\r\n        <Container>\r\n          <Flex\r\n            justifyContent=\"space-between\"\r\n            flexDirection={['column', 'column', 'column', 'row']}\r\n            style={{ gap: '4px' }}\r\n          >\r\n            <Box>\r\n              <StyledHeading as=\"h1\" mb={['12px', '12px', '16px']}>\r\n                {t('IFO: Initial Farm Offerings')}\r\n              </StyledHeading>\r\n              <StyledSubTitle bold>\r\n                {t('Buy new tokens launching on Binance Smart Chain')}\r\n                {isMobile && <StyledButton onClick={handleClick}>{t('How does it work?')}</StyledButton>}\r\n              </StyledSubTitle>\r\n            </Box>\r\n            {!isMobile && (\r\n              <DesktopButton onClick={handleClick} variant=\"subtle\">\r\n                {t('How does it work?')}\r\n              </DesktopButton>\r\n            )}\r\n          </Flex>\r\n        </Container>\r\n      </StyledHero>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Hero\r\n","import { IfoStatus } from 'config/constants/types'\r\n\r\nexport const getStatus = (currentBlock: number, startBlock: number, endBlock: number): IfoStatus => {\r\n  // Add an extra check to currentBlock because it takes awhile to fetch so the initial value is 0\r\n  // making the UI change to an inaccurate status\r\n  if (currentBlock === 0) {\r\n    return 'idle'\r\n  }\r\n\r\n  if (currentBlock < startBlock) {\r\n    return 'coming_soon'\r\n  }\r\n\r\n  if (currentBlock >= startBlock && currentBlock <= endBlock) {\r\n    return 'live'\r\n  }\r\n\r\n  if (currentBlock > endBlock) {\r\n    return 'finished'\r\n  }\r\n\r\n  return 'idle'\r\n}\r\n\r\nexport default null\r\n","import BigNumber from 'bignumber.js'\r\nimport { useState, useCallback } from 'react'\r\nimport { BSC_BLOCK_TIME } from 'config'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport tokens from 'config/constants/tokens'\r\nimport { Ifo, IfoStatus } from 'config/constants/types'\r\nimport { ethers } from 'ethers'\r\nimport { useLpTokenPrice, usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport { PublicIfoData } from '../../types'\r\nimport { getStatus } from '../helpers'\r\n\r\n// https://github.com/pancakeswap/pancake-contracts/blob/master/projects/ifo/contracts/IFOV2.sol#L431\r\n// 1,000,000,000 / 100\r\nconst TAX_PRECISION = ethers.FixedNumber.from(10000000000)\r\n\r\nconst formatPool = (pool) => ({\r\n  raisingAmountPool: pool ? new BigNumber(pool[0].toString()) : BIG_ZERO,\r\n  offeringAmountPool: pool ? new BigNumber(pool[1].toString()) : BIG_ZERO,\r\n  limitPerUserInLP: pool ? new BigNumber(pool[2].toString()) : BIG_ZERO,\r\n  hasTax: pool ? pool[3] : false,\r\n  totalAmountPool: pool ? new BigNumber(pool[4].toString()) : BIG_ZERO,\r\n  sumTaxesOverflow: pool ? new BigNumber(pool[5].toString()) : BIG_ZERO,\r\n})\r\n\r\n/**\r\n * Gets all public data of an IFO\r\n */\r\nconst useGetPublicIfoData = (ifo: Ifo): PublicIfoData => {\r\n  const { address, releaseBlockNumber } = ifo\r\n  const cakePriceUsd = usePriceCakeBusd()\r\n  const lpTokenPriceInUsd = useLpTokenPrice(ifo.currency.symbol)\r\n  const currencyPriceInUSD = ifo.currency === tokens.cake ? cakePriceUsd : lpTokenPriceInUsd\r\n\r\n  const [state, setState] = useState({\r\n    isInitialized: false,\r\n    status: 'idle' as IfoStatus,\r\n    blocksRemaining: 0,\r\n    secondsUntilStart: 0,\r\n    progress: 5,\r\n    secondsUntilEnd: 0,\r\n    poolBasic: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO,\r\n      limitPerUserInLP: BIG_ZERO,\r\n      taxRate: 0,\r\n      totalAmountPool: BIG_ZERO,\r\n      sumTaxesOverflow: BIG_ZERO,\r\n    },\r\n    poolUnlimited: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO,\r\n      limitPerUserInLP: BIG_ZERO,\r\n      taxRate: 0,\r\n      totalAmountPool: BIG_ZERO,\r\n      sumTaxesOverflow: BIG_ZERO,\r\n    },\r\n    thresholdPoints: undefined,\r\n    startBlockNum: 0,\r\n    endBlockNum: 0,\r\n    numberPoints: 0,\r\n  })\r\n\r\n  const fetchIfoData = useCallback(\r\n    async (currentBlock: number) => {\r\n      const [startBlock, endBlock, poolBasic, poolUnlimited, taxRate, numberPoints, thresholdPoints] =\r\n        await multicallv2(ifoV2Abi, [\r\n          {\r\n            address,\r\n            name: 'startBlock',\r\n          },\r\n          {\r\n            address,\r\n            name: 'endBlock',\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolInformation',\r\n            params: [0],\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolInformation',\r\n            params: [1],\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolTaxRateOverflow',\r\n            params: [1],\r\n          },\r\n          {\r\n            address,\r\n            name: 'numberPoints',\r\n          },\r\n          {\r\n            address,\r\n            name: 'thresholdPoints',\r\n          },\r\n        ])\r\n\r\n      const poolBasicFormatted = formatPool(poolBasic)\r\n      const poolUnlimitedFormatted = formatPool(poolUnlimited)\r\n\r\n      const startBlockNum = startBlock ? startBlock[0].toNumber() : 0\r\n      const endBlockNum = endBlock ? endBlock[0].toNumber() : 0\r\n      const taxRateNum = taxRate ? ethers.FixedNumber.from(taxRate[0]).divUnsafe(TAX_PRECISION).toUnsafeFloat() : 0\r\n\r\n      const status = getStatus(currentBlock, startBlockNum, endBlockNum)\r\n      const totalBlocks = endBlockNum - startBlockNum\r\n      const blocksRemaining = endBlockNum - currentBlock\r\n\r\n      // Calculate the total progress until finished or until start\r\n      const progress =\r\n        currentBlock > startBlockNum\r\n          ? ((currentBlock - startBlockNum) / totalBlocks) * 100\r\n          : ((currentBlock - releaseBlockNumber) / (startBlockNum - releaseBlockNumber)) * 100\r\n\r\n      setState((prev) => ({\r\n        ...prev,\r\n        isInitialized: true,\r\n        secondsUntilEnd: blocksRemaining * BSC_BLOCK_TIME,\r\n        secondsUntilStart: (startBlockNum - currentBlock) * BSC_BLOCK_TIME,\r\n        poolBasic: { ...poolBasicFormatted, taxRate: 0 },\r\n        poolUnlimited: { ...poolUnlimitedFormatted, taxRate: taxRateNum },\r\n        status,\r\n        progress,\r\n        blocksRemaining,\r\n        startBlockNum,\r\n        endBlockNum,\r\n        thresholdPoints: thresholdPoints && thresholdPoints[0],\r\n        numberPoints: numberPoints ? numberPoints[0].toNumber() : 0,\r\n      }))\r\n    },\r\n    [releaseBlockNumber, address],\r\n  )\r\n\r\n  return { ...state, currencyPriceInUSD, fetchIfoData }\r\n}\r\n\r\nexport default useGetPublicIfoData\r\n","import { useEffect, useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Contract } from 'ethers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\n\r\n// Retrieve IFO allowance\r\nconst useIfoAllowance = (tokenContract: Contract, spenderAddress: string, dependency?: any): BigNumber => {\r\n  const { account } = useWeb3React()\r\n  const [allowance, setAllowance] = useState(BIG_ZERO)\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      try {\r\n        const res = await tokenContract.allowance(account, spenderAddress)\r\n        setAllowance(new BigNumber(res.toString()))\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetch()\r\n    }\r\n  }, [account, spenderAddress, tokenContract, dependency])\r\n\r\n  return allowance\r\n}\r\n\r\nexport default useIfoAllowance\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV2Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport { useIfoPoolCredit } from 'state/pools/hooks'\r\nimport { fetchIfoPoolUserAndCredit } from 'state/pools'\r\nimport { useAppDispatch } from 'state'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  poolBasic: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n  poolUnlimited: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n  const dispatch = useAppDispatch()\r\n  const credit = useIfoPoolCredit()\r\n\r\n  const { address, currency } = ifo\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV2Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address)\r\n\r\n  const setPendingTx = (status: boolean, poolId: PoolIds) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = (poolId: PoolIds) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['viewUserInfo', 'viewUserOfferingAndRefundingAmountsForPools'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account, [0, 1]],\r\n    }))\r\n\r\n    dispatch(fetchIfoPoolUserAndCredit({ account }))\r\n\r\n    const [userInfo, amounts] = await multicallv2(ifoV2Abi, ifoCalls)\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isInitialized: true,\r\n      poolBasic: {\r\n        ...prevState.poolBasic,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][0].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][0][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][0][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][0][2].toString()),\r\n        hasClaimed: userInfo[1][0],\r\n      },\r\n      poolUnlimited: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][1].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][1][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][1][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][1][2].toString()),\r\n        hasClaimed: userInfo[1][1],\r\n      },\r\n    }))\r\n  }, [account, address, dispatch])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState({ ...initialState })\r\n  }, [])\r\n\r\n  const ifoCredit = {\r\n    credit,\r\n    creditLeft: credit\r\n      .minus(state.poolBasic.amountTokenCommittedInLP)\r\n      .minus(state.poolUnlimited.amountTokenCommittedInLP),\r\n  }\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData, ifoCredit }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import { useCallback } from 'react'\r\nimport { ethers, Contract } from 'ethers'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\n\r\nconst useIfoApprove = (tokenContract: Contract, spenderAddress: string) => {\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const onApprove = useCallback(async (): Promise<ethers.providers.TransactionReceipt> => {\r\n    const tx = await callWithGasPrice(tokenContract, 'approve', [spenderAddress, ethers.constants.MaxUint256])\r\n    return tx.wait()\r\n  }, [spenderAddress, tokenContract, callWithGasPrice])\r\n\r\n  return onApprove\r\n}\r\n\r\nexport default useIfoApprove\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Flex,\r\n  Image,\r\n  Text,\r\n  PrizeIcon,\r\n  Skeleton,\r\n  LanguageIcon,\r\n  SvgProps,\r\n  Svg,\r\n  TwitterIcon,\r\n  Link,\r\n  TelegramIcon,\r\n} from '@pancakeswap/uikit'\r\nimport tokens from 'config/constants/tokens'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { PublicIfoData } from 'views/Ifos/types'\r\nimport { Ifo } from 'config/constants/types'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { getBscScanLink } from 'utils'\r\nimport { formatBigNumber } from 'utils/formatBalance'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\n\r\nconst SmartContractIcon: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path d=\"M10.037 6a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5zM9.287 9.75a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM10.037 12a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5z\" />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M5.287 4a2 2 0 012-2h13a2 2 0 012 2v15c0 1.66-1.34 3-3 3h-14c-1.66 0-3-1.34-3-3v-2c0-.55.45-1 1-1h2V4zm0 16h11v-2h-12v1c0 .55.45 1 1 1zm14 0c.55 0 1-.45 1-1V4h-13v12h10c.55 0 1 .45 1 1v2c0 .55.45 1 1 1z\"\r\n      />\r\n    </Svg>\r\n  )\r\n}\r\n\r\nconst FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT = BIG_TEN\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n}\r\n\r\nconst Container = styled(Flex)`\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-align: left;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex-direction: row;\r\n    align-items: initial;\r\n  }\r\n`\r\n\r\nconst AchievementFlex = styled(Flex)<{ isFinished: boolean }>`\r\n  ${({ isFinished }) => (isFinished ? 'filter: grayscale(100%)' : '')};\r\n  text-align: left;\r\n`\r\n\r\nconst InlinePrize = styled(Flex)`\r\n  display: inline-flex;\r\n  vertical-align: top;\r\n`\r\n\r\nconst IfoAchievement: React.FC<Props> = ({ ifo, publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const tokenName = ifo.token.symbol?.toLowerCase()\r\n  const campaignTitle = ifo.name\r\n  const minLpForAchievement = publicIfoData.thresholdPoints\r\n    ? formatBigNumber(publicIfoData.thresholdPoints, 3)\r\n    : FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT.div(publicIfoData.currencyPriceInUSD).toNumber().toFixed(3)\r\n\r\n  return (\r\n    <Container p=\"16px\" pb=\"32px\">\r\n      <AchievementFlex isFinished={publicIfoData.status === 'finished'} alignItems=\"flex-start\" flex={1}>\r\n        <Image src={`/images/achievements/ifo-${tokenName}.svg`} width={56} height={56} mr=\"8px\" />\r\n        <Flex flexDirection=\"column\" ml=\"8px\">\r\n          <Text color=\"secondary\" fontSize=\"12px\">\r\n            {`${t('Achievement')}:`}\r\n          </Text>\r\n          <Flex>\r\n            <Text bold mr=\"8px\" lineHeight={1.2}>\r\n              {t('IFO Shopper: %title%', { title: campaignTitle })}\r\n              <InlinePrize alignItems=\"center\" ml=\"8px\">\r\n                <PrizeIcon color=\"textSubtle\" width=\"16px\" mr=\"4px\" />\r\n                <Text lineHeight={1.2} color=\"textSubtle\">\r\n                  {publicIfoData.numberPoints}\r\n                </Text>\r\n              </InlinePrize>\r\n            </Text>\r\n          </Flex>\r\n          {publicIfoData.currencyPriceInUSD.gt(0) ? (\r\n            <Text color=\"textSubtle\" fontSize=\"12px\">\r\n              {t('Commit ~%amount% %symbol% in total to earn!', {\r\n                amount: minLpForAchievement,\r\n                symbol: ifo.currency === tokens.cake ? 'CAKE' : 'LP',\r\n              })}\r\n            </Text>\r\n          ) : (\r\n            <Skeleton minHeight={18} width={80} />\r\n          )}\r\n          <FlexGap gap=\"16px\" pt=\"24px\" pl=\"4px\">\r\n            <Link external href={ifo.articleUrl}>\r\n              <LanguageIcon color=\"textSubtle\" />\r\n            </Link>\r\n            <Link external href={getBscScanLink(ifo.address, 'address')}>\r\n              <SmartContractIcon color=\"textSubtle\" />\r\n            </Link>\r\n            {ifo.twitterUrl && (\r\n              <Link external href={ifo.twitterUrl}>\r\n                <TwitterIcon color=\"textSubtle\" />\r\n              </Link>\r\n            )}\r\n            {ifo.telegramUrl && (\r\n              <Link external href={ifo.telegramUrl}>\r\n                <TelegramIcon color=\"textSubtle\" />\r\n              </Link>\r\n            )}\r\n          </FlexGap>\r\n        </Flex>\r\n      </AchievementFlex>\r\n      {ifo.description && (\r\n        <Flex alignItems=\"flex-end\" flexDirection=\"column\" flex={1} pl=\"16px\">\r\n          <Text fontSize=\"14px\" lineHeight={1.2}>\r\n            {ifo.description}\r\n          </Text>\r\n        </Flex>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default IfoAchievement\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Text, TextProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface PercentageOfTotalProps extends TextProps {\r\n  userAmount: BigNumber\r\n  totalAmount: BigNumber\r\n}\r\n\r\nconst PercentageOfTotal: React.FC<PercentageOfTotalProps> = ({ userAmount, totalAmount, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const percentOfUserContribution = totalAmount.isGreaterThan(0) ? userAmount.div(totalAmount).times(100).toNumber() : 0\r\n  const percentOfUserDisplay = percentOfUserContribution.toLocaleString(undefined, { maximumFractionDigits: 5 })\r\n\r\n  return (\r\n    <Text fontSize=\"14px\" color=\"textSubtle\" {...props}>\r\n      {t('%num% of total', { num: `${percentOfUserDisplay}%` })}\r\n    </Text>\r\n  )\r\n}\r\n\r\nexport default PercentageOfTotal\r\n","import React from 'react'\r\nimport { Flex, Skeleton } from '@pancakeswap/uikit'\r\n\r\nexport const SkeletonCardActions = () => {\r\n  return <Skeleton height=\"48px\" />\r\n}\r\n\r\nexport const SkeletonCardTokens = () => {\r\n  return (\r\n    <div>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\r\n        <Skeleton variant=\"circle\" width=\"32px\" height=\"32px\" mr=\"16px\" />\r\n        <Skeleton width=\"90%\" />\r\n      </Flex>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Skeleton variant=\"circle\" width=\"32px\" height=\"32px\" mr=\"16px\" />\r\n        <Skeleton width=\"90%\" />\r\n      </Flex>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const SkeletonCardDetails = () => {\r\n  return (\r\n    <div>\r\n      <Skeleton mb=\"8px\" />\r\n      <Skeleton />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default null\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport {\r\n  Text,\r\n  Flex,\r\n  Box,\r\n  CheckmarkCircleIcon,\r\n  FlexProps,\r\n  HelpIcon,\r\n  useTooltip,\r\n  Button,\r\n  AutoRenewIcon,\r\n  BunnyPlaceholderIcon,\r\n  Message,\r\n  MessageText,\r\n  useModal,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Token } from '@pancakeswap/sdk'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport tokens from 'config/constants/tokens'\r\nimport { cakeBnbLpToken } from 'config/constants/ifo'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { TokenImage, TokenPairImage } from 'components/TokenImage'\r\nimport VaultStakeModal from 'views/Pools/components/CakeVaultCard/VaultStakeModal'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr } from 'state/pools/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { EnableStatus } from '../types'\r\nimport PercentageOfTotal from './PercentageOfTotal'\r\nimport { SkeletonCardTokens } from './Skeletons'\r\n\r\ninterface TokenSectionProps extends FlexProps {\r\n  primaryToken?: Token\r\n  secondaryToken?: Token\r\n}\r\n\r\nconst TokenSection: React.FC<TokenSectionProps> = ({ primaryToken, secondaryToken, children, ...props }) => {\r\n  const renderTokenComponent = () => {\r\n    if (!primaryToken) {\r\n      return <BunnyPlaceholderIcon width={32} mr=\"16px\" />\r\n    }\r\n\r\n    if (primaryToken && secondaryToken) {\r\n      return (\r\n        <TokenPairImage\r\n          variant=\"inverted\"\r\n          primaryToken={primaryToken}\r\n          height={32}\r\n          width={32}\r\n          secondaryToken={secondaryToken}\r\n          mr=\"16px\"\r\n        />\r\n      )\r\n    }\r\n\r\n    return <TokenImage token={primaryToken} height={32} width={32} mr=\"16px\" />\r\n  }\r\n\r\n  return (\r\n    <Flex {...props}>\r\n      {renderTokenComponent()}\r\n      <div>{children}</div>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst CommitTokenSection: React.FC<TokenSectionProps & { commitToken: Token }> = ({ commitToken, ...props }) => {\r\n  if (commitToken.equals(cakeBnbLpToken)) {\r\n    return <TokenSection primaryToken={tokens.cake} secondaryToken={tokens.wbnb} {...props} />\r\n  }\r\n  return <TokenSection primaryToken={commitToken} {...props} />\r\n}\r\n\r\nconst Label = (props) => <Text bold fontSize=\"12px\" color=\"secondary\" textTransform=\"uppercase\" {...props} />\r\n\r\nconst Value = (props) => <Text bold fontSize=\"20px\" style={{ wordBreak: 'break-all' }} {...props} />\r\n\r\ninterface IfoCardTokensProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  hasProfile: boolean\r\n  isLoading: boolean\r\n  onApprove: () => Promise<any>\r\n  enableStatus: EnableStatus\r\n}\r\n\r\nconst OnSaleInfo = ({ token, saleAmount, distributionRatio }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <TokenSection primaryToken={token}>\r\n      <Flex flexDirection=\"column\">\r\n        <Label>{t('On sale').toUpperCase()}</Label>\r\n        <Value>{saleAmount}</Value>\r\n        <Text fontSize=\"14px\" color=\"textSubtle\">\r\n          {t('%ratio%% of total sale', { ratio: distributionRatio })}\r\n        </Text>\r\n      </Flex>\r\n    </TokenSection>\r\n  )\r\n}\r\n\r\nconst MessageTextLink = styled(Link)`\r\n  display: inline;\r\n  text-decoration: underline;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n`\r\n\r\nconst IfoCardTokens: React.FC<IfoCardTokensProps> = ({\r\n  poolId,\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n  hasProfile,\r\n  isLoading,\r\n  onApprove,\r\n  enableStatus,\r\n}) => {\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t(\r\n      'Sorry, you didn’t contribute enough CAKE to meet the minimum threshold. You didn’t buy anything in this sale, but you can still reclaim your CAKE.',\r\n    ),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  const { currency, token } = ifo\r\n  const { hasClaimed } = userPoolCharacteristics\r\n  const distributionRatio = ifo[poolId].distributionRatio * 100\r\n\r\n  const ifoPoolVault = useIfoPoolVault()\r\n  const { pool } = useIfoWithApr()\r\n  const credit = useIfoPoolCredit()\r\n\r\n  const stakingTokenBalance = pool?.userData?.stakingTokenBalance\r\n    ? new BigNumber(pool.userData.stakingTokenBalance)\r\n    : BIG_ZERO\r\n\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal\r\n      stakingMax={stakingTokenBalance}\r\n      performanceFee={ifoPoolVault.fees.performanceFeeAsDecimal}\r\n      pool={pool}\r\n    />,\r\n  )\r\n\r\n  const renderTokenSection = () => {\r\n    if (isLoading) {\r\n      return <SkeletonCardTokens />\r\n    }\r\n    if (!account) {\r\n      return <OnSaleInfo token={token} distributionRatio={distributionRatio} saleAmount={ifo[poolId].saleAmount} />\r\n    }\r\n\r\n    let message\r\n\r\n    if (account && !hasProfile) {\r\n      message = (\r\n        <Message my=\"24px\" p=\"8px\" variant=\"warning\">\r\n          <Box>\r\n            <MessageText display=\"inline\">\r\n              {publicIfoData.status === 'finished'\r\n                ? t('Activate PancakeSwap Profile to take part in next IFO‘s!')\r\n                : t('You need an active PancakeSwap Profile to take part in an IFO!')}\r\n            </MessageText>{' '}\r\n            <MessageTextLink href=\"#ifo-how-to\" color=\"#D67E0A\" display=\"inline\">\r\n              {t('How does it work?')} »\r\n            </MessageTextLink>\r\n          </Box>\r\n        </Message>\r\n      )\r\n    }\r\n\r\n    if (ifo.version === 3 && getBalanceNumber(credit) === 0) {\r\n      message = (\r\n        <Message my=\"24px\" p=\"8px\" variant=\"danger\">\r\n          <Box>\r\n            <MessageText display=\"inline\">\r\n              {t('You don’t have any average CAKE balance available to commit in the IFO CAKE pool.')}\r\n            </MessageText>{' '}\r\n            <MessageTextLink display=\"inline\" fontWeight={700} href=\"#ifo-how-to\" color=\"failure\">\r\n              {t('How does it work?')} »\r\n            </MessageTextLink>\r\n          </Box>\r\n        </Message>\r\n      )\r\n    }\r\n    if (account && !hasProfile) {\r\n      return (\r\n        <>\r\n          <OnSaleInfo token={token} distributionRatio={distributionRatio} saleAmount={ifo[poolId].saleAmount} />\r\n          {message}\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'coming_soon') {\r\n      return (\r\n        <>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label>{t('On sale')}</Label>\r\n            <Value>{ifo[poolId].saleAmount}</Value>\r\n          </TokenSection>\r\n          <Text fontSize=\"14px\" color=\"textSubtle\" pl=\"48px\">\r\n            {t('%ratio%% of total sale', { ratio: distributionRatio })}\r\n          </Text>\r\n          {message}\r\n          {enableStatus !== EnableStatus.ENABLED && account && (\r\n            <Button\r\n              width=\"100%\"\r\n              mt=\"16px\"\r\n              onClick={onApprove}\r\n              isLoading={enableStatus === EnableStatus.IS_ENABLING}\r\n              endIcon={enableStatus === EnableStatus.IS_ENABLING ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n            >\r\n              {t('Enable')}\r\n            </Button>\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'live') {\r\n      return (\r\n        <>\r\n          <CommitTokenSection commitToken={ifo.currency} mb=\"24px\">\r\n            <Label>{t('Your %symbol% committed', { symbol: currency.symbol })}</Label>\r\n            <Value>{getBalanceNumber(userPoolCharacteristics.amountTokenCommittedInLP, currency.decimals)}</Value>\r\n            <PercentageOfTotal\r\n              userAmount={userPoolCharacteristics.amountTokenCommittedInLP}\r\n              totalAmount={publicPoolCharacteristics.totalAmountPool}\r\n            />\r\n          </CommitTokenSection>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label>{t('%symbol% to receive', { symbol: token.symbol })}</Label>\r\n            <Value>{getBalanceNumber(userPoolCharacteristics.offeringAmountInToken, token.decimals)}</Value>\r\n          </TokenSection>\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'finished') {\r\n      return userPoolCharacteristics.amountTokenCommittedInLP.isEqualTo(0) ? (\r\n        <Flex flexDirection=\"column\" alignItems=\"center\">\r\n          <BunnyPlaceholderIcon width={80} mb=\"16px\" />\r\n          <Text fontWeight={600}>{t('You didn’t participate in this sale!')}</Text>\r\n          <Text textAlign=\"center\" fontSize=\"14px\">\r\n            {t('To participate in the next IFO, stake some CAKE in the IFO CAKE pool!')}\r\n          </Text>\r\n          <MessageTextLink href=\"#ifo-how-to\" textAlign=\"center\">\r\n            {t('How does it work?')} »\r\n          </MessageTextLink>\r\n          <Button mt=\"24px\" onClick={onPresentStake}>\r\n            {t('Stake CAKE in IFO pool')}\r\n          </Button>\r\n        </Flex>\r\n      ) : (\r\n        <>\r\n          <CommitTokenSection commitToken={ifo.currency} mb=\"24px\">\r\n            <Label>\r\n              {t(hasClaimed ? 'Your %symbol% RECLAIMED' : 'Your %symbol% TO RECLAIM', { symbol: currency.symbol })}\r\n            </Label>\r\n            <Flex alignItems=\"center\">\r\n              <Value>{getBalanceNumber(userPoolCharacteristics.refundingAmountInLP, currency.decimals)}</Value>\r\n              {hasClaimed && <CheckmarkCircleIcon color=\"success\" ml=\"8px\" />}\r\n            </Flex>\r\n            <PercentageOfTotal\r\n              userAmount={userPoolCharacteristics.amountTokenCommittedInLP}\r\n              totalAmount={publicPoolCharacteristics.totalAmountPool}\r\n            />\r\n          </CommitTokenSection>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label> {t(hasClaimed ? '%symbol% received' : '%symbol% to receive', { symbol: token.symbol })}</Label>\r\n            <Flex alignItems=\"center\">\r\n              <Value>{getBalanceNumber(userPoolCharacteristics.offeringAmountInToken, token.decimals)}</Value>\r\n              {!hasClaimed && userPoolCharacteristics.offeringAmountInToken.isEqualTo(0) && (\r\n                <div ref={targetRef} style={{ display: 'flex', marginLeft: '8px' }}>\r\n                  <HelpIcon />\r\n                </div>\r\n              )}\r\n              {hasClaimed && <CheckmarkCircleIcon color=\"success\" ml=\"8px\" />}\r\n            </Flex>\r\n          </TokenSection>\r\n          {hasClaimed && (\r\n            <Message my=\"24px\" p=\"8px\" variant=\"success\">\r\n              <MessageText>{t('You’ve successfully claimed tokens back.')}</MessageText>\r\n            </Message>\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n    return null\r\n  }\r\n  return (\r\n    <Box>\r\n      {tooltipVisible && tooltip}\r\n      {renderTokenSection()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default IfoCardTokens\r\n","import React from 'react'\r\nimport { Modal, ModalBody, Text, Image, Button, Link, OpenNewIcon } from '@pancakeswap/uikit'\r\nimport { Token } from '@pancakeswap/sdk'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface Props {\r\n  currency: Token\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst GetTokenModal: React.FC<Partial<Props>> = ({ currency, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Modal title={t('%symbol% required', { symbol: currency.symbol })} onDismiss={onDismiss}>\r\n      <ModalBody maxWidth=\"288px\">\r\n        <Image src={`/images/tokens/${currency.address}.svg`} width={72} height={72} margin=\"auto\" mb=\"24px\" />\r\n        <Text mb=\"16px\">\r\n          {t('You’ll need %symbol% tokens to participate in the IFO!', { symbol: currency.symbol })}\r\n        </Text>\r\n        <Text mb=\"24px\">\r\n          {t('Get %symbol%, or make sure your tokens aren’t staked somewhere else.', { symbol: currency.symbol })}\r\n        </Text>\r\n        <Button\r\n          as={Link}\r\n          external\r\n          href={`/swap?outputCurrency=${currency.address}`}\r\n          endIcon={<OpenNewIcon color=\"white\" />}\r\n          minWidth=\"100%\" // Bypass the width=\"fit-content\" on Links\r\n        >\r\n          {t('Get %symbol%', { symbol: currency.symbol })}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default GetTokenModal\r\n","import React, { useMemo, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { ethers } from 'ethers'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport {\r\n  Modal,\r\n  ModalBody,\r\n  Text,\r\n  Image,\r\n  Button,\r\n  BalanceInput,\r\n  Flex,\r\n  useTooltip,\r\n  TooltipText,\r\n  Box,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport { PoolIds, Ifo } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatNumber, getBalanceAmount } from 'utils/formatBalance'\r\nimport ApproveConfirmButtons from 'components/ApproveConfirmButtons'\r\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { DEFAULT_TOKEN_DECIMAL } from 'config'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport tokens from 'config/constants/tokens'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  userCurrencyBalance: BigNumber\r\n  creditLeft: BigNumber\r\n  onSuccess: (amount: BigNumber, txHash: string) => void\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1]\r\n\r\n// Default value for transaction setting, tweak based on BSC network congestion.\r\nconst gasPrice = parseUnits('10', 'gwei').toString()\r\n\r\nconst ContributeModal: React.FC<Props> = ({\r\n  poolId,\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n  userCurrencyBalance,\r\n  creditLeft,\r\n  onDismiss,\r\n  onSuccess,\r\n}) => {\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  const { currency } = ifo\r\n  const { limitPerUserInLP } = publicPoolCharacteristics\r\n  const { amountTokenCommittedInLP } = userPoolCharacteristics\r\n  const { contract } = walletIfoData\r\n  const [value, setValue] = useState('')\r\n  const { account } = useWeb3React()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const raisingTokenContract = useERC20(currency.address)\r\n  const { t } = useTranslation()\r\n  const valueWithTokenDecimals = new BigNumber(value).times(DEFAULT_TOKEN_DECIMAL)\r\n  const label = currency === tokens.cake ? t('Max. CAKE entry') : t('Max. token entry')\r\n\r\n  const { isApproving, isApproved, isConfirmed, isConfirming, handleApprove, handleConfirm } =\r\n    useApproveConfirmTransaction({\r\n      onRequiresApproval: async () => {\r\n        try {\r\n          const response = await raisingTokenContract.allowance(account, contract.address)\r\n          const currentAllowance = new BigNumber(response.toString())\r\n          return currentAllowance.gt(0)\r\n        } catch (error) {\r\n          return false\r\n        }\r\n      },\r\n      onApprove: () => {\r\n        return callWithGasPrice(raisingTokenContract, 'approve', [contract.address, ethers.constants.MaxUint256], {\r\n          gasPrice,\r\n        })\r\n      },\r\n      onConfirm: () => {\r\n        return callWithGasPrice(\r\n          contract,\r\n          'depositPool',\r\n          [valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1],\r\n          {\r\n            gasPrice,\r\n          },\r\n        )\r\n      },\r\n      onSuccess: async ({ receipt }) => {\r\n        await onSuccess(valueWithTokenDecimals, receipt.transactionHash)\r\n        onDismiss()\r\n      },\r\n    })\r\n\r\n  // in v3 max token entry is based on ifo credit and hard cap limit per user minus amount already committed\r\n  const maximumTokenEntry = useMemo(() => {\r\n    if (!creditLeft) {\r\n      return limitPerUserInLP.minus(amountTokenCommittedInLP)\r\n    }\r\n    if (limitPerUserInLP.isGreaterThan(0)) {\r\n      if (limitPerUserInLP.isGreaterThan(0)) {\r\n        return limitPerUserInLP.minus(amountTokenCommittedInLP).isLessThanOrEqualTo(creditLeft)\r\n          ? limitPerUserInLP.minus(amountTokenCommittedInLP)\r\n          : creditLeft\r\n      }\r\n    }\r\n    return creditLeft\r\n  }, [creditLeft, limitPerUserInLP, amountTokenCommittedInLP])\r\n\r\n  // include user balance for input\r\n  const maximumTokenCommittable = useMemo(() => {\r\n    return maximumTokenEntry.isLessThanOrEqualTo(userCurrencyBalance) ? maximumTokenEntry : userCurrencyBalance\r\n  }, [maximumTokenEntry, userCurrencyBalance])\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    poolId === PoolIds.poolBasic\r\n      ? t(\r\n          'For the basic sale, Max CAKE entry is capped by minimum between your average CAKE balance in the IFO CAKE pool, or the pool’s hard cap. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        )\r\n      : t(\r\n          'For the unlimited sale, Max CAKE entry is capped by your average CAKE balance in the IFO CAKE pool. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        ),\r\n    {},\r\n  )\r\n\r\n  const isWarning =\r\n    valueWithTokenDecimals.isGreaterThan(userCurrencyBalance) || valueWithTokenDecimals.isGreaterThan(maximumTokenEntry)\r\n\r\n  return (\r\n    <Modal title={t('Contribute %symbol%', { symbol: currency.symbol })} onDismiss={onDismiss}>\r\n      <ModalBody maxWidth=\"360px\">\r\n        <Box p=\"2px\">\r\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\r\n            {tooltipVisible && tooltip}\r\n            <TooltipText ref={targetRef}>{label}:</TooltipText>\r\n            <Text>{`${formatNumber(getBalanceAmount(maximumTokenEntry, currency.decimals).toNumber(), 3, 3)} ${\r\n              ifo.currency.symbol\r\n            }`}</Text>\r\n          </Flex>\r\n          <Flex justifyContent=\"space-between\" mb=\"8px\">\r\n            <Text>{t('Commit')}:</Text>\r\n            <Flex flexGrow={1} justifyContent=\"flex-end\">\r\n              <Image\r\n                src={\r\n                  ifo.currency.symbol === 'BS'\r\n                    ? '/images/cake.svg'\r\n                    : `/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.svg`\r\n                }\r\n                width={24}\r\n                height={24}\r\n              />\r\n              <Text ml=\"4px\">{currency.symbol}</Text>\r\n            </Flex>\r\n          </Flex>\r\n          <BalanceInput\r\n            value={value}\r\n            currencyValue={`${publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2)} USD`}\r\n            onUserInput={setValue}\r\n            isWarning={isWarning}\r\n            decimals={currency.decimals}\r\n            onBlur={() => {\r\n              if (isWarning) {\r\n                // auto adjust to max value\r\n                setValue(getBalanceAmount(maximumTokenCommittable).toString())\r\n              }\r\n            }}\r\n            mb=\"8px\"\r\n          />\r\n          {isWarning && (\r\n            <Text\r\n              color={valueWithTokenDecimals.isGreaterThan(userCurrencyBalance) ? 'failure' : 'warning'}\r\n              textAlign=\"right\"\r\n              fontSize=\"12px\"\r\n              mb=\"8px\"\r\n            >\r\n              {valueWithTokenDecimals.isGreaterThan(userCurrencyBalance)\r\n                ? t('Insufficient Balance')\r\n                : t('Exceeded max CAKE entry')}\r\n            </Text>\r\n          )}\r\n          <Text color=\"textSubtle\" textAlign=\"right\" fontSize=\"12px\" mb=\"16px\">\r\n            {t('Balance: %balance%', {\r\n              balance: getBalanceAmount(userCurrencyBalance, currency.decimals).toString(),\r\n            })}\r\n          </Text>\r\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\r\n            {multiplierValues.map((multiplierValue, index) => (\r\n              <Button\r\n                key={multiplierValue}\r\n                scale=\"xs\"\r\n                variant=\"tertiary\"\r\n                onClick={() => setValue(getBalanceAmount(maximumTokenCommittable.times(multiplierValue)).toString())}\r\n                mr={index < multiplierValues.length - 1 ? '8px' : 0}\r\n              >\r\n                {multiplierValue * 100}%\r\n              </Button>\r\n            ))}\r\n          </Flex>\r\n          <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"24px\">\r\n            {t(\r\n              'If you don’t commit enough CAKE, you may not receive any IFO tokens at all and will only receive a full refund of your CAKE.',\r\n            )}\r\n            <Link\r\n              fontSize=\"12px\"\r\n              display=\"inline\"\r\n              href=\"https://docs.pancakeswap.finance/products/ifo-initial-farm-offering\"\r\n              external\r\n            >\r\n              {t('Read more')}\r\n            </Link>\r\n          </Text>\r\n          <ApproveConfirmButtons\r\n            isApproveDisabled={isConfirmed || isConfirming || isApproved}\r\n            isApproving={isApproving}\r\n            isConfirmDisabled={\r\n              !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0) || isWarning\r\n            }\r\n            isConfirming={isConfirming}\r\n            onApprove={handleApprove}\r\n            onConfirm={handleConfirm}\r\n          />\r\n        </Box>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ContributeModal\r\n","import React from 'react'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Button, useModal } from '@pancakeswap/uikit'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport GetTokenModal from './GetTokenModal'\r\nimport ContributeModal from './ContributeModal'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\nconst ContributeButton: React.FC<Props> = ({ poolId, ifo, publicIfoData, walletIfoData }) => {\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n  const { isPendingTx, amountTokenCommittedInLP } = userPoolCharacteristics\r\n  const { limitPerUserInLP } = publicPoolCharacteristics\r\n  const { t } = useTranslation()\r\n  const { toastSuccess } = useToast()\r\n  const { currentBlock } = useBlock()\r\n  const { balance: userCurrencyBalance } = useTokenBalance(ifo.currency.address)\r\n\r\n  // Refetch all the data, and display a message when fetching is done\r\n  const handleContributeSuccess = async (amount: BigNumber, txHash: string) => {\r\n    await Promise.all([publicIfoData.fetchIfoData(currentBlock), walletIfoData.fetchIfoData()])\r\n    toastSuccess(\r\n      t('Success!'),\r\n      <ToastDescriptionWithTx txHash={txHash}>\r\n        {t('You have contributed %amount% CAKE to this IFO!', {\r\n          amount: getBalanceNumber(amount),\r\n        })}\r\n      </ToastDescriptionWithTx>,\r\n    )\r\n  }\r\n\r\n  const [onPresentContributeModal] = useModal(\r\n    <ContributeModal\r\n      poolId={poolId}\r\n      creditLeft={walletIfoData.ifoCredit?.creditLeft}\r\n      ifo={ifo}\r\n      publicIfoData={publicIfoData}\r\n      walletIfoData={walletIfoData}\r\n      onSuccess={handleContributeSuccess}\r\n      userCurrencyBalance={userCurrencyBalance}\r\n    />,\r\n    false,\r\n  )\r\n\r\n  const [onPresentGetTokenModal] = useModal(<GetTokenModal currency={ifo.currency} />, false)\r\n\r\n  const isDisabled =\r\n    isPendingTx ||\r\n    (walletIfoData.ifoCredit?.creditLeft && walletIfoData.ifoCredit?.creditLeft.isLessThanOrEqualTo(0)) ||\r\n    (limitPerUserInLP.isGreaterThan(0) && amountTokenCommittedInLP.isGreaterThanOrEqualTo(limitPerUserInLP))\r\n\r\n  return (\r\n    <Button\r\n      onClick={userCurrencyBalance.isEqualTo(0) ? onPresentGetTokenModal : onPresentContributeModal}\r\n      width=\"100%\"\r\n      disabled={isDisabled}\r\n    >\r\n      {isDisabled ? t('Max. Committed') : t('Commit CAKE')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ContributeButton\r\n","import React from 'react'\r\nimport { AutoRenewIcon, Button } from '@pancakeswap/uikit'\r\nimport { PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useToast from 'hooks/useToast'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { logError } from 'utils/sentry'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifoVersion: number\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nconst ClaimButton: React.FC<Props> = ({ poolId, ifoVersion, walletIfoData }) => {\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n  const { t } = useTranslation()\r\n  const { toastError, toastSuccess } = useToast()\r\n\r\n  const setPendingTx = (isPending: boolean) => walletIfoData.setPendingTx(isPending, poolId)\r\n\r\n  const handleClaim = async () => {\r\n    try {\r\n      let txHash\r\n      setPendingTx(true)\r\n\r\n      if (ifoVersion === 1) {\r\n        const tx = await walletIfoData.contract.harvest()\r\n        const receipt = await tx.wait()\r\n        txHash = receipt.transactionHash\r\n      } else {\r\n        const tx = await walletIfoData.contract.harvestPool(poolId === PoolIds.poolBasic ? 0 : 1)\r\n        const receipt = await tx.wait()\r\n        txHash = receipt.transactionHash\r\n      }\r\n\r\n      walletIfoData.setIsClaimed(poolId)\r\n      toastSuccess(\r\n        t('Success!'),\r\n        <ToastDescriptionWithTx txHash={txHash}>\r\n          {t('You have successfully claimed your rewards.')}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n    } catch (error) {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      logError(error)\r\n    } finally {\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleClaim}\r\n      disabled={userPoolCharacteristics.isPendingTx}\r\n      width=\"100%\"\r\n      isLoading={userPoolCharacteristics.isPendingTx}\r\n      endIcon={userPoolCharacteristics.isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n    >\r\n      {t('Claim')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ClaimButton\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Button } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Link } from 'react-router-dom'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport ContributeButton from './ContributeButton'\r\nimport ClaimButton from './ClaimButton'\r\nimport { SkeletonCardActions } from './Skeletons'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  hasProfile: boolean\r\n  isLoading: boolean\r\n}\r\n\r\nconst IfoCardActions: React.FC<Props> = ({ poolId, ifo, publicIfoData, walletIfoData, hasProfile, isLoading }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  if (isLoading) {\r\n    return <SkeletonCardActions />\r\n  }\r\n\r\n  if (!account) {\r\n    return <ConnectWalletButton width=\"100%\" />\r\n  }\r\n\r\n  if (!hasProfile) {\r\n    return (\r\n      <Button as={Link} to={`${nftsBaseUrl}/profile/${account.toLowerCase()}`} width=\"100%\">\r\n        {t('Activate your Profile')}\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {publicIfoData.status === 'live' && (\r\n        <ContributeButton poolId={poolId} ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n      )}\r\n      {publicIfoData.status === 'finished' &&\r\n        !userPoolCharacteristics.hasClaimed &&\r\n        (userPoolCharacteristics.offeringAmountInToken.isGreaterThan(0) ||\r\n          userPoolCharacteristics.refundingAmountInLP.isGreaterThan(0)) && (\r\n          <ClaimButton poolId={poolId} ifoVersion={ifo.version} walletIfoData={walletIfoData} />\r\n        )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IfoCardActions\r\n","import React, { ReactNode } from 'react'\r\nimport tokens from 'config/constants/tokens'\r\nimport { Text, Flex, Box, Skeleton, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\r\nimport useBUSDPrice from 'hooks/useBUSDPrice'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport { SkeletonCardDetails } from './Skeletons'\r\n\r\nexport interface IfoCardDetailsProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nexport interface FooterEntryProps {\r\n  label: ReactNode\r\n  value: string | number\r\n}\r\n\r\nconst FooterEntry: React.FC<FooterEntryProps> = ({ label, value }) => {\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Text small color=\"textSubtle\">\r\n        {label}\r\n      </Text>\r\n      {value ? (\r\n        <Text small textAlign=\"right\">\r\n          {value}\r\n        </Text>\r\n      ) : (\r\n        <Skeleton height={21} width={80} />\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst MaxTokenEntry = ({ maxToken, ifo, poolId }: { maxToken: number; ifo: Ifo; poolId: PoolIds }) => {\r\n  const isCurrencyCake = ifo.currency === tokens.cake\r\n  const isV3 = ifo.version === 3\r\n  const { t } = useTranslation()\r\n\r\n  const tooltipContent =\r\n    poolId === PoolIds.poolBasic\r\n      ? t(\r\n          'For the basic sale, Max CAKE entry is capped by minimum between your average CAKE balance in the IFO CAKE pool, or the pool’s hard cap. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        )\r\n      : t(\r\n          'For the unlimited sale, Max CAKE entry is capped by your average CAKE balance in the IFO CAKE pool. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(tooltipContent, { placement: 'bottom-start' })\r\n  const label = isCurrencyCake ? t('Max. CAKE entry') : t('Max. token entry')\r\n  const price = useBUSDPrice(ifo.currency)\r\n\r\n  const dollarValueOfToken = multiplyPriceByAmount(price, maxToken, ifo.currency.decimals)\r\n\r\n  if (!isV3 && poolId === PoolIds.poolUnlimited) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isV3 && tooltipVisible && tooltip}\r\n      <FooterEntry\r\n        label={\r\n          isV3 ? (\r\n            <TooltipText small color=\"textSubtle\" ref={targetRef}>\r\n              {label}\r\n            </TooltipText>\r\n          ) : (\r\n            label\r\n          )\r\n        }\r\n        value={`${formatNumber(maxToken, 3, 3)} ${!isCurrencyCake ? ifo.currency.symbol : ''} ${\r\n          dollarValueOfToken > 0 ? ` ~($${dollarValueOfToken.toFixed(0)})` : ''\r\n        }`}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoCardDetails: React.FC<IfoCardDetailsProps> = ({ poolId, ifo, publicIfoData, walletIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, currencyPriceInUSD } = publicIfoData\r\n  const poolCharacteristic = publicIfoData[poolId]\r\n  const walletCharacteristic = walletIfoData[poolId]\r\n\r\n  let version3MaxTokens = walletIfoData.ifoCredit?.creditLeft\r\n    ? // if creditLeft > limit show limit else show creditLeft\r\n      walletIfoData.ifoCredit.creditLeft.gt(\r\n        poolCharacteristic.limitPerUserInLP.minus(walletCharacteristic.amountTokenCommittedInLP),\r\n      )\r\n      ? poolCharacteristic.limitPerUserInLP.minus(walletCharacteristic.amountTokenCommittedInLP)\r\n      : walletIfoData.ifoCredit.creditLeft\r\n    : null\r\n\r\n  // unlimited pool just show the credit left\r\n  version3MaxTokens = poolId === PoolIds.poolUnlimited ? walletIfoData.ifoCredit?.creditLeft : version3MaxTokens\r\n\r\n  /* Format start */\r\n  const maxLpTokens =\r\n    ifo.version === 3\r\n      ? version3MaxTokens\r\n        ? getBalanceNumber(version3MaxTokens, ifo.currency.decimals)\r\n        : 0\r\n      : getBalanceNumber(poolCharacteristic.limitPerUserInLP, ifo.currency.decimals)\r\n  const taxRate = `${poolCharacteristic.taxRate}%`\r\n\r\n  const totalCommittedPercent = poolCharacteristic.totalAmountPool\r\n    .div(poolCharacteristic.raisingAmountPool)\r\n    .times(100)\r\n    .toFixed(2)\r\n  const totalLPCommitted = getBalanceNumber(poolCharacteristic.totalAmountPool, ifo.currency.decimals)\r\n  const totalLPCommittedInUSD = currencyPriceInUSD.times(totalLPCommitted)\r\n  const totalCommitted = `~$${formatNumber(totalLPCommittedInUSD.toNumber(), 0, 0)} (${totalCommittedPercent}%)`\r\n\r\n  const sumTaxesOverflow = poolCharacteristic.totalAmountPool.times(poolCharacteristic.taxRate).times(0.01)\r\n  const pricePerTokenWithFeeToOriginalRatio = sumTaxesOverflow\r\n    .plus(poolCharacteristic.raisingAmountPool)\r\n    .div(poolCharacteristic.offeringAmountPool)\r\n    .div(poolCharacteristic.raisingAmountPool.div(poolCharacteristic.offeringAmountPool))\r\n  const pricePerTokenWithFee = `~$${formatNumber(\r\n    pricePerTokenWithFeeToOriginalRatio.times(ifo.tokenOfferingPrice).toNumber(),\r\n    0,\r\n    2,\r\n  )}`\r\n\r\n  const tokenEntry = <MaxTokenEntry poolId={poolId} ifo={ifo} maxToken={maxLpTokens} />\r\n\r\n  /* Format end */\r\n  const renderBasedOnIfoStatus = () => {\r\n    if (status === 'coming_soon') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          <FooterEntry label={t('Funds to raise:')} value={ifo[poolId].raiseAmount} />\r\n          {ifo[poolId].cakeToBurn !== '$0' && <FooterEntry label={t('CAKE to burn:')} value={ifo[poolId].cakeToBurn} />}\r\n          <FooterEntry\r\n            label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n            value={`$${ifo.tokenOfferingPrice}`}\r\n          />\r\n        </>\r\n      )\r\n    }\r\n    if (status === 'live') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          {poolId === PoolIds.poolBasic && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n              value={`$${ifo.tokenOfferingPrice}`}\r\n            />\r\n          )}\r\n          {poolId === PoolIds.poolUnlimited && <FooterEntry label={t('Additional fee:')} value={taxRate} />}\r\n          {poolId === PoolIds.poolUnlimited && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol% with fee:', { symbol: ifo.token.symbol })}\r\n              value={pricePerTokenWithFee}\r\n            />\r\n          )}\r\n          <FooterEntry label={t('Total committed:')} value={currencyPriceInUSD.gt(0) ? totalCommitted : null} />\r\n        </>\r\n      )\r\n    }\r\n    if (status === 'finished') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          {poolId === PoolIds.poolUnlimited && <FooterEntry label={t('Additional fee:')} value={taxRate} />}\r\n          <FooterEntry label={t('Total committed:')} value={currencyPriceInUSD.gt(0) ? totalCommitted : null} />\r\n          <FooterEntry label={t('Funds to raise:')} value={ifo[poolId].raiseAmount} />\r\n          {ifo[poolId].cakeToBurn !== '$0' && <FooterEntry label={t('CAKE to burn:')} value={ifo[poolId].cakeToBurn} />}\r\n          {ifo.version > 1 && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n              value={`$${ifo.tokenOfferingPrice ? ifo.tokenOfferingPrice : '?'}`}\r\n            />\r\n          )}\r\n          {ifo.version > 1 && poolId === PoolIds.poolUnlimited && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol% with fee:', { symbol: ifo.token.symbol })}\r\n              value={pricePerTokenWithFee}\r\n            />\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n    return <SkeletonCardDetails />\r\n  }\r\n\r\n  return <Box paddingTop=\"24px\">{renderBasedOnIfoStatus()}</Box>\r\n}\r\n\r\nexport default IfoCardDetails\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { ContextApi } from 'contexts/Localization/types'\r\nimport { Box, Card, CardBody, CardHeader, Flex, HelpIcon, Text, useTooltip } from '@pancakeswap/uikit'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { EnableStatus } from '../types'\r\nimport IfoCardTokens from './IfoCardTokens'\r\nimport IfoCardActions from './IfoCardActions'\r\nimport IfoCardDetails from './IfoCardDetails'\r\n\r\nconst StyledCard = styled(Card)`\r\n  background: none;\r\n  max-width: 368px;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  height: fit-content;\r\n`\r\n\r\ninterface IfoCardProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  onApprove: () => Promise<any>\r\n  enableStatus: EnableStatus\r\n}\r\n\r\nconst cardConfig = (\r\n  t: ContextApi['t'],\r\n  poolId: PoolIds,\r\n): {\r\n  title: string\r\n  variant: 'blue' | 'violet'\r\n  tooltip: string\r\n} => {\r\n  switch (poolId) {\r\n    case PoolIds.poolBasic:\r\n      return {\r\n        title: t('Basic Sale'),\r\n        variant: 'blue',\r\n        tooltip: t(\r\n          'Every person can only commit a limited amount, but may expect a higher return per token committed.',\r\n        ),\r\n      }\r\n    case PoolIds.poolUnlimited:\r\n      return {\r\n        title: t('Unlimited Sale'),\r\n        variant: 'violet',\r\n        tooltip: t('No limits on the amount you can commit. Additional fee applies when claiming.'),\r\n      }\r\n    default:\r\n      return { title: '', variant: 'blue', tooltip: '' }\r\n  }\r\n}\r\n\r\nconst SmallCard: React.FC<IfoCardProps> = ({ poolId, ifo, publicIfoData, walletIfoData, onApprove, enableStatus }) => {\r\n  const { t } = useTranslation()\r\n  const config = cardConfig(t, poolId)\r\n  const { hasProfile, isLoading: isProfileLoading } = useProfile()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(config.tooltip, { placement: 'bottom' })\r\n\r\n  const isLoading = isProfileLoading || publicIfoData.status === 'idle'\r\n\r\n  return (\r\n    <>\r\n      {tooltipVisible && tooltip}\r\n      <StyledCard>\r\n        <CardHeader p=\"16px 24px\" variant={config.variant}>\r\n          <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Text bold fontSize=\"20px\" lineHeight={1}>\r\n              {config.title}\r\n            </Text>\r\n            <div ref={targetRef}>\r\n              <HelpIcon />\r\n            </div>\r\n          </Flex>\r\n        </CardHeader>\r\n        <CardBody p=\"12px\">\r\n          <IfoCardTokens\r\n            poolId={poolId}\r\n            ifo={ifo}\r\n            publicIfoData={publicIfoData}\r\n            walletIfoData={walletIfoData}\r\n            hasProfile={hasProfile}\r\n            isLoading={isLoading}\r\n            onApprove={onApprove}\r\n            enableStatus={enableStatus}\r\n          />\r\n          <Box mt=\"24px\">\r\n            <IfoCardActions\r\n              poolId={poolId}\r\n              ifo={ifo}\r\n              publicIfoData={publicIfoData}\r\n              walletIfoData={walletIfoData}\r\n              hasProfile={hasProfile}\r\n              isLoading={isLoading}\r\n            />\r\n          </Box>\r\n          <IfoCardDetails poolId={poolId} ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n        </CardBody>\r\n      </StyledCard>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SmallCard\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { Flex, Heading, PocketWatchIcon, Text, Skeleton } from '@pancakeswap/uikit'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\nimport { PublicIfoData } from 'views/Ifos/types'\r\n\r\ninterface Props {\r\n  publicIfoData: PublicIfoData\r\n}\r\n\r\nconst GradientText = styled(Heading)`\r\n  background: -webkit-linear-gradient(#ffd800, #eb8c00);\r\n  background-clip: text;\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);\r\n`\r\n\r\nconst FlexGap = styled(Flex)<{ gap: string }>`\r\n  gap: ${({ gap }) => gap};\r\n`\r\n\r\nexport const SoonTimer: React.FC<Props> = ({ publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, secondsUntilStart } = publicIfoData\r\n  const timeUntil = getTimePeriods(secondsUntilStart)\r\n  return (\r\n    <Flex justifyContent=\"center\" position=\"relative\">\r\n      {status === 'idle' ? (\r\n        <Skeleton animation=\"pulse\" variant=\"rect\" width=\"100%\" height=\"48px\" />\r\n      ) : (\r\n        <>\r\n          <FlexGap gap=\"8px\" alignItems=\"center\">\r\n            <Heading as=\"h3\" scale=\"lg\" color=\"secondary\">\r\n              {t('Start in')}\r\n            </Heading>\r\n            <FlexGap gap=\"4px\" alignItems=\"baseline\">\r\n              {timeUntil.days ? (\r\n                <>\r\n                  <Heading scale=\"lg\" color=\"secondary\">\r\n                    {timeUntil.days}\r\n                  </Heading>\r\n                  <Text color=\"secondary\">{t('d')}</Text>\r\n                </>\r\n              ) : null}\r\n              {timeUntil.days || timeUntil.hours ? (\r\n                <>\r\n                  <Heading color=\"secondary\" scale=\"lg\">\r\n                    {timeUntil.hours}\r\n                  </Heading>\r\n                  <Text color=\"secondary\">{t('h')}</Text>\r\n                </>\r\n              ) : null}\r\n              <>\r\n                <Heading color=\"secondary\" scale=\"lg\">\r\n                  {timeUntil.minutes}\r\n                </Heading>\r\n                <Text color=\"secondary\">{t('m')}</Text>\r\n              </>\r\n            </FlexGap>\r\n          </FlexGap>\r\n        </>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst EndInHeading = styled(Heading)`\r\n  color: white;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  line-height: 1.1;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 24px;\r\n  }\r\n`\r\n\r\nconst LiveNowHeading = styled(EndInHeading)`\r\n  color: white;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    background: -webkit-linear-gradient(#ffd800, #eb8c00);\r\n    background-clip: text;\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);\r\n  }\r\n`\r\n\r\nconst LiveTimer: React.FC<Props> = ({ publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, secondsUntilEnd } = publicIfoData\r\n  const timeUntil = getTimePeriods(secondsUntilEnd)\r\n  return (\r\n    <Flex justifyContent=\"center\" position=\"relative\">\r\n      {status === 'idle' ? (\r\n        <Skeleton animation=\"pulse\" variant=\"rect\" width=\"100%\" height=\"48px\" />\r\n      ) : (\r\n        <>\r\n          <PocketWatchIcon width=\"42px\" mr=\"8px\" />\r\n          <FlexGap gap=\"8px\" alignItems=\"center\">\r\n            <LiveNowHeading as=\"h3\">{`${t('Live Now').toUpperCase()}!`}</LiveNowHeading>\r\n            <EndInHeading as=\"h3\" scale=\"lg\" color=\"white\">\r\n              {t('Ends in')}\r\n            </EndInHeading>\r\n            <FlexGap gap=\"4px\" alignItems=\"baseline\">\r\n              {timeUntil.days ? (\r\n                <>\r\n                  <GradientText scale=\"lg\">{timeUntil.days}</GradientText>\r\n                  <Text color=\"white\">{t('d')}</Text>\r\n                </>\r\n              ) : null}\r\n              {timeUntil.days || timeUntil.hours ? (\r\n                <>\r\n                  <GradientText scale=\"lg\">{timeUntil.hours}</GradientText>\r\n                  <Text color=\"white\">{t('h')}</Text>\r\n                </>\r\n              ) : null}\r\n              <>\r\n                <GradientText scale=\"lg\">{timeUntil.minutes}</GradientText>\r\n                <Text color=\"white\">{t('m')}</Text>\r\n              </>\r\n            </FlexGap>\r\n          </FlexGap>\r\n        </>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default LiveTimer\r\n","import { Box, Flex, Heading, Progress, ProgressBar } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { PublicIfoData } from '../../types'\r\nimport LiveTimer, { SoonTimer } from './Timer'\r\n\r\nconst BigCurve = styled(Box)<{ $status: PublicIfoData['status'] }>`\r\n  width: 150%;\r\n  position: absolute;\r\n  top: -150%;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    border-radius: 50%;\r\n  }\r\n\r\n  ${({ $status, theme }) => {\r\n    switch ($status) {\r\n      case 'coming_soon':\r\n        return `\r\n          background: ${theme.colors.tertiary};\r\n        `\r\n      case 'live':\r\n        return `\r\n          background: linear-gradient(#8051D6 100%, #492286 100%);\r\n        `\r\n      case 'finished':\r\n        return `\r\n          background: ${theme.colors.input};\r\n        `\r\n      default:\r\n        return ''\r\n    }\r\n  }}\r\n`\r\n\r\nexport const IfoRibbon = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  const { status } = publicIfoData\r\n\r\n  let Component\r\n  if (status === 'finished') {\r\n    Component = <IfoRibbonEnd />\r\n  } else if (status === 'live') {\r\n    Component = <IfoRibbonLive publicIfoData={publicIfoData} />\r\n  } else if (status === 'coming_soon') {\r\n    Component = <IfoRibbonSoon publicIfoData={publicIfoData} />\r\n  }\r\n\r\n  if (status === 'idle') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {status === 'live' && (\r\n        <Progress variant=\"flat\">\r\n          <ProgressBar\r\n            $useDark\r\n            $background=\"linear-gradient(273deg, #ffd800 -2.87%, #eb8c00 113.73%)\"\r\n            style={{ width: `${Math.min(Math.max(publicIfoData.progress, 0), 100)}%` }}\r\n          />\r\n        </Progress>\r\n      )}\r\n      <Flex\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        flexDirection=\"column\"\r\n        minHeight={['48px', '48px', '48px', '75px']}\r\n        position=\"relative\"\r\n        overflow=\"hidden\"\r\n      >\r\n        {Component}\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonEnd = () => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"finished\" />\r\n      <Box position=\"relative\">\r\n        <Heading as=\"h3\" scale=\"lg\" color=\"textSubtle\">\r\n          {t('Sale Finished!')}\r\n        </Heading>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonSoon = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"coming_soon\" />\r\n      <Box position=\"relative\">\r\n        <Heading as=\"h3\" scale=\"lg\" color=\"secondary\">\r\n          <SoonTimer publicIfoData={publicIfoData} />\r\n        </Heading>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonLive = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"live\" />\r\n      <Box position=\"relative\">\r\n        <LiveTimer publicIfoData={publicIfoData} />\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  ExpandableLabel,\r\n  ExpandableButton,\r\n  useMatchBreakpoints,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport useToast from 'hooks/useToast'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport styled from 'styled-components'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport useIsWindowVisible from '../../../../hooks/useIsWindowVisible'\r\nimport useIfoApprove from '../../hooks/useIfoApprove'\r\nimport IfoAchievement from './Achievement'\r\nimport IfoPoolCard from './IfoPoolCard'\r\nimport { EnableStatus } from './types'\r\nimport { IfoRibbon } from './IfoRibbon'\r\n\r\ninterface IfoFoldableCardProps {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nconst StyledCard = styled(Card)<{ $isCurrent?: boolean }>`\r\n  width: 100%;\r\n  margin: auto;\r\n  border-top-left-radius: 32px;\r\n  border-top-right-radius: 32px;\r\n\r\n  ${({ $isCurrent }) =>\r\n    $isCurrent &&\r\n    `\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n  > div {\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n  }\r\n  `}\r\n\r\n  > div {\r\n    background: ${({ theme, $isCurrent }) => ($isCurrent ? theme.colors.gradients.bubblegum : theme.colors.dropdown)};\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    border-top-left-radius: 32px;\r\n    border-top-right-radius: 32px;\r\n\r\n    > div {\r\n      border-top-left-radius: 32px;\r\n      border-top-right-radius: 32px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Header = styled(CardHeader)<{ ifoId: string; $isCurrent?: boolean }>`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  height: ${({ $isCurrent }) => ($isCurrent ? '64px' : '112px')};\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  border-top-left-radius: 32px;\r\n  border-top-right-radius: 32px;\r\n  background-image: ${({ ifoId }) => `url('/images/ifos/${ifoId}-bg.svg'), url('/images/ifos/${ifoId}-bg.png')`};\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    height: 112px;\r\n  }\r\n`\r\n\r\nconst CardsWrapper = styled.div<{ singleCard: boolean }>`\r\n  display: grid;\r\n  grid-gap: 32px;\r\n  grid-template-columns: 1fr;\r\n  ${({ theme }) => theme.mediaQueries.xxl} {\r\n    grid-template-columns: ${({ singleCard }) => (singleCard ? '1fr' : '1fr 1fr')};\r\n    justify-items: ${({ singleCard }) => (singleCard ? 'center' : 'unset')};\r\n  }\r\n`\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  padding: 24px 16px;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    padding: 24px;\r\n  }\r\n`\r\n\r\nconst StyledCardFooter = styled(CardFooter)`\r\n  padding: 0;\r\n  background: ${({ theme }) => theme.colors.backgroundAlt};\r\n  text-align: center;\r\n`\r\n\r\nconst StyledNoHatBunny = styled.div<{ $isLive: boolean; $isCurrent?: boolean }>`\r\n  position: absolute;\r\n  left: -24px;\r\n  z-index: 1;\r\n  top: 33px;\r\n\r\n  > img {\r\n    width: 78px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    top: ${({ $isLive }) => ($isLive ? '46px' : '33px')};\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    left: auto;\r\n    top: ${({ $isLive }) => ($isLive ? '61px' : '48px')};\r\n    right: ${({ $isCurrent }) => ($isCurrent ? '17px' : '90px')};\r\n\r\n    > img {\r\n      width: 123px;\r\n    }\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    right: ${({ $isCurrent }) => ($isCurrent ? '67px' : '90px')};\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.xxl} {\r\n    right: 90px;\r\n  }\r\n`\r\n\r\nconst NoHatBunny = ({ isLive, isCurrent }: { isLive?: boolean; isCurrent?: boolean }) => {\r\n  const { isXs, isSm, isMd } = useMatchBreakpoints()\r\n  const isSmallerThanTablet = isXs || isSm || isMd\r\n  if (isSmallerThanTablet && isLive) return null\r\n  return (\r\n    <StyledNoHatBunny $isLive={isLive} $isCurrent={isCurrent}>\r\n      <img\r\n        src={`/images/ifos/assets/bunnypop-${!isSmallerThanTablet ? 'right' : 'left'}.png`}\r\n        width={123}\r\n        height={162}\r\n        alt=\"bunny\"\r\n      />\r\n    </StyledNoHatBunny>\r\n  )\r\n}\r\n\r\n// Active Ifo\r\nexport const IfoCurrentCard = ({\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n}: {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { isMobile } = useMatchBreakpoints()\r\n\r\n  const shouldShowBunny = publicIfoData.status === 'live' || publicIfoData.status === 'coming_soon'\r\n\r\n  return (\r\n    <>\r\n      {isMobile && (\r\n        <Box\r\n          className=\"sticky-header\"\r\n          position=\"sticky\"\r\n          bottom=\"48px\"\r\n          width=\"100%\"\r\n          zIndex={6}\r\n          maxWidth={['400px', '400px', '400px', '100%']}\r\n        >\r\n          <Header $isCurrent ifoId={ifo.id} />\r\n          <IfoRibbon publicIfoData={publicIfoData} />\r\n          {shouldShowBunny && <NoHatBunny isLive={publicIfoData.status === 'live'} />}\r\n        </Box>\r\n      )}\r\n      <Box position=\"relative\" width=\"100%\" maxWidth={['400px', '400px', '400px', '100%']}>\r\n        {!isMobile && shouldShowBunny && <NoHatBunny isCurrent isLive={publicIfoData.status === 'live'} />}\r\n        <StyledCard $isCurrent>\r\n          {!isMobile && (\r\n            <>\r\n              <Header $isCurrent ifoId={ifo.id} />\r\n              <IfoRibbon publicIfoData={publicIfoData} />\r\n            </>\r\n          )}\r\n          <IfoCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n          <StyledCardFooter>\r\n            <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n              {isExpanded ? t('Hide') : t('Details')}\r\n            </ExpandableLabel>\r\n            {isExpanded && <IfoAchievement ifo={ifo} publicIfoData={publicIfoData} />}\r\n          </StyledCardFooter>\r\n        </StyledCard>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst FoldableContent = styled.div<{ isVisible: boolean }>`\r\n  display: ${({ isVisible }) => (isVisible ? 'block' : 'none')};\r\n`\r\n\r\n// Past Ifo\r\nconst IfoFoldableCard = ({\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n}: {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const { isDesktop } = useMatchBreakpoints()\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      {isExpanded && isDesktop && <NoHatBunny isLive={false} />}\r\n      <Box as={StyledCard} borderRadius=\"32px\">\r\n        <Box position=\"relative\">\r\n          <Header ifoId={ifo.id}>\r\n            <ExpandableButton expanded={isExpanded} onClick={() => setIsExpanded((prev) => !prev)} />\r\n          </Header>\r\n          {isExpanded && (\r\n            <>\r\n              <IfoRibbon publicIfoData={publicIfoData} />\r\n            </>\r\n          )}\r\n        </Box>\r\n        <FoldableContent isVisible={isExpanded}>\r\n          <IfoCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n          <IfoAchievement ifo={ifo} publicIfoData={publicIfoData} />\r\n        </FoldableContent>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst IfoCard: React.FC<IfoFoldableCardProps> = ({ ifo, publicIfoData, walletIfoData }) => {\r\n  const { currentBlock } = useBlock()\r\n  const { fetchIfoData: fetchPublicIfoData, isInitialized: isPublicIfoDataInitialized, secondsUntilEnd } = publicIfoData\r\n  const {\r\n    contract,\r\n    fetchIfoData: fetchWalletIfoData,\r\n    resetIfoData: resetWalletIfoData,\r\n    isInitialized: isWalletDataInitialized,\r\n  } = walletIfoData\r\n  const [enableStatus, setEnableStatus] = useState(EnableStatus.DISABLED)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const raisingTokenContract = useERC20(ifo.currency.address)\r\n  // Continue to fetch 2 more minutes to get latest data\r\n  const isRecentlyActive =\r\n    (publicIfoData.status !== 'finished' || (publicIfoData.status === 'finished' && secondsUntilEnd >= -120)) &&\r\n    ifo.isActive\r\n  const onApprove = useIfoApprove(raisingTokenContract, contract.address)\r\n  const { toastSuccess } = useToast()\r\n  const { fastRefresh } = useRefresh()\r\n  const isWindowVisible = useIsWindowVisible()\r\n\r\n  useEffect(() => {\r\n    if (isRecentlyActive || !isPublicIfoDataInitialized) {\r\n      fetchPublicIfoData(currentBlock)\r\n    }\r\n  }, [isRecentlyActive, isPublicIfoDataInitialized, fetchPublicIfoData, currentBlock])\r\n\r\n  useEffect(() => {\r\n    if (isWindowVisible && (isRecentlyActive || !isWalletDataInitialized)) {\r\n      if (account) {\r\n        fetchWalletIfoData()\r\n      }\r\n    }\r\n\r\n    if (!account && isWalletDataInitialized) {\r\n      resetWalletIfoData()\r\n    }\r\n  }, [\r\n    isWindowVisible,\r\n    account,\r\n    isRecentlyActive,\r\n    isWalletDataInitialized,\r\n    fetchWalletIfoData,\r\n    resetWalletIfoData,\r\n    fastRefresh,\r\n  ])\r\n\r\n  const handleApprove = async () => {\r\n    try {\r\n      setEnableStatus(EnableStatus.IS_ENABLING)\r\n\r\n      const receipt = await onApprove()\r\n\r\n      setEnableStatus(EnableStatus.ENABLED)\r\n      toastSuccess(\r\n        t('Successfully Enabled!'),\r\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n          {t('You can now participate in the %symbol% IFO.', { symbol: ifo.token.symbol })}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n    } catch (error) {\r\n      setEnableStatus(EnableStatus.DISABLED)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const checkAllowance = async () => {\r\n      try {\r\n        const response = await raisingTokenContract.allowance(account, contract.address)\r\n        const currentAllowance = new BigNumber(response.toString())\r\n        setEnableStatus(currentAllowance.lte(0) ? EnableStatus.DISABLED : EnableStatus.ENABLED)\r\n      } catch (error) {\r\n        setEnableStatus(EnableStatus.DISABLED)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      checkAllowance()\r\n    }\r\n  }, [account, raisingTokenContract, contract, setEnableStatus])\r\n\r\n  return (\r\n    <>\r\n      <StyledCardBody>\r\n        <CardsWrapper singleCard={!publicIfoData.poolBasic || !walletIfoData.poolBasic}>\r\n          {publicIfoData.poolBasic && walletIfoData.poolBasic && (\r\n            <IfoPoolCard\r\n              poolId={PoolIds.poolBasic}\r\n              ifo={ifo}\r\n              publicIfoData={publicIfoData}\r\n              walletIfoData={walletIfoData}\r\n              onApprove={handleApprove}\r\n              enableStatus={enableStatus}\r\n            />\r\n          )}\r\n          <IfoPoolCard\r\n            poolId={PoolIds.poolUnlimited}\r\n            ifo={ifo}\r\n            publicIfoData={publicIfoData}\r\n            walletIfoData={walletIfoData}\r\n            onApprove={handleApprove}\r\n            enableStatus={enableStatus}\r\n          />\r\n        </CardsWrapper>\r\n      </StyledCardBody>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IfoFoldableCard\r\n","import { Box } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\n\r\nconst IfoLayout = styled(Box)`\r\n  display: grid;\r\n  > div:not(.sticky-header) {\r\n    margin-bottom: 32px;\r\n  }\r\n`\r\nexport const IfoLayoutWrapper = styled(IfoLayout)`\r\n  column-gap: 32px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-template-columns: minmax(300px, 1fr) minmax(462px, 2fr);\r\n  }\r\n\r\n  > div {\r\n    margin: 0 auto;\r\n    align-items: flex-start;\r\n  }\r\n`\r\n\r\nexport default IfoLayout\r\n","import {\r\n  useMatchBreakpoints,\r\n  Card,\r\n  CardHeader,\r\n  Text,\r\n  Flex,\r\n  Box,\r\n  ExpandableButton,\r\n  CardBody,\r\n  HelpIcon,\r\n  useTooltip,\r\n  LinkExternal,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport Balance from 'components/Balance'\r\nimport { TokenPairImage } from 'components/TokenImage'\r\nimport tokens from 'config/constants/tokens'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport React, { useState } from 'react'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr, useIfoPooStartBlock } from 'state/pools/hooks'\r\nimport styled from 'styled-components'\r\nimport { getBalanceNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport CakeVaultCard from 'views/Pools/components/CakeVaultCard'\r\nimport ExpandedFooter from 'views/Pools/components/PoolCard/CardFooter/ExpandedFooter'\r\nimport { IfoVaultCardAvgBalance } from 'views/Pools/components/CakeVaultCard/VaultCardActions'\r\nimport AprRow from 'views/Pools/components/PoolCard/AprRow'\r\nimport Staked from 'views/Pools/components/PoolsTable/ActionPanel/Stake'\r\nimport { CompoundingPoolTag } from 'components/Tags'\r\nimport { ActionContainer } from 'views/Pools/components/PoolsTable/ActionPanel/styles'\r\nimport { VaultKey } from 'state/types'\r\nimport UnstakingFeeCountdownRow from 'views/Pools/components/CakeVaultCard/UnstakingFeeCountdownRow'\r\nimport RecentCakeProfitCountdownRow from 'views/Pools/components/CakeVaultCard/RecentCakeProfitRow'\r\nimport { getBscScanLink } from 'utils'\r\n\r\nconst StyledCardMobile = styled(Card)`\r\n  max-width: 400px;\r\n  width: 100%;\r\n`\r\n\r\nconst StyledTokenContent = styled(Flex)`\r\n  ${Text} {\r\n    line-height: 1.2;\r\n    white-space: nowrap;\r\n  }\r\n`\r\n\r\nconst StyledCardFooter = styled(Box)`\r\n  padding: 16px;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n`\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  display: grid;\r\n  padding: 16px;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  gap: 16px;\r\n  ${ActionContainer} {\r\n    margin: 0;\r\n    background-color: ${({ theme }) => theme.colors.invertedContrast};\r\n  }\r\n`\r\n\r\nconst IfoPoolVaultCardMobile: React.FC = () => {\r\n  const { pool, userDataLoaded } = useIfoWithApr()\r\n  const { account } = useActiveWeb3React()\r\n  const { t } = useTranslation()\r\n  const credit = useIfoPoolCredit()\r\n  const {\r\n    fees: { performanceFeeAsDecimal },\r\n  } = useIfoPoolVault()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const creditStartBlock = useIfoPooStartBlock()\r\n  const {\r\n    tooltip: startBlockTooltip,\r\n    tooltipVisible: startBlockTooltipVisible,\r\n    targetRef: startBlockTargetRef,\r\n  } = useTooltip(\r\n    <>\r\n      <Text>\r\n        {t(\r\n          'The start block of the current calculation period. Your average IFO CAKE Pool staking balance is calculated throughout this period.',\r\n        )}\r\n      </Text>\r\n      <LinkExternal href=\"https://medium.com/pancakeswap/initial-farm-offering-ifo-3-0-ifo-staking-pool-622d8bd356f1\">\r\n        {t('Check out our Medium article for more details.')}\r\n      </LinkExternal>\r\n    </>,\r\n    { placement: 'auto' },\r\n  )\r\n\r\n  // TODO: refactor this is use everywhere\r\n  const cakeAsNumberBalance = getBalanceNumber(credit)\r\n  const cakeAsBigNumber = getDecimalAmount(new BigNumber(cakeAsNumberBalance))\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0)\r\n    ? getBalanceNumber(cakeAsBigNumber.multipliedBy(cakePriceBusd), pool.stakingToken.decimals)\r\n    : 0\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you.'),\r\n    {\r\n      placement: 'bottom',\r\n    },\r\n  )\r\n  return (\r\n    <StyledCardMobile isActive>\r\n      <CardHeader p=\"16px\">\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n          <StyledTokenContent alignItems=\"center\" flex={1}>\r\n            <TokenPairImage width={24} height={24} primaryToken={tokens.cake} secondaryToken={tokens.cake} />\r\n            <Box ml=\"8px\">\r\n              <Text fontSize=\"12px\" bold color=\"secondary\" textTransform=\"uppercase\">\r\n                {t('Staked')}\r\n              </Text>\r\n              <Text small bold>\r\n                IFO CAKE\r\n              </Text>\r\n              <Text color=\"textSubtle\" fontSize=\"12px\">\r\n                {t('Stake')} CAKE\r\n              </Text>\r\n            </Box>\r\n          </StyledTokenContent>\r\n          <StyledTokenContent flexDirection=\"column\" flex={1}>\r\n            <Text color=\"textSubtle\" fontSize=\"12px\">\r\n              {t('Avg Balance')}\r\n            </Text>\r\n            <Balance small bold decimals={3} value={cakeAsNumberBalance} />\r\n            <Balance value={stakedDollarValue} fontSize=\"12px\" color=\"textSubtle\" decimals={2} prefix=\"~\" unit=\" USD\" />\r\n          </StyledTokenContent>\r\n          <ExpandableButton expanded={isExpanded} onClick={() => setIsExpanded((prev) => !prev)} />\r\n        </Flex>\r\n      </CardHeader>\r\n      {isExpanded && (\r\n        <>\r\n          <StyledCardBody>\r\n            <AprRow pool={pool} stakedBalance={cakeAsBigNumber} performanceFee={performanceFeeAsDecimal} />\r\n            {pool.vaultKey === VaultKey.IfoPool && (\r\n              <Flex mt=\"8px\" justifyContent=\"space-between\">\r\n                <Text fontSize=\"14px\">{t('Credit calculation starts:')}</Text>\r\n                <Flex mr=\"6px\" alignItems=\"center\">\r\n                  <Link external href={getBscScanLink(creditStartBlock, 'block')} mr=\"4px\" fontSize=\"14px\">\r\n                    {creditStartBlock}\r\n                  </Link>\r\n                  <span ref={startBlockTargetRef}>\r\n                    <HelpIcon color=\"textSubtle\" />\r\n                  </span>\r\n                </Flex>\r\n                {startBlockTooltipVisible && startBlockTooltip}\r\n              </Flex>\r\n            )}\r\n            <ActionContainer>\r\n              <IfoVaultCardAvgBalance pool={pool} />\r\n            </ActionContainer>\r\n            <Staked pool={pool} userDataLoaded={userDataLoaded} />\r\n            <ActionContainer>\r\n              <Box>\r\n                <RecentCakeProfitCountdownRow vaultKey={VaultKey.IfoPool} />\r\n              </Box>\r\n              <Box mt=\"8px\">\r\n                <UnstakingFeeCountdownRow vaultKey={VaultKey.IfoPool} />\r\n              </Box>\r\n            </ActionContainer>\r\n          </StyledCardBody>\r\n          <StyledCardFooter>\r\n            <ExpandedFooter account={account} pool={pool} />\r\n            <Flex alignItems=\"center\">\r\n              <CompoundingPoolTag />\r\n              {tooltipVisible && tooltip}\r\n              <Flex ref={targetRef}>\r\n                <HelpIcon ml=\"4px\" width=\"20px\" height=\"20px\" color=\"textSubtle\" />\r\n              </Flex>\r\n            </Flex>\r\n          </StyledCardFooter>\r\n        </>\r\n      )}\r\n    </StyledCardMobile>\r\n  )\r\n}\r\n\r\nconst IfoPoolVaultCard = () => {\r\n  const { pool } = useIfoWithApr()\r\n  const { isMd, isXs, isSm } = useMatchBreakpoints()\r\n  const isSmallerThanTablet = isMd || isXs || isSm\r\n  if (isSmallerThanTablet) {\r\n    return <IfoPoolVaultCardMobile />\r\n  }\r\n\r\n  return <CakeVaultCard pool={pool} showStakedOnly={false} m=\"auto\" />\r\n}\r\n\r\nexport default IfoPoolVaultCard\r\n","import { ContextApi } from 'contexts/Localization/types'\r\n\r\nconst config = (t: ContextApi['t']) => {\r\n  return [\r\n    {\r\n      title: t('What’s the difference between a Basic Sale and Unlimited Sale?'),\r\n      description: [\r\n        t(\r\n          'In the Basic Sale, every user can commit a maximum of about 100 USD worth of CAKE. We calculate the maximum CAKE amount about 30 minutes before each IFO. The Basic Sale has no participation fee.',\r\n        ),\r\n        t(\r\n          'In the Unlimited Sale, there’s no limit to the amount of CAKE you can commit. However, there’s a fee for participation: see below.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('Which sale should I commit to? Can I do both?'),\r\n      description: [\r\n        t(\r\n          'You can choose one or both at the same time! If you’re only committing a small amount, we recommend the Basic Sale first. Just remember you need a PancakeSwap Profile in order to participate.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('How much is the participation fee?'),\r\n      description: [\r\n        t('There’s only a participation fee for the Unlimited Sale: there’s no fee for the Basic Sale.'),\r\n        t('The fee will start at 1%.'),\r\n        t(\r\n          'The 1% participation fee decreases in cliffs, based on the percentage of overflow from the “Unlimited” portion of the sale.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('Where does the participation fee go?'),\r\n      description: [t('The CAKE from the participation fee will be thrown into the weekly token burn.')],\r\n    },\r\n    {\r\n      title: t('How can I get an achievement for participating in the IFO?'),\r\n      description: [\r\n        t('You need to contribute a minimum of about 10 USD worth of CAKE to either sale.'),\r\n        t(\r\n          'You can contribute to one or both, it doesn’t matter: only your overall contribution is counted for the achievement.',\r\n        ),\r\n      ],\r\n    },\r\n  ]\r\n}\r\nexport default config\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, Heading, Card, CardHeader, CardBody, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport FoldableText from 'components/FoldableSection/FoldableText'\r\nimport config from './config'\r\n\r\nconst ImageWrapper = styled.div`\r\n  flex: none;\r\n  order: 2;\r\n  max-width: 414px;\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    order: 1;\r\n  }\r\n`\r\n\r\nconst DetailsWrapper = styled.div`\r\n  order: 1;\r\n  margin-bottom: 40px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    order: 2;\r\n    margin-bottom: 0;\r\n    margin-left: 40px;\r\n  }\r\n`\r\n\r\nconst IfoQuestions = () => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Flex alignItems={['center', null, null, 'start']} flexDirection={['column', null, null, 'row']}>\r\n      <ImageWrapper>\r\n        <img src=\"/images/ifos/ifo-bunny.png\" alt=\"ifo bunny\" width=\"414px\" height=\"500px\" />\r\n      </ImageWrapper>\r\n      <DetailsWrapper>\r\n        <Card>\r\n          <CardHeader>\r\n            <Heading scale=\"lg\" color=\"secondary\">\r\n              {t('Details')}\r\n            </Heading>\r\n          </CardHeader>\r\n          <CardBody>\r\n            {config(t).map(({ title, description }, i, { length }) => (\r\n              <FoldableText key={title} id={title} mb={i + 1 === length ? '' : '24px'} title={title}>\r\n                {description.map((desc) => {\r\n                  return (\r\n                    <Text key={desc} color=\"textSubtle\" as=\"p\">\r\n                      {desc}\r\n                    </Text>\r\n                  )\r\n                })}\r\n              </FoldableText>\r\n            ))}\r\n          </CardBody>\r\n        </Card>\r\n      </DetailsWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default IfoQuestions\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport every from 'lodash/every'\r\nimport {\r\n  Stepper,\r\n  Step,\r\n  StepStatus,\r\n  Card,\r\n  CardBody,\r\n  Heading,\r\n  Text,\r\n  Button,\r\n  Box,\r\n  CheckmarkIcon,\r\n  Flex,\r\n  useTooltip,\r\n  TooltipText,\r\n  PancakeRoundIcon,\r\n  Skeleton,\r\n  useModal,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Ifo } from 'config/constants/types'\r\nimport { WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport Container from 'components/Layout/Container'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport Balance from 'components/Balance'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport VaultStakeModal from 'views/Pools/components/CakeVaultCard/VaultStakeModal'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr } from 'state/pools/hooks'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n  walletIfoData: WalletIfoData\r\n  isLive?: boolean\r\n}\r\n\r\nconst Wrapper = styled(Container)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n  margin-left: -16px;\r\n  margin-right: -16px;\r\n  padding-top: 48px;\r\n  padding-bottom: 48px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: -24px;\r\n    margin-right: -24px;\r\n  }\r\n`\r\n\r\nconst InlineLink = styled(Link)`\r\n  display: inline;\r\n`\r\n\r\nconst SmallStakePoolCard = styled(Box)`\r\n  margin-top: 16px;\r\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n  background-color: ${({ theme }) => theme.colors.background};\r\n`\r\n\r\nconst Step1 = ({ hasProfile }: { hasProfile: boolean }) => {\r\n  const { t } = useTranslation()\r\n  const ifoPoolVault = useIfoPoolVault()\r\n  const credit = useIfoPoolCredit()\r\n  const { pool } = useIfoWithApr()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <Box>\r\n      <span>\r\n        {t(\r\n          'Average pool balance is calculated by average block balance in the IFO pool in over the staking period announced with each IFO proposal.',\r\n        )}\r\n      </span>{' '}\r\n      <InlineLink\r\n        external\r\n        href=\"https://medium.com/pancakeswap/initial-farm-offering-ifo-3-0-ifo-staking-pool-622d8bd356f1\"\r\n      >\r\n        {t('Please refer to our blog post for more details.')}\r\n      </InlineLink>\r\n    </Box>,\r\n    {},\r\n  )\r\n\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0) && credit ? getBalanceNumber(credit.multipliedBy(cakePriceBusd), 18) : 0\r\n\r\n  const stakingTokenBalance = pool?.userData?.stakingTokenBalance\r\n    ? new BigNumber(pool.userData.stakingTokenBalance)\r\n    : BIG_ZERO\r\n\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal\r\n      stakingMax={stakingTokenBalance}\r\n      performanceFee={ifoPoolVault.fees.performanceFeeAsDecimal}\r\n      pool={pool}\r\n    />,\r\n  )\r\n\r\n  return (\r\n    <CardBody>\r\n      {tooltipVisible && tooltip}\r\n      <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n        {t('Stake CAKE in IFO pool')}\r\n      </Heading>\r\n      <Box>\r\n        <Text color=\"textSubtle\" small>\r\n          {t(\r\n            'The maximum amount of CAKE user can commit to all the sales combined, is equal to the average CAKE balance in the IFO CAKE pool prior to the IFO. Stake more CAKE to increase the maximum CAKE you can commit to the sale. Missed this IFO? You can keep staking in the IFO CAKE Pool to join the next IFO sale.',\r\n          )}\r\n        </Text>\r\n        <TooltipText as=\"span\" fontWeight={700} ref={targetRef} color=\"textSubtle\" small>\r\n          {t('How does the average balance calculated?')}\r\n        </TooltipText>\r\n      </Box>\r\n      {hasProfile && (\r\n        <SmallStakePoolCard borderRadius=\"default\" p=\"16px\">\r\n          <FlexGap justifyContent=\"space-between\" alignItems=\"center\" flexWrap=\"wrap\" gap=\"16px\">\r\n            <Flex>\r\n              <PancakeRoundIcon style={{ alignSelf: 'flex-start' }} width={32} height={32} />\r\n              <Box ml=\"16px\">\r\n                <Text bold fontSize=\"12px\" textTransform=\"uppercase\" color=\"secondary\">\r\n                  {t('Your max CAKE entry')}\r\n                </Text>\r\n                <Balance fontSize=\"20px\" bold decimals={5} value={getBalanceNumber(credit)} />\r\n                <Text fontSize=\"12px\" color=\"textSubtle\">\r\n                  {cakePriceBusd.gt(0) ? (\r\n                    <Balance\r\n                      value={stakedDollarValue}\r\n                      fontSize=\"12px\"\r\n                      color=\"textSubtle\"\r\n                      decimals={2}\r\n                      prefix=\"~\"\r\n                      unit=\" USD\"\r\n                    />\r\n                  ) : (\r\n                    <Skeleton mt=\"1px\" height={16} width={64} />\r\n                  )}\r\n                </Text>\r\n              </Box>\r\n            </Flex>\r\n            <Button onClick={onPresentStake}>{t('Stake')} CAKE</Button>\r\n          </FlexGap>\r\n        </SmallStakePoolCard>\r\n      )}\r\n    </CardBody>\r\n  )\r\n}\r\n\r\nconst Step2 = ({ hasProfile, isLive, isCommitted }: { hasProfile: boolean; isLive: boolean; isCommitted: boolean }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <CardBody>\r\n      <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n        {t('Commit CAKE')}\r\n      </Heading>\r\n      <Text color=\"textSubtle\" small>\r\n        {t('When the IFO sales are live, you can “commit” your CAKE to buy the tokens being sold.')} <br />\r\n        {t('We recommend committing to the Basic Sale first, but you can do both if you like.')}\r\n      </Text>\r\n      {hasProfile && isLive && !isCommitted && (\r\n        <Button as=\"a\" href=\"#current-ifo\" mt=\"16px\">\r\n          {t('Commit CAKE')}\r\n        </Button>\r\n      )}\r\n    </CardBody>\r\n  )\r\n}\r\n\r\nconst IfoSteps: React.FC<Props> = ({ ifo, walletIfoData, isLive }) => {\r\n  const { poolBasic, poolUnlimited } = walletIfoData\r\n  const { hasProfile } = useProfile()\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { balance } = useTokenBalance(ifo.currency.address)\r\n  const isCommitted =\r\n    poolBasic.amountTokenCommittedInLP.isGreaterThan(0) || poolUnlimited.amountTokenCommittedInLP.isGreaterThan(0)\r\n  const stepsValidationStatus = [\r\n    hasProfile,\r\n    balance.isGreaterThan(0),\r\n    isCommitted,\r\n    poolBasic.hasClaimed || poolUnlimited.hasClaimed,\r\n  ]\r\n\r\n  const getStatusProp = (index: number): StepStatus => {\r\n    const arePreviousValid = index === 0 ? true : every(stepsValidationStatus.slice(0, index), Boolean)\r\n    if (stepsValidationStatus[index]) {\r\n      return arePreviousValid ? 'past' : 'future'\r\n    }\r\n    return arePreviousValid ? 'current' : 'future'\r\n  }\r\n\r\n  const renderCardBody = (step: number) => {\r\n    const isStepValid = stepsValidationStatus[step]\r\n\r\n    const renderAccountStatus = () => {\r\n      if (!account) {\r\n        return <ConnectWalletButton />\r\n      }\r\n\r\n      if (isStepValid) {\r\n        return (\r\n          <Flex alignItems=\"center\">\r\n            <Text color=\"success\" bold mr=\"8px\">\r\n              {t('Profile Active!')}\r\n            </Text>\r\n            <CheckmarkIcon color=\"success\" />\r\n          </Flex>\r\n        )\r\n      }\r\n\r\n      return (\r\n        <Button as={RouterLink} to={`${nftsBaseUrl}/profile/${account.toLowerCase()}`}>\r\n          {t('Activate your Profile')}\r\n        </Button>\r\n      )\r\n    }\r\n\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <CardBody>\r\n            <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n              {t('Activate your Profile')}\r\n            </Heading>\r\n            <Text color=\"textSubtle\" small mb=\"16px\">\r\n              {t('You’ll need an active PancakeSwap Profile to take part in an IFO!')}\r\n            </Text>\r\n            {renderAccountStatus()}\r\n          </CardBody>\r\n        )\r\n      case 1:\r\n        return <Step1 hasProfile={hasProfile} />\r\n      case 2:\r\n        return <Step2 hasProfile={hasProfile} isLive={isLive} isCommitted={isCommitted} />\r\n      case 3:\r\n        return (\r\n          <CardBody>\r\n            <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n              {t('Claim your tokens and achievement')}\r\n            </Heading>\r\n            <Text color=\"textSubtle\" small>\r\n              {t(\r\n                'After the IFO sales finish, you can claim any IFO tokens that you bought, and any unspent CAKE tokens will be returned to your wallet.',\r\n              )}\r\n            </Text>\r\n          </CardBody>\r\n        )\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading id=\"ifo-how-to\" as=\"h2\" scale=\"xl\" color=\"secondary\" mb=\"24px\" textAlign=\"center\">\r\n        {t('How to Take Part')}\r\n      </Heading>\r\n      <Stepper>\r\n        {stepsValidationStatus.map((_, index) => (\r\n          <Step\r\n            // eslint-disable-next-line react/no-array-index-key\r\n            key={index}\r\n            index={index}\r\n            statusFirstPart={getStatusProp(index)}\r\n            statusSecondPart={getStatusProp(index + 1)}\r\n          >\r\n            <Card>{renderCardBody(index)}</Card>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default IfoSteps\r\n","import { ifosConfig } from 'config/constants'\r\nimport React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV3Data from 'views/Ifos/hooks/v3/useGetWalletIfoData'\r\nimport { IfoCurrentCard } from './components/IfoFoldableCard'\r\nimport IfoLayout, { IfoLayoutWrapper } from './components/IfoLayout'\r\nimport IfoPoolVaultCard from './components/IfoPoolVaultCard'\r\nimport IfoQuestions from './components/IfoQuestions'\r\nimport IfoSteps from './components/IfoSteps'\r\n\r\n/**\r\n * Note: currently there should be only 1 active IFO at a time\r\n */\r\nconst activeIfo = ifosConfig.find((ifo) => ifo.isActive)\r\n\r\nconst Ifo = () => {\r\n  const publicIfoData = useGetPublicIfoV2Data(activeIfo)\r\n  const walletIfoData = useGetWalletIfoV3Data(activeIfo)\r\n\r\n  return (\r\n    <IfoLayout id=\"current-ifo\" py={['24px', '24px', '40px']}>\r\n      <IfoLayoutWrapper>\r\n        <IfoPoolVaultCard />\r\n        <IfoCurrentCard ifo={activeIfo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n      </IfoLayoutWrapper>\r\n      <IfoSteps isLive={publicIfoData.status === 'live'} ifo={activeIfo} walletIfoData={walletIfoData} />\r\n      <IfoQuestions />\r\n    </IfoLayout>\r\n  )\r\n}\r\n\r\nexport default Ifo\r\n","import { useState, useCallback } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { BSC_BLOCK_TIME } from 'config'\r\nimport { Ifo, IfoStatus, PoolIds } from 'config/constants/types'\r\nimport { useLpTokenPrice } from 'state/farms/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV1Abi from 'config/abi/ifoV1.json'\r\nimport { PublicIfoData } from '../../types'\r\nimport { getStatus } from '../helpers'\r\n\r\n/**\r\n * Gets all public data of an IFO\r\n */\r\nconst useGetPublicIfoData = (ifo: Ifo): PublicIfoData => {\r\n  const { address, releaseBlockNumber } = ifo\r\n  const lpTokenPriceInUsd = useLpTokenPrice(ifo.currency.symbol)\r\n  const [state, setState] = useState({\r\n    isInitialized: false,\r\n    status: 'idle' as IfoStatus,\r\n    blocksRemaining: 0,\r\n    secondsUntilStart: 0,\r\n    progress: 5,\r\n    secondsUntilEnd: 0,\r\n    startBlockNum: 0,\r\n    endBlockNum: 0,\r\n    numberPoints: null,\r\n    thresholdPoints: undefined,\r\n    [PoolIds.poolUnlimited]: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      totalAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO, // Not know\r\n      limitPerUserInLP: BIG_ZERO, //  Not used\r\n      taxRate: 0, //  Not used\r\n      sumTaxesOverflow: BIG_ZERO, //  Not used\r\n    },\r\n  })\r\n  const fetchIfoData = useCallback(\r\n    async (currentBlock: number) => {\r\n      const ifoCalls = ['startBlock', 'endBlock', 'raisingAmount', 'totalAmount'].map((method) => ({\r\n        address,\r\n        name: method,\r\n      }))\r\n\r\n      const [startBlock, endBlock, raisingAmount, totalAmount] = await multicallv2(ifoV1Abi, ifoCalls)\r\n\r\n      const startBlockNum = startBlock ? startBlock[0].toNumber() : 0\r\n      const endBlockNum = endBlock ? endBlock[0].toNumber() : 0\r\n\r\n      const status = getStatus(currentBlock, startBlockNum, endBlockNum)\r\n      const totalBlocks = endBlockNum - startBlockNum\r\n      const blocksRemaining = endBlockNum - currentBlock\r\n\r\n      // Calculate the total progress until finished or until start\r\n      const progress =\r\n        currentBlock > startBlockNum\r\n          ? ((currentBlock - startBlockNum) / totalBlocks) * 100\r\n          : ((currentBlock - releaseBlockNumber) / (startBlockNum - releaseBlockNumber)) * 100\r\n\r\n      setState((prev) => ({\r\n        ...prev,\r\n        isInitialized: true,\r\n        status,\r\n        blocksRemaining,\r\n        secondsUntilStart: (startBlockNum - currentBlock) * BSC_BLOCK_TIME,\r\n        progress,\r\n        secondsUntilEnd: blocksRemaining * BSC_BLOCK_TIME,\r\n        startBlockNum,\r\n        endBlockNum,\r\n        [PoolIds.poolUnlimited]: {\r\n          ...prev.poolUnlimited,\r\n          raisingAmountPool: raisingAmount ? new BigNumber(raisingAmount[0].toString()) : BIG_ZERO,\r\n          totalAmountPool: totalAmount ? new BigNumber(totalAmount[0].toString()) : BIG_ZERO,\r\n        },\r\n      }))\r\n    },\r\n    [address, releaseBlockNumber],\r\n  )\r\n\r\n  return { ...state, currencyPriceInUSD: lpTokenPriceInUsd, fetchIfoData }\r\n}\r\n\r\nexport default useGetPublicIfoData\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV1Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV1Abi from 'config/abi/ifoV1.json'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\ninterface UserInfo {\r\n  amount: BigNumber\r\n  claimed: boolean\r\n}\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  [PoolIds.poolUnlimited]: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO, // Not used\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n\r\n  const { address, currency } = ifo\r\n  const { poolUnlimited } = state\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV1Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address, poolUnlimited.isPendingTx)\r\n\r\n  const setPendingTx = (status: boolean) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = () => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['getOfferingAmount', 'userInfo', 'getRefundingAmount'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account],\r\n    }))\r\n\r\n    const [offeringAmount, userInfoResponse, refundingAmount] = await multicallv2(ifoV1Abi, ifoCalls)\r\n    const parsedUserInfo: UserInfo = userInfoResponse\r\n      ? {\r\n          amount: new BigNumber(userInfoResponse.amount.toString()),\r\n          claimed: userInfoResponse.claimed,\r\n        }\r\n      : { amount: BIG_ZERO, claimed: false }\r\n\r\n    setState((prevState) => ({\r\n      isInitialized: true,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: parsedUserInfo.amount,\r\n        hasClaimed: parsedUserInfo.claimed,\r\n        offeringAmountInToken: offeringAmount ? new BigNumber(offeringAmount[0].toString()) : BIG_ZERO,\r\n        refundingAmountInLP: refundingAmount ? new BigNumber(refundingAmount[0].toString()) : BIG_ZERO,\r\n      },\r\n    }))\r\n  }, [account, address])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState(initialState)\r\n  }, [])\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import React from 'react'\r\nimport useGetPublicIfoV1Data from 'views/Ifos/hooks/v1/useGetPublicIfoData'\r\nimport useGetWalletIfoV1Data from 'views/Ifos/hooks/v1/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV1Data: React.FC<Props> = ({ ifo }) => {\r\n  const publicIfoData = useGetPublicIfoV1Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV1Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV1Data\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV2Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  poolBasic: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n  poolUnlimited: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n\r\n  const { address, currency } = ifo\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV2Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address)\r\n\r\n  const setPendingTx = (status: boolean, poolId: PoolIds) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = (poolId: PoolIds) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['viewUserInfo', 'viewUserOfferingAndRefundingAmountsForPools'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account, [0, 1]],\r\n    }))\r\n\r\n    const [userInfo, amounts] = await multicallv2(ifoV2Abi, ifoCalls)\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isInitialized: true,\r\n      poolBasic: {\r\n        ...prevState.poolBasic,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][0].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][0][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][0][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][0][2].toString()),\r\n        hasClaimed: userInfo[1][0],\r\n      },\r\n      poolUnlimited: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][1].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][1][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][1][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][1][2].toString()),\r\n        hasClaimed: userInfo[1][1],\r\n      },\r\n    }))\r\n  }, [account, address])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState({ ...initialState })\r\n  }, [])\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV2Data from 'views/Ifos/hooks/v2/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV2Data: React.FC<Props> = ({ ifo }) => {\r\n  const publicIfoData = useGetPublicIfoV2Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV2Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV2Data\r\n","import React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV3Data from 'views/Ifos/hooks/v3/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV3Data: React.FC<Props> = ({ ifo }) => {\r\n  // TODO: v3 contract\r\n  const publicIfoData = useGetPublicIfoV2Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV3Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV3Data\r\n","import { ifosConfig } from 'config/constants'\r\nimport { Ifo } from 'config/constants/types'\r\nimport React from 'react'\r\nimport IfoCardV1Data from './components/IfoCardV1Data'\r\nimport IfoCardV2Data from './components/IfoCardV2Data'\r\nimport IfoCardV3Data from './components/IfoCardV3Data'\r\nimport IfoLayout from './components/IfoLayout'\r\n\r\nconst inactiveIfo: Ifo[] = ifosConfig.filter((ifo) => !ifo.isActive)\r\n\r\nconst PastIfo = () => {\r\n  return (\r\n    <IfoLayout maxWidth=\"736px\" m=\"auto\" width=\"100%\" id=\"past-ifos\" py={['24px', '24px', '40px']}>\r\n      {inactiveIfo.map((ifo) => {\r\n        switch (ifo.version) {\r\n          case 1:\r\n            return <IfoCardV1Data key={ifo.id} ifo={ifo} />\r\n          case 2:\r\n            return <IfoCardV2Data key={ifo.id} ifo={ifo} />\r\n          case 3:\r\n            return <IfoCardV3Data key={ifo.id} ifo={ifo} />\r\n          default:\r\n            return null\r\n        }\r\n      })}\r\n    </IfoLayout>\r\n  )\r\n}\r\n\r\nexport default PastIfo\r\n","import { SubMenuItems } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport Container from 'components/Layout/Container'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport React from 'react'\r\nimport { Route, useRouteMatch } from 'react-router-dom'\r\nimport { useFetchIfoPool, useFetchPublicPoolsData, useFetchUserPools } from 'state/pools/hooks'\r\nimport Hero from './components/Hero'\r\nimport CurrentIfo from './CurrentIfo'\r\nimport PastIfo from './PastIfo'\r\n\r\nconst Ifos = () => {\r\n  const { t } = useTranslation()\r\n  const { path, isExact } = useRouteMatch()\r\n  const { account } = useWeb3React()\r\n\r\n  useFetchIfoPool()\r\n  // TODO: should be refactored to only fetch one pool we need\r\n  useFetchPublicPoolsData()\r\n  useFetchUserPools(account)\r\n\r\n  return (\r\n    <>\r\n      <SubMenuItems\r\n        items={[\r\n          {\r\n            label: t('Latest'),\r\n            href: '/ifo',\r\n          },\r\n          {\r\n            label: t('Finished'),\r\n            href: '/ifo/history',\r\n          },\r\n        ]}\r\n        activeItem={isExact ? '/ifo' : '/ifo/history'}\r\n      />\r\n      <Hero />\r\n      <Container>\r\n        <Route exact path={`${path}`}>\r\n          <CurrentIfo />\r\n        </Route>\r\n        <Route path={`${path}/history`}>\r\n          <PastIfo />\r\n        </Route>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Ifos\r\n","import { useEffect, useReducer, useRef } from 'react'\r\nimport { noop } from 'lodash'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { ethers } from 'ethers'\r\nimport useToast from 'hooks/useToast'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { logError } from 'utils/sentry'\r\n\r\ntype LoadingState = 'idle' | 'loading' | 'success' | 'fail'\r\n\r\ntype Action =\r\n  | { type: 'requires_approval' }\r\n  | { type: 'approve_sending' }\r\n  | { type: 'approve_receipt' }\r\n  | { type: 'approve_error' }\r\n  | { type: 'confirm_sending' }\r\n  | { type: 'confirm_receipt' }\r\n  | { type: 'confirm_error' }\r\n\r\ninterface State {\r\n  approvalState: LoadingState\r\n  confirmState: LoadingState\r\n}\r\n\r\nconst initialState: State = {\r\n  approvalState: 'idle',\r\n  confirmState: 'idle',\r\n}\r\n\r\nconst reducer = (state: State, actions: Action): State => {\r\n  switch (actions.type) {\r\n    case 'requires_approval':\r\n      return {\r\n        ...state,\r\n        approvalState: 'success',\r\n      }\r\n    case 'approve_sending':\r\n      return {\r\n        ...state,\r\n        approvalState: 'loading',\r\n      }\r\n    case 'approve_receipt':\r\n      return {\r\n        ...state,\r\n        approvalState: 'success',\r\n      }\r\n    case 'approve_error':\r\n      return {\r\n        ...state,\r\n        approvalState: 'fail',\r\n      }\r\n    case 'confirm_sending':\r\n      return {\r\n        ...state,\r\n        confirmState: 'loading',\r\n      }\r\n    case 'confirm_receipt':\r\n      return {\r\n        ...state,\r\n        confirmState: 'success',\r\n      }\r\n    case 'confirm_error':\r\n      return {\r\n        ...state,\r\n        confirmState: 'fail',\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\ninterface OnSuccessProps {\r\n  state: State\r\n  receipt: ethers.providers.TransactionReceipt\r\n}\r\n\r\ninterface ApproveConfirmTransaction {\r\n  onApprove: () => Promise<ethers.providers.TransactionResponse>\r\n  onConfirm: (params?) => Promise<ethers.providers.TransactionResponse>\r\n  onRequiresApproval?: () => Promise<boolean>\r\n  onSuccess: ({ state, receipt }: OnSuccessProps) => void\r\n  onApproveSuccess?: ({ state, receipt }: OnSuccessProps) => void\r\n}\r\n\r\nconst useApproveConfirmTransaction = ({\r\n  onApprove,\r\n  onConfirm,\r\n  onRequiresApproval,\r\n  onSuccess = noop,\r\n  onApproveSuccess = noop,\r\n}: ApproveConfirmTransaction) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  const handlePreApprove = useRef(onRequiresApproval)\r\n  const { toastError } = useToast()\r\n\r\n  // Check if approval is necessary, re-check if account changes\r\n  useEffect(() => {\r\n    if (account && handlePreApprove.current) {\r\n      handlePreApprove.current().then((result) => {\r\n        if (result) {\r\n          dispatch({ type: 'requires_approval' })\r\n        }\r\n      })\r\n    }\r\n  }, [account, handlePreApprove, dispatch])\r\n\r\n  return {\r\n    isApproving: state.approvalState === 'loading',\r\n    isApproved: state.approvalState === 'success',\r\n    isConfirming: state.confirmState === 'loading',\r\n    isConfirmed: state.confirmState === 'success',\r\n    hasApproveFailed: state.approvalState === 'fail',\r\n    hasConfirmFailed: state.confirmState === 'fail',\r\n    handleApprove: async () => {\r\n      try {\r\n        const tx = await onApprove()\r\n        dispatch({ type: 'approve_sending' })\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'approve_receipt' })\r\n          onApproveSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'approve_error' })\r\n        logError(error)\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n    handleConfirm: async (params = {}) => {\r\n      dispatch({ type: 'confirm_sending' })\r\n      try {\r\n        const tx = await onConfirm(params)\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'confirm_receipt' })\r\n          onSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'confirm_error' })\r\n        logError(error)\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nexport default useApproveConfirmTransaction\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { ChevronRightIcon, Button as UIKitButton, AutoRenewIcon, ChevronDownIcon, Box, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nexport enum ButtonArrangement {\r\n  ROW = 'row',\r\n  SEQUENTIAL = 'sequential',\r\n}\r\n\r\ninterface ApproveConfirmButtonsProps {\r\n  isApproveDisabled: boolean\r\n  isApproving: boolean\r\n  isConfirming: boolean\r\n  isConfirmDisabled: boolean\r\n  onApprove: () => void\r\n  onConfirm: () => void\r\n  buttonArrangement?: ButtonArrangement\r\n  confirmLabel?: string\r\n  confirmId?: string\r\n}\r\n\r\nconst StyledApproveConfirmButtonRow = styled.div`\r\n  align-items: center;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  justify-content: center;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-template-columns: 1fr 24px 1fr;\r\n  }\r\n`\r\n\r\nconst Button = styled(UIKitButton)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    min-width: 160px;\r\n  }\r\n`\r\n\r\nconst iconAttrs = { width: '24px', color: 'textDisabled' }\r\n\r\nconst ChevronRight = styled(ChevronRightIcon).attrs(iconAttrs)`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ChevronBottom = styled(ChevronDownIcon).attrs(iconAttrs)`\r\n  display: block;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst spinnerIcon = <AutoRenewIcon spin color=\"currentColor\" />\r\n\r\nconst ApproveConfirmButtons: React.FC<ApproveConfirmButtonsProps> = ({\r\n  isApproveDisabled,\r\n  isApproving,\r\n  isConfirming,\r\n  isConfirmDisabled,\r\n  onApprove,\r\n  onConfirm,\r\n  buttonArrangement = ButtonArrangement.ROW,\r\n  confirmLabel,\r\n  confirmId,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const confirmButtonText = confirmLabel ?? t('Confirm')\r\n\r\n  const ApproveConfirmRow = () => {\r\n    return (\r\n      <StyledApproveConfirmButtonRow>\r\n        <Box>\r\n          <Button\r\n            disabled={isApproveDisabled}\r\n            onClick={onApprove}\r\n            endIcon={isApproving ? spinnerIcon : undefined}\r\n            isLoading={isApproving}\r\n          >\r\n            {isApproving ? t('Enabling') : t('Enable')}\r\n          </Button>\r\n        </Box>\r\n        <Flex justifyContent=\"center\">\r\n          <ChevronRight />\r\n          <ChevronBottom />\r\n        </Flex>\r\n        <Box>\r\n          <Button\r\n            id={confirmId}\r\n            onClick={onConfirm}\r\n            disabled={isConfirmDisabled}\r\n            isLoading={isConfirming}\r\n            endIcon={isConfirming ? spinnerIcon : undefined}\r\n          >\r\n            {isConfirming ? t('Confirming') : confirmButtonText}\r\n          </Button>\r\n        </Box>\r\n      </StyledApproveConfirmButtonRow>\r\n    )\r\n  }\r\n\r\n  const ApproveConfirmSequential = () => {\r\n    return (\r\n      <>\r\n        {isApproveDisabled ? (\r\n          <Box>\r\n            <Button\r\n              id={confirmId}\r\n              onClick={onConfirm}\r\n              disabled={isConfirmDisabled}\r\n              isLoading={isConfirming}\r\n              endIcon={isConfirming ? spinnerIcon : undefined}\r\n            >\r\n              {isConfirming ? t('Confirming') : confirmButtonText}\r\n            </Button>\r\n          </Box>\r\n        ) : (\r\n          <Box>\r\n            <Button onClick={onApprove} endIcon={isApproving ? spinnerIcon : undefined} isLoading={isApproving}>\r\n              {isApproving ? t('Enabling') : t('Enable')}\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return buttonArrangement === ButtonArrangement.ROW ? ApproveConfirmRow() : ApproveConfirmSequential()\r\n}\r\n\r\nexport default ApproveConfirmButtons\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ExpandableLabel, Flex, FlexProps, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface FoldableTextProps extends FlexProps {\r\n  title?: string\r\n}\r\n\r\nconst Wrapper = styled(Flex)`\r\n  cursor: pointer;\r\n`\r\n\r\nconst StyledExpandableLabelWrapper = styled(Flex)`\r\n  button {\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n  }\r\n`\r\n\r\nconst StyledChildrenFlex = styled(Flex)<{ isExpanded?: boolean }>`\r\n  overflow: hidden;\r\n  height: ${({ isExpanded }) => (isExpanded ? '100%' : '0px')};\r\n  padding-bottom: ${({ isExpanded }) => (isExpanded ? '16px' : '0px')};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.inputSecondary};\r\n`\r\n\r\nconst FoldableText: React.FC<FoldableTextProps> = ({ title, children, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  return (\r\n    <Wrapper {...props} flexDirection=\"column\" onClick={() => setIsExpanded(!isExpanded)}>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" pb=\"16px\">\r\n        <Text fontWeight=\"bold\">{title}</Text>\r\n        <StyledExpandableLabelWrapper>\r\n          <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n            {isExpanded ? t('Hide') : t('Details')}\r\n          </ExpandableLabel>\r\n        </StyledExpandableLabelWrapper>\r\n      </Flex>\r\n      <StyledChildrenFlex isExpanded={isExpanded} flexDirection=\"column\">\r\n        {children}\r\n      </StyledChildrenFlex>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default FoldableText\r\n"],"sourceRoot":""}